(()=>{var __webpack_modules__={234:function(e){
/*! @license DOMPurify 2.3.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.4/LICENSE */
e.exports=function(){"use strict";function e(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var t=Object.hasOwnProperty,n=Object.setPrototypeOf,o=Object.isFrozen,r=Object.getPrototypeOf,i=Object.getOwnPropertyDescriptor,a=Object.freeze,s=Object.seal,c=Object.create,l="undefined"!=typeof Reflect&&Reflect,u=l.apply,d=l.construct;u||(u=function(e,t,n){return e.apply(t,n)}),a||(a=function(e){return e}),s||(s=function(e){return e}),d||(d=function(t,n){return new(Function.prototype.bind.apply(t,[null].concat(e(n))))});var f=_(Array.prototype.forEach),p=_(Array.prototype.pop),m=_(Array.prototype.push),h=_(String.prototype.toLowerCase),g=_(String.prototype.match),y=_(String.prototype.replace),w=_(String.prototype.indexOf),v=_(String.prototype.trim),b=_(RegExp.prototype.test),k=E(TypeError);function _(e){return function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return u(e,t,o)}}function E(e){return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return d(e,n)}}function x(e,t){n&&n(e,null);for(var r=t.length;r--;){var i=t[r];if("string"==typeof i){var a=h(i);a!==i&&(o(t)||(t[r]=a),i=a)}e[i]=!0}return e}function S(e){var n=c(null),o=void 0;for(o in e)u(t,e,[o])&&(n[o]=e[o]);return n}function C(e,t){for(;null!==e;){var n=i(e,t);if(n){if(n.get)return _(n.get);if("function"==typeof n.value)return _(n.value)}e=r(e)}function o(e){return console.warn("fallback value for",e),null}return o}var T=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),O=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),L=a(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),A=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),R=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P=a(["#text"]),M=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),I=a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),D=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F=s(/\{\{[\s\S]*|[\s\S]*\}\}/gm),B=s(/<%[\s\S]*|[\s\S]*%>/gm),H=s(/^data-[\-\w.\u00B7-\uFFFF]/),K=s(/^aria-[\-\w]+$/),V=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=s(/^(?:\w+script|data):/i),Z=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function W(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var j=function(){return"undefined"==typeof window?null:window},z=function(e,t){if("object"!==(void 0===e?"undefined":q(e))||"function"!=typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(o)&&(n=t.currentScript.getAttribute(o));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j(),t=function(e){return X(e)};if(t.version="2.3.4",t.removed=[],!e||!e.document||9!==e.document.nodeType)return t.isSupported=!1,t;var n=e.document,o=e.document,r=e.DocumentFragment,i=e.HTMLTemplateElement,s=e.Node,c=e.Element,l=e.NodeFilter,u=e.NamedNodeMap,d=void 0===u?e.NamedNodeMap||e.MozNamedAttrMap:u,_=e.HTMLFormElement,E=e.DOMParser,Q=e.trustedTypes,$=c.prototype,Y=C($,"cloneNode"),J=C($,"nextSibling"),ee=C($,"childNodes"),te=C($,"parentNode");if("function"==typeof i){var ne=o.createElement("template");ne.content&&ne.content.ownerDocument&&(o=ne.content.ownerDocument)}var oe=z(Q,n),re=oe&&Ue?oe.createHTML(""):"",ie=o,ae=ie.implementation,se=ie.createNodeIterator,ce=ie.createDocumentFragment,le=ie.getElementsByTagName,ue=n.importNode,de={};try{de=S(o).documentMode?o.documentMode:{}}catch(e){}var fe={};t.isSupported="function"==typeof te&&ae&&void 0!==ae.createHTMLDocument&&9!==de;var pe=F,me=B,he=H,ge=K,ye=G,we=Z,ve=V,be=null,ke=x({},[].concat(W(T),W(O),W(N),W(A),W(P))),_e=null,Ee=x({},[].concat(W(M),W(I),W(U),W(D))),xe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Se=null,Ce=null,Te=!0,Oe=!0,Ne=!1,Le=!1,Ae=!1,Re=!1,Pe=!1,Me=!1,Ie=!1,Ue=!1,De=!0,Fe=!0,Be=!1,He={},Ke=null,Ve=x({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ge=null,Ze=x({},["audio","video","img","source","image","track"]),qe=null,We=x({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),je="http://www.w3.org/1998/Math/MathML",ze="http://www.w3.org/2000/svg",Xe="http://www.w3.org/1999/xhtml",Qe=Xe,$e=!1,Ye=void 0,Je=["application/xhtml+xml","text/html"],et="text/html",tt=void 0,nt=null,ot=o.createElement("form"),rt=function(e){return e instanceof RegExp||e instanceof Function},it=function(e){nt&&nt===e||(e&&"object"===(void 0===e?"undefined":q(e))||(e={}),e=S(e),be="ALLOWED_TAGS"in e?x({},e.ALLOWED_TAGS):ke,_e="ALLOWED_ATTR"in e?x({},e.ALLOWED_ATTR):Ee,qe="ADD_URI_SAFE_ATTR"in e?x(S(We),e.ADD_URI_SAFE_ATTR):We,Ge="ADD_DATA_URI_TAGS"in e?x(S(Ze),e.ADD_DATA_URI_TAGS):Ze,Ke="FORBID_CONTENTS"in e?x({},e.FORBID_CONTENTS):Ve,Se="FORBID_TAGS"in e?x({},e.FORBID_TAGS):{},Ce="FORBID_ATTR"in e?x({},e.FORBID_ATTR):{},He="USE_PROFILES"in e&&e.USE_PROFILES,Te=!1!==e.ALLOW_ARIA_ATTR,Oe=!1!==e.ALLOW_DATA_ATTR,Ne=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=e.SAFE_FOR_TEMPLATES||!1,Ae=e.WHOLE_DOCUMENT||!1,Me=e.RETURN_DOM||!1,Ie=e.RETURN_DOM_FRAGMENT||!1,Ue=e.RETURN_TRUSTED_TYPE||!1,Pe=e.FORCE_BODY||!1,De=!1!==e.SANITIZE_DOM,Fe=!1!==e.KEEP_CONTENT,Be=e.IN_PLACE||!1,ve=e.ALLOWED_URI_REGEXP||ve,Qe=e.NAMESPACE||Xe,e.CUSTOM_ELEMENT_HANDLING&&rt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(xe.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&rt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(xe.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(xe.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ye=Ye=-1===Je.indexOf(e.PARSER_MEDIA_TYPE)?et:e.PARSER_MEDIA_TYPE,tt="application/xhtml+xml"===Ye?function(e){return e}:h,Le&&(Oe=!1),Ie&&(Me=!0),He&&(be=x({},[].concat(W(P))),_e=[],!0===He.html&&(x(be,T),x(_e,M)),!0===He.svg&&(x(be,O),x(_e,I),x(_e,D)),!0===He.svgFilters&&(x(be,N),x(_e,I),x(_e,D)),!0===He.mathMl&&(x(be,A),x(_e,U),x(_e,D))),e.ADD_TAGS&&(be===ke&&(be=S(be)),x(be,e.ADD_TAGS)),e.ADD_ATTR&&(_e===Ee&&(_e=S(_e)),x(_e,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&x(qe,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(Ke===Ve&&(Ke=S(Ke)),x(Ke,e.FORBID_CONTENTS)),Fe&&(be["#text"]=!0),Ae&&x(be,["html","head","body"]),be.table&&(x(be,["tbody"]),delete Se.tbody),a&&a(e),nt=e)},at=x({},["mi","mo","mn","ms","mtext"]),st=x({},["foreignobject","desc","title","annotation-xml"]),ct=x({},O);x(ct,N),x(ct,L);var lt=x({},A);x(lt,R);var ut=function(e){var t=te(e);t&&t.tagName||(t={namespaceURI:Xe,tagName:"template"});var n=h(e.tagName),o=h(t.tagName);if(e.namespaceURI===ze)return t.namespaceURI===Xe?"svg"===n:t.namespaceURI===je?"svg"===n&&("annotation-xml"===o||at[o]):Boolean(ct[n]);if(e.namespaceURI===je)return t.namespaceURI===Xe?"math"===n:t.namespaceURI===ze?"math"===n&&st[o]:Boolean(lt[n]);if(e.namespaceURI===Xe){if(t.namespaceURI===ze&&!st[o])return!1;if(t.namespaceURI===je&&!at[o])return!1;var r=x({},["title","style","font","a","script"]);return!lt[n]&&(r[n]||!ct[n])}return!1},dt=function(e){m(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=re}catch(t){e.remove()}}},ft=function(e,n){try{m(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch(e){m(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),"is"===e&&!_e[e])if(Me||Ie)try{dt(n)}catch(e){}else try{n.setAttribute(e,"")}catch(e){}},pt=function(e){var t=void 0,n=void 0;if(Pe)e="<remove></remove>"+e;else{var r=g(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===Ye&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var i=oe?oe.createHTML(e):e;if(Qe===Xe)try{t=(new E).parseFromString(i,Ye)}catch(e){}if(!t||!t.documentElement){t=ae.createDocument(Qe,"template",null);try{t.documentElement.innerHTML=$e?"":i}catch(e){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(o.createTextNode(n),a.childNodes[0]||null),Qe===Xe?le.call(t,Ae?"html":"body")[0]:Ae?t.documentElement:a},mt=function(e){return se.call(e.ownerDocument||e,e,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},ht=function(e){return e instanceof _&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},gt=function(e){return"object"===(void 0===s?"undefined":q(s))?e instanceof s:e&&"object"===(void 0===e?"undefined":q(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},yt=function(e,n,o){fe[e]&&f(fe[e],(function(e){e.call(t,n,o,nt)}))},wt=function(e){var n=void 0;if(yt("beforeSanitizeElements",e,null),ht(e))return dt(e),!0;if(g(e.nodeName,/[\u0080-\uFFFF]/))return dt(e),!0;var o=tt(e.nodeName);if(yt("uponSanitizeElement",e,{tagName:o,allowedTags:be}),!gt(e.firstElementChild)&&(!gt(e.content)||!gt(e.content.firstElementChild))&&b(/<[/\w]/g,e.innerHTML)&&b(/<[/\w]/g,e.textContent))return dt(e),!0;if("select"===o&&b(/<template/i,e.innerHTML))return dt(e),!0;if(!be[o]||Se[o]){if(Fe&&!Ke[o]){var r=te(e)||e.parentNode,i=ee(e)||e.childNodes;if(i&&r)for(var a=i.length-1;a>=0;--a)r.insertBefore(Y(i[a],!0),J(e))}if(!Se[o]&&bt(o)){if(xe.tagNameCheck instanceof RegExp&&b(xe.tagNameCheck,o))return!1;if(xe.tagNameCheck instanceof Function&&xe.tagNameCheck(o))return!1}return dt(e),!0}return e instanceof c&&!ut(e)?(dt(e),!0):"noscript"!==o&&"noembed"!==o||!b(/<\/no(script|embed)/i,e.innerHTML)?(Le&&3===e.nodeType&&(n=e.textContent,n=y(n,pe," "),n=y(n,me," "),e.textContent!==n&&(m(t.removed,{element:e.cloneNode()}),e.textContent=n)),yt("afterSanitizeElements",e,null),!1):(dt(e),!0)},vt=function(e,t,n){if(De&&("id"===t||"name"===t)&&(n in o||n in ot))return!1;if(Oe&&!Ce[t]&&b(he,t));else if(Te&&b(ge,t));else if(!_e[t]||Ce[t]){if(!(bt(e)&&(xe.tagNameCheck instanceof RegExp&&b(xe.tagNameCheck,e)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(e))&&(xe.attributeNameCheck instanceof RegExp&&b(xe.attributeNameCheck,t)||xe.attributeNameCheck instanceof Function&&xe.attributeNameCheck(t))||"is"===t&&xe.allowCustomizedBuiltInElements&&(xe.tagNameCheck instanceof RegExp&&b(xe.tagNameCheck,n)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(n))))return!1}else if(qe[t]);else if(b(ve,y(n,we,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==w(n,"data:")||!Ge[e])if(Ne&&!b(ye,y(n,we,"")));else if(n)return!1;return!0},bt=function(e){return e.indexOf("-")>0},kt=function(e){var n=void 0,o=void 0,r=void 0,i=void 0;yt("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_e};for(i=a.length;i--;){var c=n=a[i],l=c.name,u=c.namespaceURI;if(o=v(n.value),r=tt(l),s.attrName=r,s.attrValue=o,s.keepAttr=!0,s.forceKeepAttr=void 0,yt("uponSanitizeAttribute",e,s),o=s.attrValue,!s.forceKeepAttr&&(ft(l,e),s.keepAttr))if(b(/\/>/i,o))ft(l,e);else{Le&&(o=y(o,pe," "),o=y(o,me," "));var d=tt(e.nodeName);if(vt(d,r,o))try{u?e.setAttributeNS(u,l,o):e.setAttribute(l,o),p(t.removed)}catch(e){}}}yt("afterSanitizeAttributes",e,null)}},_t=function e(t){var n=void 0,o=mt(t);for(yt("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)yt("uponSanitizeShadowNode",n,null),wt(n)||(n.content instanceof r&&e(n.content),kt(n));yt("afterSanitizeShadowDOM",t,null)};return t.sanitize=function(o,i){var a=void 0,c=void 0,l=void 0,u=void 0,d=void 0;if(($e=!o)&&(o="\x3c!--\x3e"),"string"!=typeof o&&!gt(o)){if("function"!=typeof o.toString)throw k("toString is not a function");if("string"!=typeof(o=o.toString()))throw k("dirty is not a string, aborting")}if(!t.isSupported){if("object"===q(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof o)return e.toStaticHTML(o);if(gt(o))return e.toStaticHTML(o.outerHTML)}return o}if(Re||it(i),t.removed=[],"string"==typeof o&&(Be=!1),Be);else if(o instanceof s)1===(c=(a=pt("\x3c!----\x3e")).ownerDocument.importNode(o,!0)).nodeType&&"BODY"===c.nodeName||"HTML"===c.nodeName?a=c:a.appendChild(c);else{if(!Me&&!Le&&!Ae&&-1===o.indexOf("<"))return oe&&Ue?oe.createHTML(o):o;if(!(a=pt(o)))return Me?null:re}a&&Pe&&dt(a.firstChild);for(var f=mt(Be?o:a);l=f.nextNode();)3===l.nodeType&&l===u||wt(l)||(l.content instanceof r&&_t(l.content),kt(l),u=l);if(u=null,Be)return o;if(Me){if(Ie)for(d=ce.call(a.ownerDocument);a.firstChild;)d.appendChild(a.firstChild);else d=a;return _e.shadowroot&&(d=ue.call(n,d,!0)),d}var p=Ae?a.outerHTML:a.innerHTML;return Le&&(p=y(p,pe," "),p=y(p,me," ")),oe&&Ue?oe.createHTML(p):p},t.setConfig=function(e){it(e),Re=!0},t.clearConfig=function(){nt=null,Re=!1},t.isValidAttribute=function(e,t,n){nt||it({});var o=tt(e),r=tt(t);return vt(o,r,n)},t.addHook=function(e,t){"function"==typeof t&&(fe[e]=fe[e]||[],m(fe[e],t))},t.removeHook=function(e){fe[e]&&p(fe[e])},t.removeHooks=function(e){fe[e]&&(fe[e]=[])},t.removeAllHooks=function(){fe={}},t}return X()}()},34:e=>{e.exports=function(e){const{addSearchAlias:t,cmap:n,getBrowserName:o,getFormData:r,map:i,mapkey:a,readText:s,tabOpenLink:c,vmapkey:l,Clipboard:u,Hints:d,Front:f,RUNTIME:p}=e;function m(){var e=[];return document.querySelectorAll("table").forEach((function(t){var n=t.querySelector("tr");n&&e.push(...n.children)})),e}function h(e){return(e.method||"get")+"::"+new URL(e.action).pathname}i("g0",":feedkeys 99E",0,"#3Go to the first tab"),i("g$",":feedkeys 99R",0,"#3Go to the last tab"),a("zr","#3zoom reset",(function(){p("setZoom",{zoomFactor:0})})),a("zi","#3zoom in",(function(){p("setZoom",{zoomFactor:.1})})),a("zo","#3zoom out",(function(){p("setZoom",{zoomFactor:-.1})})),i("ZQ",":quit"),a("ZZ","#5Save session and quit",(function(){p("createSession",{name:"LAST",quitAfterSaved:!0})})),a("ZR","#5Restore last session",(function(){p("openSession",{name:"LAST"})})),i("u","e"),a("af","#1Open a link in active new tab",(function(){d.create("",d.dispatchMouseClick,{tabbed:!0,active:!0})})),a("gf","#1Open a link in non-active new tab",(function(){d.create("",d.dispatchMouseClick,{tabbed:!0,active:!1})})),a("cf","#1Open multiple links in a new tab",(function(){d.create("",d.dispatchMouseClick,{multipleHits:!0})})),i("C","gf"),a("<Ctrl-h>","#1Mouse over elements.",(function(){d.create("",((e,t)=>{if(chrome.surfingkeys){const t=e.getClientRects()[0];chrome.surfingkeys.sendMouseEvent(2,Math.round(t.x+t.width/2),Math.round(t.y+t.height/2))}else d.dispatchMouseClick(e,t)}),{mouseEvents:["mouseover"]})})),a("<Ctrl-j>","#1Mouse out elements.",(function(){d.create("",d.dispatchMouseClick,{mouseEvents:["mouseout"]})})),a("ya","#7Copy a link URL to the clipboard",(function(){d.create("*[href]",(function(e){u.write(e.href)}))})),a("yma","#7Copy multiple link URLs to the clipboard",(function(){var e=[];d.create("*[href]",(function(t){e.push(t.href),u.write(e.join("\n"))}),{multipleHits:!0})})),a("yc","#7Copy a column of a table",(function(){d.create(m(),(function(e){var t=Array.from(e.closest("table").querySelectorAll("tr")).map((function(t){return t.children.length>e.cellIndex?t.children[e.cellIndex].innerText:""}));u.write(t.join("\n"))}))})),a("ymc","#7Copy multiple columns of a table",(function(){var e=null;d.create(m(),(function(t){var n=Array.from(t.closest("table").querySelectorAll("tr")).map((function(e){return e.children.length>t.cellIndex?e.children[t.cellIndex].innerText:""}));e?n.forEach((function(t,n){e[n]+="\t"+t})):e=n,u.write(e.join("\n"))}),{multipleHits:!0})})),a("yq","#7Copy pre text",(function(){d.create("pre",(function(e){u.write(e.innerText)}))})),a("i","#1Go to edit box",(function(){d.create("input, textarea, *[contenteditable=true], *[role=textbox], select, div.ace_cursor",d.dispatchMouseClick)})),a("I","#1Go to edit box with vim editor",(function(){d.create("input, textarea, *[contenteditable=true], select",(function(e){f.showEditor(e)}))})),i("<Ctrl-i>","I"),n("<ArrowDown>","<Tab>"),n("<ArrowUp>","<Shift-Tab>"),n("<Ctrl-n>","<Tab>"),n("<Ctrl-p>","<Shift-Tab>"),a("q","#1Click on an Image or a button",(function(){d.create("img, button",d.dispatchMouseClick)})),a("<Alt-p>","#3pin/unpin current tab",(function(){p("togglePinTab")})),a("<Alt-m>","#3mute/unmute current tab",(function(){p("muteTab")})),a("B","#4Go one tab history back",(function(){p("historyTab",{backward:!0})}),{repeatIgnore:!0}),a("F","#4Go one tab history forward",(function(){p("historyTab",{backward:!1})}),{repeatIgnore:!0}),a("<Ctrl-6>","#4Go to last used tab",(function(){p("goToLastTab")})),a("gT","#4Go to first activated tab",(function(){p("historyTab",{index:0})}),{repeatIgnore:!0}),a("gt","#4Go to last activated tab",(function(){p("historyTab",{index:-1})}),{repeatIgnore:!0}),a("gp","#4Go to the playing tab",(function(){p("getTabs",{queryInfo:{audible:!0}},(e=>{e.tabs?.at(0)&&(tab=e.tabs[0],p("focusTab",{windowId:tab.windowId,tabId:tab.id}))}))}),{repeatIgnore:!0}),a("S","#4Go back in history",(function(){history.go(-1)}),{repeatIgnore:!0}),a("D","#4Go forward in history",(function(){history.go(1)}),{repeatIgnore:!0}),a("r","#4Reload the page",(function(){p("reloadTab",{nocache:!1})})),a("oi","#8Open incognito window",(function(){p("openIncognito",{url:window.location.href})})),a("H","#8Open opened URL in current tab",(function(){f.openOmnibar({type:"TabURLs"})})),a("om","#8Open URL from vim-like marks",(function(){f.openOmnibar({type:"VIMarks"})})),a(":","#8Open commands",(function(){f.openOmnibar({type:"Commands"})})),a("yi","#7Yank text of an input",(function(){d.create("input, textarea, select",(function(e){u.write(e.value)}))})),a("x","#3Close current tab",(function(){p("closeTab")})),a(";w","#2Focus top window",(function(){top.focus()})),a("cc","#7Open selected link or link from clipboard",(function(){window.getSelection().toString()?c(window.getSelection().toString()):u.read((function(e){c(e.data)}))})),a("ys","#7Copy current page's source",(function(){var e=document.documentElement.cloneNode(!0);u.write(e.outerHTML)})),a("yj","#7Copy current settings",(function(){p("getSettings",{key:"RAW"},(function(e){u.write(JSON.stringify(e.settings,null,4))}))})),a(";pj","#7Restore settings data from clipboard",(function(){u.read((function(e){p("updateSettings",{settings:JSON.parse(e.data.trim())})}))})),a("yt","#3Duplicate current tab",(function(){p("duplicateTab")})),a("yT","#3Duplicate current tab in background",(function(){p("duplicateTab",{active:!1})})),a("yy","#7Copy current page's URL",(function(){var e=window.location.href;0===e.indexOf(chrome.extension.getURL("/pages/pdf_viewer.html"))&&(e=window.location.search.substr(3)),u.write(e)})),a("yY","#7Copy all tabs's url",(function(){p("getTabs",null,(function(e){u.write([window.location.href].concat(e.tabs.map((e=>e.url))).join("\n"))}))})),a("yh","#7Copy current page's host",(function(){var e=new URL(window.location.href);u.write(e.host)})),a("yl","#7Copy current page's title",(function(){u.write(document.title)})),a("yQ","#7Copy all query history of OmniQuery.",(function(){p("getSettings",{key:"OmniQueryHistory"},(function(e){u.write(e.settings.OmniQueryHistory.join("\n"))}))})),a("yf","#7Copy form data in JSON on current page",(function(){var e={};document.querySelectorAll("form").forEach((function(t){e[h(t)]=r(t,"json")})),u.write(JSON.stringify(e,null,4))})),a(";pf","#7Fill form with data from yf",(function(){d.create("form",(function(e,t){var n=h(e);u.read((function(t){var o=JSON.parse(t.data.trim());if(o.hasOwnProperty(n)){var r=o[n];e.querySelectorAll("input, textarea").forEach((function(t){if(r.hasOwnProperty(t.name)&&"hidden"!==t.type)if("radio"===t.type){var n=e.querySelector(`input[name='${t.name}'][value='${r[t.name]}']`);n&&(n.checked=!0)}else if(Array.isArray(r[t.name])){e.querySelectorAll(`input[name='${t.name}']`).forEach((function(e){e.checked=!1})),r[t.name].forEach((function(n){var o=e.querySelector(`input[name='${t.name}'][value='${n}']`);o&&(o.checked=!0)}))}else"string"==typeof r[t.name]&&(t.value=r[t.name])}))}else f.showBanner("No form data found for your selection from clipboard.")}))}))})),a("yp","#7Copy form data for POST on current page",(function(){var e=[];document.querySelectorAll("form").forEach((function(t){var n={};n[(t.method||"get")+"::"+t.action]=r(t),e.push(n)})),u.write(JSON.stringify(e,null,4))})),a("g?","#4Reload current page without query string(all parts after question mark)",(function(){window.location.href=window.location.href.replace(/\?[^\?]*$/,"")})),a("g#","#4Reload current page without hash fragment",(function(){window.location.href=window.location.href.replace(/\#[^\#]*$/,"")})),a("gU","#4Go to root of current URL hierarchy",(function(){window.location.href=window.location.origin})),a("gxt","#3Close tab on left",(function(){p("closeTabLeft")})),a("gxT","#3Close tab on right",(function(){p("closeTabRight")})),a("gx0","#3Close all tabs on left",(function(){p("closeTabsToLeft")})),a("gx$","#3Close all tabs on right",(function(){p("closeTabsToRight")})),a("gxx","#3Close all tabs except current one",(function(){p("tabOnly")})),a("gxp","#3Close playing tab",(function(){p("closeAudibleTab")})),a(";e","#11Edit Settings",(function(){c("/pages/options.html")})),a(";u","#4Edit current URL with vim editor, and open in new tab",(function(){f.showEditor(window.location.href,(function(e){c(e)}),"url")})),a(";U","#4Edit current URL with vim editor, and reload",(function(){f.showEditor(window.location.href,(function(e){window.location.href=e}),"url")})),t("g","google","https://www.google.com/search?q=","s","https://www.google.com/complete/search?client=chrome-omni&gs_ri=chrome-ext&oit=1&cp=1&pgcl=7&q=",(function(e){return JSON.parse(e.text)[1]})),t("d","duckduckgo","https://duckduckgo.com/?q=","s","https://duckduckgo.com/ac/?q=",(function(e){return JSON.parse(e.text).map((function(e){return e.phrase}))})),t("b","baidu","https://www.baidu.com/s?wd=","s","https://suggestion.baidu.com/su?cb=&wd=",(function(e){var t=e.text.match(/,s:\[("[^\]]+")]}/);return t?t[1].replace(/"/g,"").split(","):[]})),t("e","wikipedia","https://en.wikipedia.org/wiki/","s","https://en.wikipedia.org/w/api.php?action=opensearch&format=json&formatversion=2&namespace=0&limit=40&search=",(function(e){return JSON.parse(e.text)[1]})),t("w","bing","https://www.bing.com/search?setmkt=en-us&setlang=en-us&q=","s","https://api.bing.com/osjson.aspx?query=",(function(e){return JSON.parse(e.text)[1]})),t("s","stackoverflow","https://stackoverflow.com/search?q="),t("h","github","https://github.com/search?q=","s","https://api.github.com/search/repositories?order=desc&q=",(function(e){var t=JSON.parse(e.text).items;return t?t.map((function(e){return{title:e.description,url:e.html_url}})):[]})),t("y","youtube","https://www.youtube.com/results?search_query=","s","https://clients1.google.com/complete/search?client=youtube&ds=yt&callback=cb&q=",(function(e){return JSON.parse(e.text.substr(9,e.text.length-10))[1].map((function(e){return e[0]}))}));const g=o();"Firefox"===g?a("on","#3Open newtab",(function(){c("about:blank")})):"Chrome"===g&&(a("cp","#13Toggle proxy for current site",(function(){var e=window.location.host.replace(/:\d+/,"");e&&e.length&&p("updateProxy",{host:e,operation:"toggle"})})),a(";cp","#13Copy proxy info",(function(){p("getSettings",{key:["proxyMode","proxy","autoproxy_hosts"]},(function(e){u.write(JSON.stringify(e.settings,null,4))}))})),a(";ap","#13Apply proxy info from clipboard",(function(){u.read((function(e){var t=JSON.parse(e.data);p("updateProxy",{operation:"set",host:t.autoproxy_hosts,proxy:t.proxy,mode:t.proxyMode})}))})),i(";pa",":setProxyMode always",0,"#13set proxy mode `always`"),i(";pb",":setProxyMode byhost",0,"#13set proxy mode `byhost`"),i(";pd",":setProxyMode direct",0,"#13set proxy mode `direct`"),i(";ps",":setProxyMode system",0,"#13set proxy mode `system`"),i(";pc",":setProxyMode clear",0,"#13set proxy mode `clear`"),a("gr","#14Read selected text or text from clipboard",(function(){u.read((function(e){s(window.getSelection().toString()||e.data,{verbose:!0})}))})),l("gr","#9Read selected text",(function(){s(window.getSelection().toString(),{verbose:!0})})),a("on","#3Open newtab",(function(){c("chrome://newtab/")})),a("ga","#12Open Chrome About",(function(){c("chrome://help/")})),a("gb","#12Open Chrome Bookmarks",(function(){c("chrome://bookmarks/")})),a("gc","#12Open Chrome Cache",(function(){c("chrome://cache/")})),a("gd","#12Open Chrome Downloads",(function(){c("chrome://downloads/")})),a("gh","#12Open Chrome History",(function(){c("chrome://history/")})),a("gk","#12Open Chrome Cookies",(function(){c("chrome://settings/cookies")})),a("ge","#12Open Chrome Extensions",(function(){c("chrome://extensions/")})),a("gn","#12Open Chrome net-internals",(function(){c("chrome://net-internals/#proxy")})),a(";i","#12Open Chrome Inspect",(function(){c("chrome://inspect/#devices")})),a(";v","#11Open neovim",(function(){c("/pages/neovim.html")})),a("<Ctrl-Alt-i>","#1Go to edit box with neo vim editor",(function(){d.create("input, textarea, *[contenteditable=true], select",(function(e){f.showEditor(e,null,null,!0)}))}))),o().startsWith("Safari")||(a("t","#8Open a URL",(function(){f.openOmnibar({type:"URLs"})})),a("go","#8Open a URL in current tab",(function(){f.openOmnibar({type:"URLs",tabbed:!1})})),a("ox","#8Open recently closed URL",(function(){f.openOmnibar({type:"RecentlyClosed"})})),a("X","#3Restore closed tab",(function(){p("openLast")})),a("b","#8Open a bookmark",(function(){f.openOmnibar({type:"Bookmarks"})})),a("ab","#8Bookmark current page to selected folder",(function(){var e={url:window.location.href,title:document.title};f.openOmnibar({type:"AddBookmark",extra:e})})),a("oh","#8Open URL from history",(function(){f.openOmnibar({type:"History"})})),a("W","#3Move current tab to another window",(function(){f.openOmnibar({type:"Windows"})})),a(";gt","#3Gather filtered tabs into current window",(function(){f.openOmnibar({type:"Tabs",extra:{action:"gather"}})})),a(";gw","#3Gather all tabs into current window",(function(){p("gatherWindows")})),a("<<","#3Move current tab to left",(function(){p("moveTab",{step:-1})})),a(">>","#3Move current tab to right",(function(){p("moveTab",{step:1})})),a("yd","#7Copy current downloading URL",(function(){p("getDownloads",{query:{state:"in_progress"}},(function(e){var t=e.downloads.map((function(e){return e.url}));u.write(t.join(","))}))})),a("gs","#12View page source",(function(){p("viewSource",{tab:{tabbed:!0}})})),a(";pm","#11Preview markdown",(function(){c("/pages/markdown.html")})),a(";di","#1Download image",(function(){d.create("img",(function(e){p("download",{url:e.src})}))})),a(";j","#12Close Downloads Shelf",(function(){p("closeDownloadsShelf",{clearHistory:!0})})),a(";dh","#14Delete history older than 30 days",(function(){p("deleteHistoryOlderThan",{days:30})})),a(";yh","#14Yank histories",(function(){p("getHistory",{},(function(e){u.write(e.history.map((e=>e.url)).join("\n"))}))})),a(";ph","#14Put histories from clipboard",(function(){u.read((function(e){p("addHistories",{history:e.data.split("\n")})}))})),a(";db","#14Remove bookmark for current page",(function(){p("removeBookmark")})))}},495:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const o={keyCodesMac:{Minus:["-","_"],Equal:["=","+"],BracketLeft:["[","{"],BracketRight:["]","}"],Backslash:["\\","|"],Semicolon:[";",":"],Quote:["'",'"'],Comma:[",","<"],Period:[".",">"],Slash:["/","?"]},keyCodes:{ESC:27,backspace:8,deleteKey:46,enter:13,ctrlEnter:10,space:32,shiftKey:16,ctrlKey:17,f1:112,f12:123,comma:188,tab:9,downArrow:40,upArrow:38},modifierKeys:{16:"Shift",17:"Ctrl",18:"Alt",91:"Meta",92:"Meta",93:"ContextMenu",229:"Process"},keyNames:{8:"Backspace",9:"Tab",12:"NumLock",27:"Esc",32:"Space",46:"Delete"},keyIdentifierCorrectionMap:{"U+00C0":["U+0060","U+007E"],"U+0030":["U+0030","U+0029"],"U+0031":["U+0031","U+0021"],"U+0032":["U+0032","U+0040"],"U+0033":["U+0033","U+0023"],"U+0034":["U+0034","U+0024"],"U+0035":["U+0035","U+0025"],"U+0036":["U+0036","U+005E"],"U+0037":["U+0037","U+0026"],"U+0038":["U+0038","U+002A"],"U+0039":["U+0039","U+0028"],"U+00BD":["U+002D","U+005F"],"U+00BB":["U+003D","U+002B"],"U+00DB":["U+005B","U+007B"],"U+00DD":["U+005D","U+007D"],"U+00DC":["U+005C","U+007C"],"U+00BA":["U+003B","U+003A"],"U+00DE":["U+0027","U+0022"],"U+00BC":["U+002C","U+003C"],"U+00BE":["U+002E","U+003E"],"U+00BF":["U+002F","U+003F"]}};var r="Windows";function i(e,t){var n,r=0;return-1!==e.indexOf("Ctrl-")&&(r|=1),-1!==e.indexOf("Alt-")&&(r|=2),-1!==e.indexOf("Meta-")&&(r|=4),-1!==e.indexOf("Shift-")&&(r|=8),n=8192+((n=t.length>1?256+o.specialKeys.indexOf(t):t.charCodeAt(0))<<4)+r,String.fromCharCode(n)}"undefined"!=typeof navigator&&(-1!==navigator.platform.indexOf("Mac")?r="Mac":-1!==navigator.userAgent.indexOf("Linux")&&(r="Linux")),o.getKeyChar=function(e){var t;if(e.keyCode in this.modifierKeys)t="";else{if(this.keyNames.hasOwnProperty(e.keyCode))t="{0}".format(this.keyNames[e.keyCode]);else if(t=e.key||"",-1!==["Shift","Meta","Alt","Ctrl"].indexOf(t)&&(t=""),t)t.charCodeAt(0)>127||"Dead"===t?e.keyCode<127?(t=String.fromCharCode(e.keyCode),t=e.shiftKey?t:t.toLowerCase()):this.keyCodesMac.hasOwnProperty(e.code)&&(t=this.keyCodesMac[e.code][e.shiftKey?1:0]):"Unidentified"===t&&(t="");else if(e.keyIdentifier)if("U+"!==e.keyIdentifier.slice(0,2))t="{0}".format(e.keyIdentifier);else{var n=e.keyIdentifier;if(("Windows"===r||"Linux"===r)&&this.keyIdentifierCorrectionMap[n]){var i=this.keyIdentifierCorrectionMap[n];n=e.shiftKey?i[1]:i[0]}var a="0x"+n.substring(2);t=String.fromCharCode(parseInt(a)),t=e.shiftKey?t:t.toLowerCase()}e.shiftKey&&t.length>1&&(t="Shift-"+t),t.length>0&&(e.metaKey&&(t="Meta-"+t),e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t)),t.length>1&&(t="<{0}>".format(t))}return o.decodeKeystroke(o.encodeKeystroke(t))===t&&(t=o.encodeKeystroke(t)),t},o.isWordChar=function(e){return e.keyCode<123&&e.keyCode>=97||e.keyCode<91&&e.keyCode>=65||e.keyCode<58&&e.keyCode>=48},o.encodeKeystroke=function(e){for(var t,n=/<(?:Ctrl-)?(?:Alt-)?(?:Meta-)?(?:Shift-)?([^>]+|.)>/g,o="",r=0;null!==(t=n.exec(e));)o+=e.substr(r,t.index-r),o+=i(t[0],t[1]),r=n.lastIndex;return o+=e.substr(r)},o.specialKeys=["Esc","Space","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Backspace","Enter","Tab","Delete","End","Home","Insert","NumLock","PageDown","PageUp","Pause","ScrollLock","CapsLock","PrintScreen","Escape","Hyper"],o.decodeKeystroke=function(e){for(var t="",n=0;n<e.length;n++){var r=e[n].charCodeAt(0);if(r>8192){var i=(r-=8192)%4096>>4,a=15&r;r=r>>12?o.specialKeys[i%256]:String.fromCharCode(i),8&a&&(r="Shift-"+r),4&a&&(r="Meta-"+r),2&a&&(r="Alt-"+r),1&a&&(r="Ctrl-"+r),t+="<"+r+">"}else t+=e[n]}return t};const a=o},580:(e,t,n)=>{"use strict";function o(e,t){document.dispatchEvent(new CustomEvent(`surfingkeys:${e}`,{detail:t}))}function r(e,t,n){(t=t||{}).action=e,-1!==["closeTab","nextTab","previousTab","moveTab","reloadTab","setZoom","closeTabLeft","closeTabRight","focusTabByIndex"].indexOf(e)&&(t.repeats=r.repeats,r.repeats=1);try{t.needResponse=void 0!==n,chrome.runtime.sendMessage(t,n),"read"===e&&c.on("onTtsEvent",n)}catch(e){o("showPopup",["[runtime exception] "+e])}}n.d(t,{_P:()=>r,VX:()=>o,GZ:()=>c});var i,a,s,c=(i={conf:{autoSpeakOnInlineQuery:!1,lastKeys:"",blocklistPattern:void 0,smartCase:!0,caseSensitive:!1,clickablePat:/(https?:\/\/|thunder:\/\/|magnet:)\S+/gi,clickableSelector:"",editableSelector:"div.CodeMirror-scroll,div.ace_content",cursorAtEndOfInput:!0,defaultSearchEngine:"g",defaultVoice:"Daniel",editableBodyCare:!0,enableAutoFocus:!0,enableEmojiInsertion:!1,experiment:!1,focusFirstCandidate:!1,focusOnSaved:!0,hintAlign:"center",hintExplicit:!1,hintShiftNonActive:!1,historyMUOrder:!0,language:void 0,lastQuery:"",modeAfterYank:"",nextLinkRegex:/(\b(next)\b)|下页|下一页|后页|下頁|下一頁|後頁|>>|»/i,digitForRepeat:!0,omnibarMaxResults:10,omnibarHistoryCacheSize:100,omnibarPosition:"middle",omnibarSuggestion:!0,omnibarSuggestionTimeout:200,omnibarTabsQuery:{},pageUrlRegex:[],prevLinkRegex:/(\b(prev|previous)\b)|上页|上一页|前页|上頁|上一頁|前頁|<<|«/i,richHintsForKeystroke:1e3,scrollStepSize:70,showModeStatus:!1,showProxyInStatusBar:!1,smartPageBoundary:!1,smoothScroll:!0,startToShowEmoji:2,stealFocusOnLoad:!0,tabsThreshold:9,textAnchorPat:/(^[\n\r\s]*\S{3,}|\b\S{4,})/g,ignoredFrameHosts:["https://tpc.googlesyndication.com"],scrollFriction:0,aceKeybindings:"vim",caretViewport:null,mouseSelectToQuery:[],useNeovim:!1,useLocalMarkdownAPI:!0}},a={},s=new Promise((function(e,t){window===top?e(window.location.href):r("getTopURL",null,(function(t){e(t.url)}))})),i.on=function(e,t){a[e]=t},i.updateHistory=function(e,t){var n=e+"History";r("getSettings",{key:n},(function(e){var o=e.settings[n]||[],i={};"Array"===t.constructor.name?(i[n]=t,r("updateSettings",{settings:i})):t.trim().length&&"."!==t&&((o=o.filter((function(e){return e.trim().length&&e!==t&&"."!==e}))).unshift(t),o.length>50&&o.pop(),i[n]=o,r("updateSettings",{settings:i}))}))},chrome.runtime.onMessage.addListener((function(e,t,n){a[e.subject]&&a[e.subject](e,t,n)})),i.getTopURL=function(e){s.then((function(t){e(t)}))},i.postTopMessage=function(e){s.then((function(t){window===top&&(t=window.location.origin),"null"!==t&&"file://"!==new URL(t).origin||(t="*"),top.postMessage({surfingkeys_data:e},t)}))},i.getCaseSensitive=function(e){return i.conf.caseSensitive||i.conf.smartCase&&/[A-Z]/.test(e)},i)},654:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{sY:()=>LOG,Sn:()=>actionWithSelectionPreserved,Ge:()=>constructSearchURL,hm:()=>createElementWithContent,vA:()=>dispatchMouseEvent,CU:()=>filterAncestors,Ns:()=>filterInvisibleElements,DN:()=>filterOverlapElements,uE:()=>flashPressedLink,Dv:()=>generateQuickGuid,fy:()=>getAnnotations,g_:()=>getBrowserName,kE:()=>getClickableElements,MB:()=>getDocumentOrigin,iw:()=>getRealEdit,sS:()=>getRealRect,t_:()=>getTextNodePos,kd:()=>getTextNodes,YX:()=>getTextRect,n_:()=>getVisibleElements,lI:()=>getWordUnderCursor,Ak:()=>htmlEncode,c3:()=>httpRequest,n8:()=>initL10n,Ru:()=>insertJS,jK:()=>isEditable,yT:()=>isElementClickable,w1:()=>isElementPartiallyInViewport,c:()=>isInUIFrame,wn:()=>listElements,t6:()=>mapInMode,Qe:()=>parseAnnotation,x0:()=>reportIssue,n5:()=>scrollIntoViewIfNeeded,gV:()=>setSanitizedContent,mU:()=>showBanner,U:()=>showPopup,qF:()=>tabOpenLink,ph:()=>toggleQuote});var dompurify__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(234),dompurify__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(dompurify__WEBPACK_IMPORTED_MODULE_0__),_keyboardUtils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(495),_runtime_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(580);function getBrowserName(){if(-1!==window.navigator.userAgent.indexOf("Chrome"))return"Chrome";if(0===window.navigator.vendor.indexOf("Apple Computer, Inc.")){return/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1?"Safari-iOS":"Safari"}return-1!==window.navigator.userAgent.indexOf("Firefox")?"Firefox":"Chrome"}function isInUIFrame(){return 0===document.location.href.indexOf(chrome.extension.getURL("/"))}function timeStampString(e){var t=new Date;return t.setTime(e),t.toLocaleString()}function getDocumentOrigin(){var e=window.location.origin?window.location.origin:"*";return"file://"!==e&&"null"!==e||(e="*"),e}function generateQuickGuid(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function listElements(e,t,n){const o=[];let r;const i=document.createNodeIterator(e,t,null);for(;r=i.nextNode();)n(r)&&o.push(r),r.shadowRoot&&o.push(...listElements(r.shadowRoot,t,n));return o}function isElementVisible(e){return e.offsetHeight>0&&e.offsetWidth>0}function isElementClickable(e){var t="a, button, select, input, textarea, summary, *[onclick], *[contenteditable=true], *.jfk-button, *.goog-flat-menu-button, *[role=button], *[role=link], *[role=menuitem], *[role=option], *[role=switch], *[role=tab], *[role=checkbox], *[role=combobox], *[role=menuitemcheckbox], *[role=menuitemradio]";return _runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.clickableSelector.length&&(t+=", "+_runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.clickableSelector),e.matches(t)||"pointer"===getComputedStyle(e).cursor||"url("===getComputedStyle(e).cursor.substr(0,4)||null!==e.closest("a, *[onclick], *[contenteditable=true], *.jfk-button, *.goog-flat-menu-button")}function showBanner(e,t){(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__.VX)("showBanner",[e,t])}function showPopup(e){(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__.VX)("showPopup",[e])}function dispatchMouseEvent(e,t,n){t.forEach((function(t){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,button:n?1:0});e.dispatchEvent(o)}))}function getRealEdit(e){for(var t=e?e.target:document.activeElement;t&&t.shadowRoot;){if(!t.shadowRoot.activeElement){if(t.shadowRoot.querySelector("input, textarea, select")){t=t.shadowRoot.querySelector("input, textarea, select");break}break}t=t.shadowRoot.activeElement}return t===window&&(t=document.body),t}function toggleQuote(){var e=getRealEdit(),t=e.value;t.match(/^"|"$/)?e.value=t.replace(/^"?(.*?)"?$/,"$1"):e.value='"'+t+'"'}function LOG(e,t){chrome.storage.local.get(["logLevels"],(n=>{const o=n&&n.logLevels||["error"];-1!==["log","warn","error"].indexOf(e)&&-1!==o.indexOf(e)&&console[e](t)}))}function isEditable(e){return e&&!e.disabled&&("textarea"===e.localName||"select"===e.localName||e.isContentEditable||e.matches(_runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.editableSelector)||"input"===e.localName&&/^(?!button|checkbox|file|hidden|image|radio|reset|submit)/i.test(e.type))}function parseQueryString(e){var t={};if(e.length)for(var n=e.split("&"),o=0,r=n.length;o<r;++o){var i=n[o].split("="),a=i[0].toLowerCase(),s=i.length>1?i[1]:null;t[decodeURIComponent(a)]=decodeURIComponent(s)}return t}function reportIssue(e,t){e=encodeURIComponent(e),t="%23%23+Error+details%0A%0A{0}%0A%0ASurfingKeys%3A+{1}%0A%0AChrome%3A+{2}%0A%0AURL%3A+{3}%0A%0A%23%23+Context%0A%0A%2A%2APlease+replace+this+with+a+description+of+how+you+were+using+SurfingKeys.%2A%2A".format(encodeURIComponent(t),chrome.runtime.getManifest().version,encodeURIComponent(navigator.userAgent),encodeURIComponent(window.location.href)),showPopup('<h2>Uh-oh! The SurfingKeys extension encountered a bug.</h2> <p>Please click <a href="https://github.com/brookhong/Surfingkeys/issues/new?title={0}&body={1}" target=_blank>here</a> to start filing a new issue, append a description of how you were using SurfingKeys before this message appeared, then submit it.  Thanks for your help!</p>'.format(e,t))}function scrollIntoViewIfNeeded(e,t){e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():isElementPartiallyInViewport(e,t)||e.scrollIntoView()}function isElementDrawn(e,t){var n=isEditable(e)?1:4;return(t=t||e.getBoundingClientRect()).width>n&&t.height>n}function isElementPartiallyInViewport(e,t){var n=e.getBoundingClientRect(),o=window.innerHeight||document.documentElement.clientHeight,r=window.innerWidth||document.documentElement.clientWidth;return(t||isElementDrawn(e,n))&&n.top<o&&n.bottom>0&&n.left<r&&n.right>0}function getVisibleElements(e){for(var t=Array.from(document.documentElement.getElementsByTagName("*")),n=[],o=0;o<t.length;o++){var r=t[o];if(r.shadowRoot)for(var i=r.shadowRoot.querySelectorAll("*"),a=0;a<i.length;a++)t.push(i[a]);var s=r.getBoundingClientRect();s.top<=window.innerHeight&&s.bottom>=0&&s.left<=window.innerWidth&&s.right>=0&&s.height>0&&"hidden"!==getComputedStyle(r).visibility&&e(r,n)}return n}function actionWithSelectionPreserved(e){var t=document.getSelection(),n=[t.type,t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset],o=document.scrollingElement.scrollTop;e(t),document.scrollingElement.scrollTop=o,"None"===n[0]?t.empty():"Caret"===n[0]?t.setPosition(n[3],n[4]):"Range"===n[0]&&(t.setPosition(n[1],n[2]),t.extend(n[3],n[4]))}function last(e){return e[e.length-1]}function filterAncestors(e){if(0===e.length)return e;var t=[];return e.forEach((function(e,n){if(isExplicitlyRequested(e))t.push(e);else{for(var o=0;o<t.length;o++){if(t[o].contains(e))return void("A"===t[o].tagName&&t[o].href||(t[o]=e));if(t[o].shadowRoot&&t[o].shadowRoot.contains(e))return;if(e.contains(t[o]))return void console.log("skip: ",e,t[o])}t.push(e)}})),t}function getRealRect(e){var t;return 0===e.childElementCount?3===(t=e.getClientRects()).length?t[1]:2===t.length?t[0]:e.getBoundingClientRect():1===e.childElementCount&&e.firstElementChild.textContent?(((t=e.firstElementChild.getBoundingClientRect()).width<4||t.height<4)&&(t=e.getBoundingClientRect()),t):e.getBoundingClientRect()}function isExplicitlyRequested(e){return _runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.clickableSelector&&e.matches(_runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.clickableSelector)}function filterOverlapElements(e){return filterAncestors(e=e.filter((function(e){var t=getRealRect(e);if(e.disabled||e.readOnly||!isElementDrawn(e,t))return!1;if(e.matches("input, textarea, select, form")||"true"===e.contentEditable||isExplicitlyRequested(e))return!0;var n=e.getRootNode().elementFromPoint(t.left+t.width/2,t.top+t.height/2);return!n||n.shadowRoot&&(0===n.childElementCount||n.shadowRoot.contains(e))||n.contains(e)||e.contains(n)})))}function getClickableElements(e,t){return filterOverlapElements(listElements(document.body,NodeFilter.SHOW_ELEMENT,(function(n){return n.offsetHeight&&n.offsetWidth&&"pointer"===getComputedStyle(n).cursor&&(n.matches(e)||t&&(t.test(n.textContent)||t.test(n.getAttribute("aria-label"))))})))}function getTextNodes(e,t,n){var o=["script","style","noscript","surfingkeys_mark"],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){if(!e.data.trim()||!e.parentNode.offsetParent||-1!==o.indexOf(e.parentNode.localName.toLowerCase())||!t.test(e.data))return t.lastIndex=0,NodeFilter.FILTER_REJECT;var n=e.parentNode.getBoundingClientRect();return n.width<4||n.height<4?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1),i=[];if(1===n)i.push(r.firstChild());else if(-1===n)i.push(r.lastChild());else{if(0===n)return r;if(2===n)for(;r.nextNode();)i.push(r.currentNode.parentNode);else for(;r.nextNode();)i.push(r.currentNode)}return i}function getTextNodePos(e,t,n){var o=document.getSelection();o.setBaseAndExtent(e,t,e,n?t+n:e.data.length);var r=o.getRangeAt(0).getClientRects()[0],i={left:-1,top:-1};return r&&r.height>0&&r.width>0&&(i.left=r.left,i.top=r.top,i.width=r.width,i.height=r.height),i}var _focusedRange=document.createRange();function getTextRect(){let e=[];try{let t=arguments[1];for(;0===e.length&&t>=0;)_focusedRange.setStart(arguments[0],t),arguments.length>3?_focusedRange.setEnd(arguments[2],arguments[3]):arguments.length>2?_focusedRange.setEnd(arguments[0],arguments[2]):_focusedRange.setEnd(arguments[0],arguments[1]),e=_focusedRange.getClientRects(),t--}catch(e){return[]}return e}function getNearestWord(e,t){var n=[0,e.length],o=/\W/;t<0?t=0:t>=e.length&&(t=e.length-1);var r=!0;if(o.test(e[t])){var i=0;for(r=!1;!r&&(t>i||t+i<e.length);)r=t-++i>=0&&!o.test(e[t-i])||t+i<e.length&&!o.test(e[t+i]);t=t-i>=0&&!o.test(e[t-i])?t-i:t+i}if(r){for(var a=t,s=t;a>=0&&!o.test(e[a]);)a--;for(;s<e.length&&!o.test(e[s]);)s++;n=[a+1,s-a-1]}return n}var _clickPos=null;function getWordUnderCursor(e){var t=document.getSelection();if(t.focusNode&&t.focusNode.textContent){var n=getNearestWord(t.focusNode.textContent,t.focusOffset),o=getTextRect(t.focusNode,n[0],n[0]+n[1])[0],r=t.focusNode.textContent.substr(n[0],n[1]);if(o&&r&&(!e||_clickPos&&o.has(_clickPos[0],_clickPos[1],0,0)))return r.trim()}return null}function initL10n(e){var t=_runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.language||window.navigator.language;"en-US"===t?e((function(e){return e})):fetch(chrome.extension.getURL("pages/l10n.json")).then((function(e){return e.json()})).then((function(n){"object"==typeof n[t]?(n=n[t],e((function(e){return n[e]?n[e]:e}))):e((function(e){return e}))}))}function parseAnnotation(e){var t=e.annotation.match(/#(\d+)(.*)/);return null!==t&&(e.feature_group=parseInt(t[1]),e.annotation=t[2]),e}function mapInMode(e,t,n){n=_keyboardUtils__WEBPACK_IMPORTED_MODULE_1__.Z.encodeKeystroke(n);var o=e.mappings.find(n);if(o){t=_keyboardUtils__WEBPACK_IMPORTED_MODULE_1__.Z.encodeKeystroke(t),e.mappings.remove(t);var r=Object.assign({},o.meta);e.mappings.add(t,r),isInUIFrame()||(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__.VX)("addMapkey",[e.name,t,n])}return o}function getAnnotations(e){return e.getWords().map((function(t){var n=e.find(t).meta;return{word:t,feature_group:n.feature_group,annotation:n.annotation}})).filter((function(e){return e.annotation&&e.annotation.length>0}))}function constructSearchURL(e,t){return e.indexOf("{0}")>0?e.format(t):e+t}function tabOpenLink(e,t){var n;t=t||5,(n=(n="Array"===e.constructor.name?e:e instanceof NodeList?Array.from(e).map((function(e){return e.href})):e.trim().split("\n")).map((function(e){return e.trim()})).filter((function(e){return e.length>0}))).slice(0,t).forEach((function(e){(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__._P)("openLink",{tab:{tabbed:!0},url:e})})),n.length>t&&(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__._P)("queueURLs",{urls:n.slice(t)})}function getElements(e){return listElements(document.body,NodeFilter.SHOW_ELEMENT,(function(t){return t.offsetHeight&&t.offsetWidth&&t.matches(e)}))}function filterInvisibleElements(e){return e.filter((function(e){return e.offsetHeight&&e.offsetWidth&&!e.getAttribute("disabled")&&isElementPartiallyInViewport(e)&&"hidden"!==getComputedStyle(e).visibility}))}function setSanitizedContent(e,t){e.innerHTML=dompurify__WEBPACK_IMPORTED_MODULE_0__.sanitize(t)}function createElementWithContent(e,t,n){var o=document.createElement(e);if(t&&setSanitizedContent(o,t),n)for(var r in n)o.setAttribute(r,n[r]);return o}document.addEventListener("mousedown",(e=>{_clickPos=[e.clientX,e.clientY]})),DOMRect.prototype.has=function(e,t,n,o){return t>this.top-o&&t<this.bottom+o&&e>this.left-n&&e<this.right+n},String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var n=new RegExp("\\{"+t+"\\}","gi");e=e.replace(n,arguments[t])}return e},String.prototype.reverse=function(){return this.split("").reverse().join("")},RegExp.prototype.toJSON=function(){return{source:this.source,flags:this.flags}},Array.prototype.flatMap||(Array.prototype.flatMap=function(e){return Array.prototype.concat.apply([],this.map(e))});var _divForHtmlEncoder=document.createElement("div");function htmlEncode(e){return _divForHtmlEncoder.innerText=e,_divForHtmlEncoder.innerHTML}function httpRequest(e,t){e.method="get",(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__._P)("request",e,t)}function insertJS(e,t){var n=document.createElement("script");n.type="text/javascript","function"==typeof e?(setSanitizedContent(n,"("+e.toString()+")(window);"),setTimeout((function(){t&&t(),n.remove()}),1)):(n.src=e,n.onload=function(){t&&t(),n.remove()}),document.lastElementChild.appendChild(n)}HTMLElement.prototype.one=function(e,t){this.addEventListener(e,(function n(){t.call(this),this.removeEventListener(e,n)}))},HTMLElement.prototype.show=function(){this.style.display=""},HTMLElement.prototype.hide=function(){this.style.display="none"},HTMLElement.prototype.removeAttributes=function(){for(;this.attributes.length>0;)this.removeAttribute(this.attributes[0].name)},HTMLElement.prototype.containsWithShadow=function(e){const t=[this];for(;t.length;){const n=t.shift();if(n.contains(e))return!0;if(t.push(...n.children),n.shadowRoot){if(n.shadowRoot.contains(e))return!0;t.push(...n.shadowRoot.children)}}return!1},NodeList.prototype.remove=function(){this.forEach((function(e){e.remove()}))},NodeList.prototype.show=function(){this.forEach((function(e){e.show()}))},NodeList.prototype.hide=function(){this.forEach((function(e){e.hide()}))};const flashElem=createElementWithContent("div","",{style:"position: fixed; box-shadow: 0px 0px 4px 2px #63b2ff; background: transparent; z-index: 2140000000"});function flashPressedLink(e,t){var n=getRealRect(e);flashElem.style.left=n.left+"px",flashElem.style.top=n.top+"px",flashElem.style.width=n.width+"px",flashElem.style.height=n.height+"px",document.body.appendChild(flashElem),setTimeout((()=>{flashElem.remove(),t()}),100)}function regexFromString(str,highlight){var rxp=null;if(/^\/.+\/([gimuy]*)$/.test(str))try{rxp=eval(str)}catch(e){rxp=null}if(!rxp&&(/^\/.+$/.test(str)&&(rxp=eval(str+"/i")),!rxp))if(str=str.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),highlight)rxp=new RegExp(str.replace(/\s+/,"|"),"gi");else{var words=str.split(/\s+/).map((function(e){return`(?=.*${e})`})).join("");rxp=new RegExp(`^${words}.*$`,"gi")}return rxp}function filterByTitleOrUrl(e,t){if(t&&t.length){var n=regexFromString(t,!1);e=e.filter((function(e){return n.test(e.title)||n.test(e.url)}))}return e}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(654),t=__webpack_require__(580),n=__webpack_require__(495);const o=function(t,n){this.name=t,this.statusLine=n,this.eventListeners={},this.addEventListener=function(e,t){return this.eventListeners[e]=t,u.hasOwnProperty(e)||(u[e]=function(t){s(e,t)},window.addEventListener(e,u[e],!0)),this},this.enter=function(t,n){var i=r.indexOf(this);if(this.priority||(this.priority=t||r.length),-1===i)r.unshift(this);else if(i>0)if(n)r=r.slice(i);else{var a=r.map((function(e){return e.name})).join(",");(0,e.x0)("Mode {0} pushed into mode stack again.".format(this.name),"Modes in stack: {0}".format(a))}return r.sort((function(e,t){return e.priority<t.priority?1:t.priority<e.priority?-1:0})),this.onEnter&&this.onEnter(),o.showStatus(),i},this.exit=function(e){var t=r.indexOf(this);if(-1!==t)if(this.priority=0,e)r.splice(t,1);else{t++;r.slice(0,t);r=r.slice(t)}o.showStatus(),this.onExit&&this.onExit(t)}};var r=[];o.specialKeys={"<Alt-s>":["<Alt-s>"],"<Esc>":["<Esc>"]},o.isSpecialKeyOf=function(e,t){return-1!==o.specialKeys[e].indexOf(n.Z.decodeKeystroke(t))};var i=[];function a(e,t){t.sk_stopPropagation&&(t.stopImmediatePropagation(),t.preventDefault())}function s(e,t,n){for(var o=0;o<r.length&&!t.sk_stopPropagation;o++){var i=r[o];if(!t.sk_suppressed&&i.eventListeners.hasOwnProperty(e))(0,i.eventListeners[e])(t),a(0,t);if("Disabled"===i.name)break;n&&n(i)}}o.suppressKeyUp=function(e){-1===i.indexOf(e)&&i.push(e)};let c=0;var l=0,u={sentinel:e=>{c++},keydown:function(e){e.sk_keyName=n.Z.getKeyChar(e),s("keydown",e)},keyup:function(e){s("keyup",e,(function(t){var n=i.indexOf(e.keyCode);-1!==n&&(e.stopImmediatePropagation(),i.splice(n,1))}))},scroll:function(e){l>0&&(e.stopImmediatePropagation(),e.preventDefault(),l--)}};function d(e){for(var t in r=[],u)window.addEventListener(t,u[t],!0);e&&e()}o.hasScroll=function(e,t,n){var o="y"===t?["scrollTop","height"]:["scrollLeft","width"],r=e[o[0]];if(r<n){var i=e[o[0]];e[o[0]]=e.getBoundingClientRect()[o[1]],(r=e[o[0]])!==i&&l++,e[o[0]]=i}return r>=n},o.getScrollableElements=function(){var t=(0,e.wn)(document.body,NodeFilter.SHOW_ELEMENT,(function(e){return o.hasScroll(e,"y",16)&&e.scrollHeight>200||o.hasScroll(e,"x",16)&&e.scrollWidth>200}));return t.sort((function(e,t){return t.contains(e)?1:e.contains(t)?-1:t.scrollHeight*t.scrollWidth-e.scrollHeight*e.scrollWidth})),document.scrollingElement&&(document.scrollingElement.scrollHeight>window.innerHeight||document.scrollingElement.scrollWidth>window.innerWidth)&&t.unshift(document.scrollingElement),t},o.init=e=>{"about:blank"!==window.location.href||!window.frameElement||document.body&&0!==document.body.childElementCount?d(e):window.frameElement.addEventListener("load",(function(t){try{d(e)}catch(e){console.log("Error on blank iframe loaded: "+e)}}))},o.showStatus=function(){if(document.hasFocus()&&r.length){var n=r[0],o=n.statusLine;if(void 0===o&&(o=t.GZ.conf.showModeStatus?n.name:""),""!==o&&window!==top&&!(0,e.c)()){var i=window.location.pathname.split("/");i.length&&(o+=" - frame: "+i[i.length-1])}(0,t.VX)("showStatus",[0,o])}},o.finish=function(e){var n=!1;return(e.map_node!==e.mappings||null!=e.pendingMap||e.repeats)&&(e.map_node=e.mappings,e.pendingMap=null,e.isTrustedEvent&&(0,t.VX)("hideKeystroke"),e.repeats&&(e.repeats=""),n=!0),n},o.handleMapKey=function(e,r){var i=e.sk_keyName;this.isTrustedEvent=this.__trust_all_events__||e.isTrusted;var a=o.isSpecialKeyOf("<Esc>",i);a&&(i=n.Z.encodeKeystroke("<Esc>"));var s=!1;if(a&&o.finish(this))e.sk_stopPropagation=!0,e.sk_suppressed=!0,s=!0;else if(this.pendingMap){this.setLastKeys&&this.setLastKeys(this.map_node.meta.word+i);var c=this.pendingMap.bind(this);e.sk_stopPropagation=!this.map_node.meta.stopPropagation||this.map_node.meta.stopPropagation(i),c(i),s=o.finish(this)}else if(void 0!==this.repeats&&this.map_node===this.mappings&&t.GZ.conf.digitForRepeat&&(i>="1"||""!==this.repeats&&i>="0")&&i<="9"&&this.map_node.getWords().length>0)this.repeats+=i,this.isTrustedEvent&&(0,t.VX)("showKeystroke",[i,this]),e.sk_stopPropagation=!0;else{var l=this.map_node;if(this.map_node=this.map_node.find(i),this.map_node)if(this.map_node.meta){var u=this.map_node.meta.code;if(u.length)this.pendingMap=u,this.isTrustedEvent&&(0,t.VX)("showKeystroke",[i,this]),e.sk_stopPropagation=!0;else{for(this.setLastKeys&&this.setLastKeys(this.map_node.meta.word),t._P.repeats=parseInt(this.repeats)||1,e.sk_stopPropagation=!this.map_node.meta.stopPropagation||this.map_node.meta.stopPropagation(i);t._P.repeats>0;)u(),t._P.repeats--;s=o.finish(this)}}else this.isTrustedEvent&&(0,t.VX)("showKeystroke",[i,this]),e.sk_stopPropagation=!0;else r&&r(l),e.sk_suppressed=l!==this.mappings,s=o.finish(this)}return s},o.checkEventListener=e=>{const t=c;window.dispatchEvent(new CustomEvent("sentinel")),t===c&&(d(),e())};const f=o;function p(){arguments.length>0&&(this.stem=arguments[0]),arguments.length>1&&(this.meta=arguments[1])}p.prototype={find:function(e){for(var t=this,n=e.length,o=0;o<n&&t;o++)t=t[e[o]];return t},add:function(e,t){for(var n=this,o=e.length,r=0;r<o;r++){var i=e[r];if(n.hasOwnProperty(i))n=n[i];else{var a=new p(i);n[i]=a,n=a}}t.word=e,n.meta=t},remove:function(e){for(var t=this,n=e.length,o=[],r=0;r<n&&t;r++)o.push(t),t=t[e[r]];if(t){var i=o[r=o.length-1];delete i[t.stem];for(var a=i;a!==this&&1===Object.keys(a).length;)delete(i=o[--r])[a.stem],a=i}return t},getWords:function(e,t){var n=[];e=(e||"")+(t?"":this.stem||"");for(var o in this.hasOwnProperty("meta")&&n.push(e),this)1===o.length&&(n=n.concat(this[o].getWords(e)));return n},getMetas:function(e){var t=[];for(var n in this.hasOwnProperty("meta")&&e(this.meta)&&t.push(this.meta),this)1===n.length&&(t=t.concat(this[n].getMetas(e)));return t},getPrefixWord:function(){if(0===Object.keys(this).length)return"";for(var e="",t=this.stem,n=this;""===e;)for(var o=Object.keys(n),r=0;r<o.length;r++){if("meta"===o[r]){e=n.meta.word;break}if("stem"!==o[r]){t+=o[r],n=n[o[r]];break}}return e.substr(0,e.length-t.length+1)}};const m=p;const h=function(o){var r=new f("Normal");r.mappings=new m,r.map_node=r.mappings;var i=!1;r.passFocus=function(e){i=e};var a=!1;r.addEventListener("keydown",(function(n){var i=(0,e.iw)(n);if((0,e.jK)(i)&&n.isTrusted)if(f.isSpecialKeyOf("<Esc>",n.sk_keyName))i.blur(),o.exit();else if(t.GZ.conf.editableBodyCare&&i===document.body&&"i"!==n.key)r.statusLine="Press i to enter Insert mode",t.GZ.conf.showModeStatus=!0,n.sk_keyName.length&&f.handleMapKey.call(r,n);else{n.sk_stopPropagation=t.GZ.conf.editableBodyCare&&i===document.body&&"i"===n.key,n.sk_stopPropagation&&(r.passFocus(!0),i.focus());var s=!1;if(!(0,e.w1)(i)){for(var c=i;c!==document.documentElement&&!c.newlyCreated;)c=c.parentElement;s=c!==document.documentElement&&c.newlyCreated}s?(i.blur(),delete c.newlyCreated,f.handleMapKey.call(r,n)):o.enter(i,!0)}else if(f.isSpecialKeyOf("<Alt-s>",n.sk_keyName))r.toggleBlocklist(),f.finish(r),n.sk_stopPropagation=!0;else if(n.sk_keyName.length){var l=f.handleMapKey.call(r,n);a&&l&&(a=!1,r.exit())}n.sk_stopPropagation&&f.suppressKeyUp(n.keyCode)})),r.addEventListener("blur",(function(e){u=0})),r.addEventListener("focus",(function(n){if(f.showStatus(),t.GZ.conf.stealFocusOnLoad&&!(0,e.c)()){var o=(0,e.iw)(n);(0,e.jK)(o)&&(i||o.enableAutoFocus?t.GZ.conf.enableAutoFocus||(i=!1):(o.blur(),n.sk_stopPropagation=!0))}})),r.addEventListener("keyup",(function(e){setTimeout((function(){u=0}),0)})),r.addEventListener("mousedown",(function(n){t.GZ.conf.enableAutoFocus?r.passFocus(!0):r.passFocus(n.isTrusted);var i=(0,e.iw)(n);(0,e.jK)(i)?o.enter(i,!0):o.exit()})),r.toggleBlocklist=function(){0!==document.location.href.indexOf(chrome.extension.getURL("/"))?(0,t._P)("toggleBlocklist",{blocklistPattern:t.GZ.conf.blocklistPattern?t.GZ.conf.blocklistPattern.toJSON():""},(function(t){t.disabled?t.blocklist.hasOwnProperty(".*")?(0,e.mU)("Surfingkeys is globally disabled, please enable it globally from popup menu.",3e3):(0,e.mU)("Surfingkeys turned OFF for "+t.url,3e3):(0,e.mU)("Surfingkeys turned ON for "+t.url,3e3)})):(0,e.mU)("You could not toggle Surfingkeys on its own pages.",3e3)};const s=function(){var e,t,n=new f("PassThrough");return n.addEventListener("keydown",(function(o){o.sk_suppressed=!0,f.isSpecialKeyOf("<Esc>",o.sk_keyName)?(n.exit(),o.sk_stopPropagation=!0):t>0&&(e&&(clearTimeout(e),e=void 0),e=setTimeout((function(){n.exit()}),t))})).addEventListener("mousedown",(function(e){e.sk_suppressed=!0})),n.addEventListener("focus",(function(e){e.sk_suppressed=!0})),n.onEnter=function(){t>0?(e=setTimeout((function(){n.exit()}),t),n.statusLine=`ephemeral(${t}ms) pass through`):n.statusLine="pass through"},n.setTimeout=function(e){t=e},n}();r.passThrough=function(e){return s.setTimeout(e),s.enter(),s},r.once=()=>{a=!0,r.enter()},r.mappings.add(n.Z.encodeKeystroke("<Alt-i>"),{annotation:"Enter PassThrough mode to temporarily suppress SurfingKeys",feature_group:0,code:function(){r.passThrough()}}),r.mappings.add("p",{annotation:"Enter ephemeral PassThrough mode to temporarily suppress SurfingKeys",feature_group:0,code:function(){r.passThrough(1e3)}}),r.repeats="";var c,l,u=0,d=0,p=[];function h(){c&&0!==c.length||((c=f.getScrollableElements()).forEach((function(e){e.removeEventListener("mousedown",g),e.addEventListener("mousedown",g),e.dataset.hint_scrollable=!0})),d=0)}function g(e){if(e.currentTarget.contains(e.target)){for(var t=c.lastIndexOf(e.target),n=c.length-1;n>=0&&-1===t;n--)c[n]!==document.body&&c[n].contains(e.target)&&(t=n);-1!==t&&(d=t)}}function y(){(0,t._P)("localData",{data:{lastKeys:l}})}r.highlightElement=function(e){var n;n=document.scrollingElement===e?{top:0,left:0,width:window.innerWidth,height:window.innerHeight}:e.getBoundingClientRect(),(0,t.VX)("highlightElement",{duration:200,rect:{top:n.top,left:n.left,width:n.width,height:n.height}})},r.scroll=function(n){h();var o=document.scrollingElement;if(c.length>0&&(o=c[d])!==document.scrollingElement&&o!==document.body){var i=o.getBoundingClientRect();0!==i.width&&0!==i.height&&(0,e.w1)(o)&&(f.hasScroll(o,"x",16)||f.hasScroll(o,"y",16))||(r.refreshScrollableElements(),o=c[d])}if(o){var a;o.skScrollBy||((a=o).skScrollBy=function(e,n){if(t.GZ.conf.smartPageBoundary&&(this===document.scrollingElement||1===c.length&&this===c[0])){if(0===this.scrollTop&&n<0)return(0,t.VX)("topBoundaryHit");if(this.scrollHeight-this.scrollTop<=this.clientHeight+1&&n>0)return(0,t.VX)("bottomBoundaryHit")}if(t._P.repeats>1&&(e=t._P.repeats*e,n=t._P.repeats*n,t._P.repeats=0),t.GZ.conf.smoothScroll){var o=Math.max(100,20*Math.log(Math.abs(e||n)));a.smoothScrollBy(e,n,o)}else(0,t.VX)("scrollStarted"),a.scrollBy({behavior:"instant",left:e,top:n}),(0,t.VX)("scrollDone")},a.safeScroll_=(e,t,n)=>{const o=a===document.scrollingElement?window.innerHeight:a.clientHeight,r=a===document.scrollingElement?window.innerWidth:a.clientWidth,i="scrollTop"===e?[0,a.scrollHeight-o]:[0,a.scrollWidth-r],s=n?i[1]:i[0];return t>=i[0]&&t<=i[1]?(a[e]=t,!1):(a[e]=s,!0)},a.smoothScrollBy=function(e,n,o){if(!u){var[r,i]=n?["scrollTop",n]:["scrollLeft",e],s=o,c=0,l=a[r],d=!1;function f(e){if(0===c)return c=e,(0,t.VX)("scrollStarted"),window.requestAnimationFrame(f);var n=a[r],o=(e-c)*i/s;let p=!1;Math.abs(n+o-l)>=Math.abs(i)?(d=!0,u>t.GZ.conf.scrollFriction?(p=a.safeScroll_(r,n+o,i>0),l=a[r]):u>0?u++:p=a.safeScroll_(r,l+i,i>0)):p=a.safeScroll_(r,n+o,i>0),c=e,u||!p&&!d?window.requestAnimationFrame(f):(a.style.scrollBehavior="",(0,t.VX)("scrollDone"))}u=1,a.style.scrollBehavior="auto",window.requestAnimationFrame(f)}},p.push(a));var s=o===document.scrollingElement?[window.innerWidth,window.innerHeight]:[o.offsetWidth,o.offsetHeight];switch(o.lastScrollTop=o.scrollTop,o.lastScrollLeft=o.scrollLeft,n){case"down":o.skScrollBy(0,t.GZ.conf.scrollStepSize);break;case"up":o.skScrollBy(0,-t.GZ.conf.scrollStepSize);break;case"pageDown":o.skScrollBy(0,Math.round(s[1]/2));break;case"fullPageDown":o.skScrollBy(0,s[1]);break;case"pageUp":o.skScrollBy(0,-Math.round(s[1]/2));break;case"fullPageUp":o.skScrollBy(0,-s[1]);break;case"top":o.skScrollBy(0,-o.scrollTop);break;case"bottom":o.skScrollBy(o.scrollLeft,o.scrollHeight-o.scrollTop);break;case"left":o.skScrollBy(-Math.round(t.GZ.conf.scrollStepSize/2),0);break;case"right":o.skScrollBy(Math.round(t.GZ.conf.scrollStepSize/2),0);break;case"leftmost":o.skScrollBy(-o.scrollLeft-10,0);break;case"rightmost":o.skScrollBy(o.scrollWidth-o.scrollLeft-s[0]+20,0);break;case"byRatio":var l=parseInt(t._P.repeats*o.scrollHeight/100)-s[1]/2-o.scrollTop;t._P.repeats=0,o.skScrollBy(0,l)}(0,t.VX)("turnOffDOMObserver")}},r.refreshScrollableElements=function(){return c=null,h(),c},r.addScrollableElement=function(e){c&&(e.contains(c[d])||-1!==c.indexOf(e))||(h(),c.push(e),d=c.length-1)},r.rotateFrame=function(){(0,t._P)("nextFrame",{frameId:window.frameId})},r.feedkeys=function(e){setTimeout((function(){for(var t=new Event("keydown"),n=0;n<e.length;n++)t.sk_keyName=e[n],f.handleMapKey.call(r,t)}),1)},r.setLastKeys=function(e){!this.map_node.meta.repeatIgnore&&e.length>1&&(l=[e],y())},r.appendKeysForRepeat=function(e,t){l&&l.length>0&&(l.push("{0}\t{1}".format(e,t)),y())},r.addVIMark=function(n,o){o=o||window.location.href;var r={};r[n]={url:o,scrollLeft:document.scrollingElement.scrollLeft,scrollTop:document.scrollingElement.scrollTop},(0,t._P)("addVIMark",{mark:r}),(0,e.mU)("Mark '{0}' added for: {1}.".format(n,o))},r.jumpVIMark=function(e){if("'"===e){let e=document.scrollingElement;if(h(),c.length>0&&(e=c[d],void 0!==e.lastScrollTop&&void 0!==e.lastScrollLeft)){const t=e.scrollTop,n=e.scrollLeft;e.scrollTop=e.lastScrollTop,e.scrollLeft=e.lastScrollLeft,e.lastScrollTop=t,e.lastScrollLeft=n}}else(0,t._P)("jumpVIMark",{mark:e})},r.moveTab=function(e){(0,t._P)("moveTab",{position:e})},r.captureElement=function(n){(0,t._P)("getCaptureSize",null,(function(o){var r=o.width/window.innerWidth;n.scrollTop=0,n.scrollLeft=0;var i=-1,a=-1,s=n.style.overflowY;n.style.overflowY="hidden";var c=n.style.overflowX;n.style.overflowX="hidden";var l=n.style.borderStyle;n.style.borderStyle="none",(0,t.VX)("toggleStatus",[!1]);var u,d,f,p,m,h,g=0,y=0,w=n.scrollHeight,v=n.scrollWidth;if(n===document.scrollingElement)m=window.innerWidth,h=window.innerHeight,u=0,d=0;else{var b=n.getBoundingClientRect(),k=[Math.max(b.left,0),Math.max(b.top,0),Math.min(b.right,window.innerWidth),Math.min(b.bottom,window.innerHeight)];m=k[2]-k[0],h=k[3]-k[1],u=k[0]*r,d=k[1]*r}f=m*r,p=h*r;var _=document.createElement("canvas");_.width=v*r,_.height=w*r;var E=_.getContext("2d"),x=(b=n.getBoundingClientRect(),document.createElement("img"));x.onload=function(){E.drawImage(x,u,d,f,p,g,y,f,p),i===n.scrollTop?a===n.scrollLeft?((0,t.VX)("toggleStatus",[!0]),(0,e.U)("<img src='{0}' />".format(_.toDataURL("image/png"))),n.style.overflowY=s,n.style.overflowX=c,n.style.borderStyle=l):(i=-1,n.scrollTop=0,y=0,a=n.scrollLeft,n.scrollLeft+2*m<v?(n.scrollLeft+=m,g+=m*r):(n.scrollLeft+=v%m,g=n.scrollLeft*r),setTimeout((function(){(0,t._P)("captureVisibleTab",null,(function(e){x.src=e.dataUrl}))}),100)):(i=n.scrollTop,n.scrollTop+2*h<w?(n.scrollTop+=h,y+=h*r):(n.scrollTop+=w%h,y=n.scrollTop*r),setTimeout((function(){(0,t._P)("captureVisibleTab",null,(function(e){x.src=e.dataUrl}))}),500))},setTimeout((function(){(0,t._P)("captureVisibleTab",null,(function(e){x.src=e.dataUrl}))}),500)}))},r.mappings.add("yG",{annotation:"Capture current full page",feature_group:7,code:function(){r.captureElement(document.scrollingElement)}}),r.mappings.add("yS",{annotation:"Capture scrolling element",feature_group:7,code:function(){var e=document.scrollingElement;h(),c.length>0&&(e=c[d]),r.captureElement(e)}}),r.mappings.add("cS",{annotation:"Reset scroll target",feature_group:2,code:function(){if(c=null,h(),c.length>0){var e=c[d];r.highlightElement(e)}}});const w=e=>{const t=r.scroll.bind(r,e);return t.isSKScrollInHints=!0,t};function v(n){-1===t.GZ.conf.mouseSelectToQuery.indexOf(window.origin)||(0,e.yT)(n.target)||n.target.matches(".cm-matchhighlight")||setTimeout((()=>{(0,t.VX)("querySelectedWord")}),1)}r.isScrollKeyInHints=e=>{const t=r.mappings[e];return t&&t.meta&&t.meta.code&&t.meta.code.isSKScrollInHints},r.mappings.add("e",{annotation:"Scroll half page up",feature_group:2,repeatIgnore:!0,code:r.scroll.bind(r,"pageUp")}),r.mappings.add("U",{annotation:"Scroll full page up",feature_group:2,repeatIgnore:!0,code:r.scroll.bind(r,"fullPageUp")}),r.mappings.add("d",{annotation:"Scroll half page down",feature_group:2,repeatIgnore:!0,code:r.scroll.bind(r,"pageDown")}),r.mappings.add("P",{annotation:"Scroll full page down",feature_group:2,repeatIgnore:!0,code:r.scroll.bind(r,"fullPageDown")}),r.mappings.add("gg",{annotation:"Scroll to the top of the page",feature_group:2,repeatIgnore:!0,code:r.scroll.bind(r,"top")}),r.mappings.add("G",{annotation:"Scroll to the bottom of the page",feature_group:2,repeatIgnore:!0,code:w("bottom")}),r.mappings.add("j",{annotation:"Scroll down",feature_group:2,repeatIgnore:!0,code:w("down")}),r.mappings.add("k",{annotation:"Scroll up",feature_group:2,repeatIgnore:!0,code:w("up")}),r.mappings.add("h",{annotation:"Scroll left",feature_group:2,repeatIgnore:!0,code:w("left")}),r.mappings.add("l",{annotation:"Scroll right",feature_group:2,repeatIgnore:!0,code:w("right")}),r.mappings.add("0",{annotation:"Scroll all the way to the left",feature_group:2,repeatIgnore:!0,code:w("leftmost")}),r.mappings.add("$",{annotation:"Scroll all the way to the right",feature_group:2,repeatIgnore:!0,code:w("rightmost")}),r.mappings.add("%",{annotation:"Scroll to percentage of current page",feature_group:2,repeatIgnore:!0,code:r.scroll.bind(r,"byRatio")}),r.mappings.add("cs",{annotation:"Change scroll target",feature_group:2,repeatIgnore:!0,code:function(){!function(t){if((c=f.getScrollableElements()).length>0){d=(d+1)%c.length;var n=c[d];(0,e.n5)(n),t||r.highlightElement(n)}}()}}),r.mappings.add("/",{annotation:"Find in current page",feature_group:9,repeatIgnore:!0,code:function(){(0,t.VX)("openFinder")}}),r.mappings.add("E",{annotation:"Go one tab left",feature_group:3,repeatIgnore:!0,code:function(){(0,t._P)("previousTab")}}),r.mappings.add("R",{annotation:"Go one tab right",feature_group:3,repeatIgnore:!0,code:function(){(0,t._P)("nextTab")}});var b=null;return r.disable=function(){b||(b=function(e){var t=new f("Disabled");return t.priority=99,t.addEventListener("keydown",(function(n){n.sk_suppressed=!0,f.isSpecialKeyOf("<Alt-s>",n.sk_keyName)&&(e.toggleBlocklist(),t.exit(),n.sk_stopPropagation=!0)})),t}(r),b.enter(0,!0)),(0,t.VX)("turnOffDOMObserver"),document.removeEventListener("mouseup",v)},r.enable=function(){b&&(b.exit(),b=null),document.addEventListener("mouseup",v)},r.enable(),r.onExit=function(){(0,t.VX)("turnOffDOMObserver"),p.forEach((function(e){delete e.skScrollBy,delete e.smoothScrollBy}))},r};const g=function(t){var n=new Promise((function(e,t){document.body?e(document.body):document.addEventListener("DOMContentLoaded",(function(){e(document.body)}))})),o=void 0,r=new MutationObserver((function(n){var r=[];for(var i of n)for(var a of i.addedNodes)a.nodeType!==Node.ELEMENT_NODE||a.fromSurfingKeys||(a.newlyCreated=!0,r.push(a));r.length&&(o&&(clearTimeout(o),o=void 0),o=setTimeout((function(){var n=(0,e.n_)((function(e,t){var n=e.getBoundingClientRect();n.width>300&&n.height>300&&n.width<=window.innerWidth&&n.height<=window.innerHeight&&n.top>=0&&n.left>=0&&f.hasScroll(e,"y",16)&&function(e){for(;e!==document.body;){if("relative"===getComputedStyle(e).position)return!0;e=e.parentElement}return!1}(e)&&t.push(e)}));n.length&&t.addScrollableElement(n[0])}),200))}));r.isConnected=!1,document.addEventListener("surfingkeys:turnOnDOMObserver",(function(e){r.isConnected||n.then((function(e){r.observe(e,{childList:!0,subtree:!0}),r.isConnected=!0}))})),document.addEventListener("surfingkeys:turnOffDOMObserver",(function(e){r.isConnected&&(r.disconnect(),r.isConnected=!1)}))};const y=function(){var o=new f("Insert");function r(){var t=(0,e.iw)();if(void 0!==t.setSelectionRange)try{t.setSelectionRange(t.value.length,t.value.length)}catch(e){if(!(e instanceof DOMException&&"InvalidStateError"===e.name))throw e}else if((0,e.jK)(t)&&t.childNodes.length>0){var n=t.childNodes[t.childNodes.length-1];n.nodeType===Node.TEXT_NODE?document.getSelection().setPosition(n,n.data.length):document.getSelection().setPosition(n,n.childNodes.length),Visual.showCursor(),Visual.hideCursor()}}o.mappings=new m,o.map_node=o.mappings,o.mappings.add(n.Z.encodeKeystroke("<Ctrl-e>"),{annotation:"Move the cursor to the end of the line",feature_group:15,code:r}),o.mappings.add(n.Z.encodeKeystroke("<Ctrl-f>"),{annotation:"Move the cursor to the beginning of the line",feature_group:15,code:function(){var t=(0,e.iw)();if(void 0!==t.setSelectionRange)t.setSelectionRange(0,0);else{var n=document.getSelection();n.setPosition(n.focusNode,0),Visual.showCursor(),Visual.hideCursor()}}}),o.mappings.add(n.Z.encodeKeystroke("<Ctrl-u>"),{annotation:"Delete all entered characters before the cursor",feature_group:15,code:function(){var t=(0,e.iw)();if(void 0!==t.setSelectionRange)t.value=t.value.substr(t.selectionStart),t.setSelectionRange(0,0);else{var n=document.getSelection();n.focusNode.data=n.focusNode.data.substr(n.focusOffset)}}}),o.mappings.add(n.Z.encodeKeystroke("<Alt-b>"),{annotation:"Move the cursor Backward 1 word",feature_group:15,code:function(){var t=(0,e.iw)();if(void 0!==t.setSelectionRange){var n=d(t.value,-1,t.selectionStart);t.setSelectionRange(n,n)}else document.getSelection().modify("move","backward","word")}}),o.mappings.add(n.Z.encodeKeystroke("<Alt-f>"),{annotation:"Move the cursor Forward 1 word",feature_group:15,code:function(){var t=(0,e.iw)();if(void 0!==t.setSelectionRange){var n=d(t.value,1,t.selectionStart);t.setSelectionRange(n,n)}else document.getSelection().modify("move","forward","word")}}),o.mappings.add(n.Z.encodeKeystroke("<Alt-w>"),{annotation:"Delete a word backwards",feature_group:15,code:function(){var t=(0,e.iw)();if(void 0!==t.setSelectionRange){var n=p(t.value,-1,t.selectionStart);t.value=n[0],t.setSelectionRange(n[1],n[1])}else{var o=document.getSelection(),r=o.focusOffset;document.getSelection().modify("move","backward","word");var i=o.focusNode.data,a=o.focusOffset;o.focusNode.data=i.substr(0,a)+i.substr(r),o.setPosition(o.focusNode,a)}}}),o.mappings.add(n.Z.encodeKeystroke("<Alt-d>"),{annotation:"Delete a word forwards",feature_group:15,code:function(){var t=(0,e.iw)();if(void 0!==t.setSelectionRange){var n=p(t.value,1,t.selectionStart);t.value=n[0],t.setSelectionRange(n[1],n[1])}else{var o=document.getSelection(),r=o.focusOffset;document.getSelection().modify("move","forward","word");var i=o.focusNode.data,a=o.focusOffset;o.focusNode.data=i.substr(0,r)+i.substr(a),o.setPosition(o.focusNode,r)}}}),o.mappings.add(n.Z.encodeKeystroke("<Esc>"),{annotation:"Exit insert mode",feature_group:15,stopPropagation:function(e){return e.charCodeAt(0)<256},code:function(){(0,e.iw)().blur(),o.exit()}});var i,a=(0,e.hm)("div","",{id:"sk_emoji",style:"display: block; opacity: 1;"}),s=-1;function c(){var n=(0,e.iw)(),o="",r=!0;if(void 0!==n.selectionStart&&void 0!==n.value)o=n.value.substr(s,n.selectionStart-s);else{r=!1;var c=document.getSelection();o=c.focusNode.data.substr(s,c.focusOffset-s)}if(o.length<t.GZ.conf.startToShowEmoji||" "===o[0])a.remove();else{var l=i.filter((function(e){return-1!==e.indexOf(o)})).slice(0,5).map((function(e){var t=e.split("\t"),n=String.fromCodePoint.apply(null,t[0].split(","));return"<div><span>{0}</span>{1}</div>".format(n,t[1])})).join("");if(""===l)a.remove();else{var u;(0,e.gV)(a,l),document.body.append(a),a.style.display="",a.querySelector("#sk_emoji>div").classList.add("selected"),r?u=function(t){var n=getComputedStyle(t),o=t.getBoundingClientRect(),r=document.createElement("div"),i=document.createElement("span");r.style.font=n.font,r.style.position="fixed",(0,e.gV)(r,t.value),r.style.left=t.clientLeft+o.left+"px",r.style.top=t.clientTop+o.top+"px",r.style.color="red",r.style.overflow="scroll",r.style.visibility="hidden",r.style.whiteSpace="pre-wrap",r.style.padding=n.padding,r.style.width=n.width,r.style.height=n.height,i.innerText="I";var a=t.selectionStart;if(a===t.value.length)r.appendChild(i);else{var s=r.childNodes[0].splitText(a);r.insertBefore(i,s)}return document.body.appendChild(r),(0,e.n5)(i),o=i.getBoundingClientRect(),r.remove(),o}(n):(Visual.showCursor(),u=Visual.getCursorPixelPos(),Visual.hideCursor());var d=u.top+u.height+4;window.innerHeight-d<a.offsetHeight&&(d=u.top-a.offsetHeight),a.style.position="fixed",a.style.top=d+"px",a.style.left=u.left+"px"}}}document.addEventListener("surfingkeys:userSettingsLoaded",(function(n){t.GZ.conf.enableEmojiInsertion&&o.mappings.add(":",{annotation:"Input emoji",feature_group:15,stopPropagation:function(){return!1},code:function(){var t=(0,e.iw)();s=void 0!==t.selectionStart?t.selectionStart+1:document.getSelection().focusOffset+1,fetch(chrome.extension.getURL("pages/emoji.tsv")).then((e=>Promise.all([e.text()]))).then((e=>{i=e[0].split("\n"),c()}))}})}));var l,u=!1;function d(e,t,n){var o=/\W/;for(n=t>0?n:n+t;;){if(n<0){n=0;break}if(n>=e.length){n=e.length;break}if(o.test(e[n]))break;n+=t}return n}function p(e,t,n){var o=d(e,t,n);return[o>n?e.substr(0,n)+e.substr(o):o<n?e.substr(0,o)+e.substr(n):e.substr(0,o)+e.substr(o+1),t>0?n:o]}o.addEventListener("keydown",(function(t){if(t.key&&t.key.charCodeAt(0)>127)t.sk_suppressed=!0;else{var r,i,c,l,d=(0,e.iw)(t);if(a.offsetHeight>0){if(f.isSpecialKeyOf("<Esc>",t.sk_keyName))a.remove(),s=-1;else if(t.keyCode===n.Z.keyCodes.tab||t.keyCode===n.Z.keyCodes.upArrow||t.keyCode===n.Z.keyCodes.downArrow)r=t.shiftKey||t.keyCode===n.Z.keyCodes.upArrow,i=a.querySelector("#sk_emoji>div.selected"),c=Array.from(a.querySelectorAll("#sk_emoji>div")),l=(c.indexOf(i)+(r?-1:1))%c.length,i.classList.remove("selected"),c[l].classList.add("selected"),u=!0,t.sk_stopPropagation=!0;else if(t.keyCode===n.Z.keyCodes.enter){var p=a.querySelector("#sk_emoji>div.selected>span").innerHTML;if(void 0!==d.setSelectionRange){var m=d.value;d.value=m.substr(0,s-1)+p+m.substr(d.selectionStart),d.setSelectionRange(s,s)}else{var h=document.getSelection();m=h.focusNode.data;h.focusNode.data=m.substr(0,s-1)+p+m.substr(h.focusOffset),h.setPosition(h.focusNode,s)}a.remove(),s=-1,t.sk_stopPropagation=!0}}else(0,e.jK)(d)?t.sk_keyName.length&&f.handleMapKey.call(o,t,(function(t){var n=t.getPrefixWord();if(n){var o=(0,e.iw)(),r=o.value,i=o.selectionStart;if(void 0!==r&&void 0!==i)o.value=r.substr(0,o.selectionStart)+n+r.substr(o.selectionEnd),i+=n.length,o.setSelectionRange(i,i);else{var a=(o=document.getSelection()).getRangeAt(0),s=document.createTextNode(n);"Caret"===o.type?void 0===(r=o.focusNode.data)?(a.insertNode(s),o.setPosition(s,s.length)):(i=o.focusOffset,o.focusNode.data=r.substr(0,i)+n+r.substr(i),o.setPosition(o.focusNode,i+n.length)):(a.deleteContents(),a.insertNode(s),o.setPosition(s,s.length))}}})):o.exit();t.sk_suppressed=!0}})),o.addEventListener("keyup",(function(t){var n=(0,e.iw)(t);if(!u&&-1!==s){var o,r;if(void 0!==n.selectionStart&&void 0!==n.value)o=n.value,r=n.selectionStart;else{var i=document.getSelection();o=i.focusNode.data,r=i.focusOffset}r<s||":"!==o[s-1]?a.remove():c()}u=!1})),o.addEventListener("focus",(function(t){var n=(0,e.iw)(t);t.target==window||(0,e.jK)(n)?t.sk_suppressed=!0:o.exit()}));var h=o.enter;return o.enter=function(e,n){e===document.body&&(t.GZ.conf.showModeStatus=!1);var i=-1===h.call(o);l!==e&&(l=e,i=!0),i&&!n&&t.GZ.conf.cursorAtEndOfInput&&"SELECT"!==e.nodeName&&r()},o};const w=function(o,r){var i=new f("Visual");i.addEventListener("keydown",(function(e){if(k){var t=!1;e.sk_stopPropagation=!0,e.sk_suppressed=!0,n.Z.isWordChar(e)?(E(k,e.sk_keyName),_=[k,e.sk_keyName],t=!0):f.isSpecialKeyOf("<Esc>",e.sk_keyName)&&(t=!0),t&&(i.statusLine=i.name+" - "+w[y],f.showStatus(),k=0)}else e.sk_keyName.length&&(f.handleMapKey.call(i,e),e.sk_stopPropagation?e.sk_suppressed=!0:f.isSpecialKeyOf("<Esc>",e.sk_keyName)&&(y>1?(i.hideCursor(),p.collapse(p.anchorNode,p.anchorOffset),i.showCursor()):(i.visualClear(),i.exit()),y--,A(),e.sk_stopPropagation=!0,e.sk_suppressed=!0))})),i.addEventListener("click",(function(e){switch(p.type){case"None":i.hideCursor(),y=0;break;case"Caret":y&&(i.hideCursor(),0===y&&(y=1),i.showCursor());break;case"Range":y&&(i.hideCursor(),y=2,i.showCursor())}A()})),i.addEventListener("resize",(function(e){t.GZ.conf.lastQuery&&i.visualUpdate(t.GZ.conf.lastQuery),h[g]&&x(h[g])}));let a=null;const s=()=>{a&&a.forEach((e=>{e.remove()}))};i.addEventListener("selectionchange",(function(e){var t,n,o,r;s(),t=p.anchorNode,n=p.anchorOffset,o=p.focusNode,r=p.focusOffset,a=T("surfingkeys_selection_mark",t,n,o,r)})),i.mappings=new m,i.map_node=i.mappings,i.repeats="",i.mappings.add("l",{annotation:"forward character",feature_group:9,code:S}),i.mappings.add("h",{annotation:"backward character",feature_group:9,code:S}),i.mappings.add("j",{annotation:"forward line",feature_group:9,code:S}),i.mappings.add("k",{annotation:"backward line",feature_group:9,code:S}),i.mappings.add("w",{annotation:"forward word",feature_group:9,code:S}),i.mappings.add("e",{annotation:"forward word",feature_group:9,code:S}),i.mappings.add("b",{annotation:"backward word",feature_group:9,code:S}),i.mappings.add(")",{annotation:"forward sentence",feature_group:9,code:S}),i.mappings.add("(",{annotation:"backward sentence",feature_group:9,code:S}),i.mappings.add("}",{annotation:"forward paragraphboundary",feature_group:9,code:S}),i.mappings.add("{",{annotation:"backward paragraphboundary",feature_group:9,code:S}),i.mappings.add("0",{annotation:"backward lineboundary",feature_group:9,code:S}),i.mappings.add("$",{annotation:"forward lineboundary",feature_group:9,code:S}),i.mappings.add("G",{annotation:"forward documentboundary",feature_group:9,code:function(){document.scrollingElement.scrollTop=document.scrollingElement.scrollHeight,"Firefox"!==(0,e.g_)()?S():(i.hideCursor(),p.setPosition(document.body.lastChild,0),i.showCursor()),h.length&&(g=h.length-1,(0,t.VX)("showStatus",[2,g+1+" / "+h.length]))}}),i.mappings.add("gg",{annotation:"backward documentboundary",feature_group:9,code:function(){document.scrollingElement.scrollTop=0,g=0,h.length&&(0,t.VX)("showStatus",[2,g+1+" / "+h.length]),"Firefox"!==(0,e.g_)()?S():(i.hideCursor(),p.setPosition(document.body.firstChild,0),i.showCursor())}}),i.mappings.add("o",{annotation:"Go to Other end of highlighted text",feature_group:9,code:function(){i.hideCursor();var e=[p.anchorNode,p.anchorOffset];p.collapse(p.focusNode,p.focusOffset),p.extend(e[0],e[1]),i.showCursor()}});var c={w:"word",l:"lineboundary",s:"sentence",p:"paragraphboundary"};function l(t){if("Firefox"!==(0,e.g_)()||"p"!==t&&"s"!==t){var n=c[t];p.modify("move","backward",n),p.modify("extend","forward",n)}}var u=[{},{annotation:"Yank a word(w) or line(l) or sentence(s) or paragraph(p)",feature_group:9,code:function(e){var t=[p.focusNode,p.focusOffset];i.hideCursor(),l(e),o.write(p.toString()),p.collapseToStart(),p.setPosition(t[0],t[1]),i.showCursor()}},{annotation:"Copy selected text",feature_group:9,code:function(){var e=[p.focusNode,p.focusOffset];o.write(p.toString()),"Caret"===t.GZ.conf.modeAfterYank?(p.setPosition(e[0],e[1]),i.showCursor(),y=1,A()):"Normal"===t.GZ.conf.modeAfterYank&&(y=2,i.toggle())}}];function d(t,n){(0,e.uE)(t,(()=>{(0,e.vA)(t,["click"],n)}))}i.mappings.add("*",{annotation:"Search word under the cursor",feature_group:9,code:function(){i.star()}}),i.mappings.add(n.Z.encodeKeystroke("<Enter>"),{annotation:"Click on node under cursor.",feature_group:9,code:function(){d(p.focusNode.parentNode,!1)}}),i.mappings.add(n.Z.encodeKeystroke("<Shift-Enter>"),{annotation:"Click on node under cursor.",feature_group:9,code:function(){d(p.focusNode.parentNode,!0)}}),i.mappings.add("zt",{annotation:"make cursor at start of window.",feature_group:9,code:function(){var e=b.getBoundingClientRect().top;i.hideCursor(),document.scrollingElement.scrollTop+=e,i.showCursor()}}),i.mappings.add("zz",{annotation:"make cursor at center of window.",feature_group:9,code:function(){var e=b.getBoundingClientRect().top-window.innerHeight/2;i.hideCursor(),document.scrollingElement.scrollTop+=e,i.showCursor()}}),i.mappings.add("zb",{annotation:"make cursor at bottom of window.",feature_group:9,code:function(){var e=window.innerHeight-b.getBoundingClientRect().bottom;i.hideCursor(),document.scrollingElement.scrollTop-=e,i.showCursor()}}),i.mappings.add("f",{annotation:"Forward to next char.",feature_group:9,code:function(){i.statusLine=i.name+" - "+w[y]+" - forward",f.showStatus(),k=1}}),i.mappings.add("F",{annotation:"Backward to next char.",feature_group:9,code:function(){i.statusLine=i.name+" - "+w[y]+" - backward",f.showStatus(),k=-1}}),i.mappings.add(";",{annotation:"Repeat latest f, F",feature_group:9,code:function(){_&&E(_[0],_[1])}}),i.mappings.add(",",{annotation:"Repeat latest f, F in opposite direction",feature_group:9,code:function(){_&&E(-_[0],_[1])}}),i.mappings.add("p",{annotation:"Expand selection to parent element",feature_group:9,code:function(){for(var t=p.focusNode;t!==document.body;){t=t.parentElement;var n=(0,e.kd)(t,/./),o=n[n.length-1],r=p.getRangeAt(0);if(-1===r.comparePoint(n[0],0)||1===r.comparePoint(o,o.length)){i.hideCursor(),y=2,A(),p.setBaseAndExtent(n[0],0,o,o.length),i.showCursor();break}}}}),i.mappings.add("V",{annotation:"Select a word(w) or line(l) or sentence(s) or paragraph(p)",feature_group:9,code:function(e){i.hideCursor(),y=2,A(),l(e),i.showCursor()}});var p=document.getSelection(),h=[],g=0,y=0,w=["","Caret","Range"],v=document.createElement("div"),b=document.createElement("div");b.className="surfingkeys_cursor",b.style.zIndex=2147483299;var k=0,_=null;function E(e,t){i.hideCursor();var n=[p.anchorNode,p.anchorOffset];if(p.focusNode&&p.focusNode.textContent&&p.focusNode.textContent.length&&p.focusNode.textContent[p.focusOffset]===t&&1===e&&p.setPosition(p.focusNode,p.focusOffset+1),P(t,!0,-1===e))if(1===y)p.setPosition(p.focusNode,p.focusOffset-1);else{var o=[p.focusNode,p.focusOffset-1];p.collapseToStart(),p.setPosition(n[0],n[1]),p.extend(o[0],o[1])}else p.setPosition(n[0],n[1]);i.showCursor()}function x(e){i.hideCursor(),p.anchorNode&&2===y?p.extend(e[0],e[1]):p.setPosition(e[0],e[1]),i.showCursor()}function S(){var e=i.map_node.meta.annotation.split(" "),t=2===y?"extend":"move";i.hideCursor();var n=[p.focusNode,p.focusOffset];p.modify(t,e[0],e[1]),n[0]===p.focusNode&&n[1]===p.focusOffset&&p.modify(t,e[0],"word"),i.showCursor()}i.hideCursor=function(){document.body.contains(b)&&(b.remove(),(0,t.VX)("cursorHidden"))},i.showCursor=function(){if(p.focusNode&&(p.focusNode.offsetHeight>0||p.focusNode.parentNode.offsetHeight>0)){(0,e.n5)(p.focusNode.parentElement,!0);var t=(0,e.YX)(p.focusNode,p.focusOffset)[0];t||(t=p.focusNode.getBoundingClientRect()),t&&(b.style.position="fixed",b.style.left=t.left+"px",t.left<0||t.left>=window.innerWidth?(document.scrollingElement.scrollLeft+=t.left-window.innerWidth/2,b.style.left=window.innerWidth/2+"px"):b.style.left=t.left+"px",t.top<0||t.top>=window.innerHeight?(document.scrollingElement.scrollTop+=t.top-window.innerHeight/2,b.style.top=window.innerHeight/2+"px"):b.style.top=t.top+"px",b.style.height=t.height+"px"),document.body.appendChild(b)}},i.getCursorPixelPos=function(){return b.getBoundingClientRect()};const C=document.createElement("div");function T(t,n,o,r,i){let a=(0,e.YX)(n,o,r,i);if(a.length>100)return[];const s=Array.from(a).map((e=>{if(e.width>0&&e.height>0){var n=v.cloneNode(!1);return n.className=t,n.style.position="absolute",n.style.zIndex=2147483299,n.style.left=document.scrollingElement.scrollLeft+e.left+"px",n.style.top=document.scrollingElement.scrollTop+e.top+"px",n.style.width=e.width+"px",n.style.height=e.height+"px",C.appendChild(n),n}return null})).filter((e=>null!==e));return s.length&&!document.documentElement.contains(C)&&document.documentElement.prepend(C),s}function O(e,t,n,o){const r=T("surfingkeys_match_mark",e,t,n,o);r.length&&h.push([e,t,r])}function N(n){(0,e.kd)(document.body,n).forEach((function(e){for(var t;null!==(t=n.exec(e.data));){var o=t[0];if(!o.length)break;var r=n.lastIndex-o.length;O(e,r,e,r+o.length)}}));var o=document.scrollingElement.scrollTop;for(p.setPosition(null,0);P(n.source,-1===n.flags.indexOf("i"),!1);)p.anchorNode!==p.focusNode&&O(p.anchorNode,p.anchorOffset,p.focusNode,p.focusOffset);if(document.scrollingElement.scrollTop=o,h.length){g=0;for(var r=0;r<h.length;r++){if(h[r][2][0].getBoundingClientRect().top>0){g=r;break}}(0,t.VX)("showStatus",[2,g+1+" / "+h.length])}}function L(){(0,t.VX)("hideBubble")}function A(){i.mappings.add("y",u[y]),i.statusLine=i.name+" - "+w[y],f.showStatus()}function R(){y=(y+1)%3,A()}function P(e,t,n){for(var o=!1,r=null;window.find(e,t,n);){if(p.anchorNode.splitText){o=!0;break}if(null===r)r=p.anchorNode;else if(r===p.anchorNode)break}return o}i.visualClear=function(){s(),i.hideCursor(),h=[],M.forEach((function(e){e.onscroll=null})),M=[],(0,e.gV)(C,""),C.remove(),(0,t.VX)("showStatus",[2,""])},i.emptySelection=function(){document.getSelection().empty()},i.onEnter=function(){document.addEventListener("surfingkeys:cursorHidden",L),R()},i.onExit=function(){i.visualClear(),document.removeEventListener("surfingkeys:cursorHidden",L)},i.restore=function(){p&&p.anchorNode&&(p.setPosition(p.anchorNode,p.anchorOffset),i.showCursor(),i.enter())},i.toggle=function(e){switch(y){case 1:p.extend(p.anchorNode,p.anchorOffset),R();break;case 2:i.hideCursor(),p.collapse(p.focusNode,p.focusOffset),i.exit(),R();break;default:r.create(t.GZ.conf.textAnchorPat,(function(t){setTimeout((function(){p.setPosition(t[0],t[1]),i.enter(),"z"===e&&(0===t[1]?p.extend(t[0],t[0].textContent.length):p.extend(t[0],t[1]+t[2].length),R()),i.showCursor()}),0)}))}},i.star=function(){if(p.focusNode&&p.focusNode.nodeValue){var n=(0,e.lI)();if(n.length&&"."!==n){i.hideCursor();var o=[p.focusNode,p.focusOffset];t.GZ.updateHistory("find",n),i.visualClear(),N(new RegExp(n,"g"+(t.GZ.getCaseSensitive(n)?"":"i"))),p.setPosition(o[0],o[1]),i.showCursor()}}},i.next=function(e){h.length?(0===y&&i.enter(),g=(e?h.length+g-1:g+1)%h.length,x(h[g]),(0,t.VX)("showStatus",[2,g+1+" / "+h.length])):t.GZ.conf.lastQuery&&(N(new RegExp(t.GZ.conf.lastQuery,"g"+(t.GZ.getCaseSensitive(t.GZ.conf.lastQuery)?"":"i"))),i.visualEnter(t.GZ.conf.lastQuery))},i.feedkeys=function(e){setTimeout((function(){for(var t=new Event("keydown"),n=0;n<e.length;n++)t.sk_keyName=e[n],f.handleMapKey.call(i,t)}),1)},i.visualUpdate=function(n){i.visualClear(),p.setPosition(function(t){for(var n=null,o=(0,e.kd)(document.body,/./,0);o.nextNode();)if(o.currentNode.parentNode.getBoundingClientRect().top>window.innerHeight*t){n=o.currentNode;break}return n}(0),0);var o=document.scrollingElement.scrollTop,r=[p.anchorNode,p.anchorOffset],a=t.GZ.getCaseSensitive(n);if(P(n,a,!1)?p.setPosition(r[0],r[1]):p.setPosition(document.body.firstChild,0),P(n,a,!1)){for(document.scrollingElement.scrollTop!==o&&(o=document.scrollingElement.scrollTop,r=[p.anchorNode,p.anchorOffset]),O(p.anchorNode,p.anchorOffset,p.focusNode,p.focusOffset);document.scrollingElement.scrollTop===o&&P(n,a,!1);)O(p.anchorNode,p.anchorOffset,p.focusNode,p.focusOffset);document.scrollingElement.scrollTop=o,p.setPosition(r[0],r[1])}};var M=[];i.visualEnter=function(n){0!==n.length&&"."!==n&&(i.visualClear(),N(new RegExp(n,"g"+(t.GZ.getCaseSensitive(n)?"":"i"))),h.length?(i.enter(),x(h[g])):(0,t.VX)("showStatus",[2,"Pattern not found: {0}".format(n),1e3]),f.getScrollableElements().forEach((function(t){t!==document.scrollingElement&&(t.onscroll=function(){h.forEach((function(t){var n=(0,e.YX)(t[0],t[1])[0];t[2].forEach((e=>{e.style.left=document.scrollingElement.scrollLeft+n.left+"px",e.style.top=document.scrollingElement.scrollTop+n.top+"px"}))}))},M.push(t))})))},i.findSentenceOf=function(t){var n=new RegExp("\\b"+t+"\\b"),o=(0,e.n_)((function(e,t){n.test(e.innerText)&&t.push(e)}));o=(0,e.CU)(o);var r="";return(0,e.Sn)((function(e){e.setPosition(o[0],0),window.find(t,!1,!1,!0,!0)&&(l("s"),r=e.toString())})),r};var I={};return i.style=function(e,t){I[e]=t,b.setAttribute("style",I.cursor||""),v.setAttribute("style",I.marks||"")},i};const v=function(o,r){var i=new f("Hints"),a=document.createElement("div");a.className="surfingkeys_hints_host",a.attachShadow({mode:"open"});var s=(0,e.hm)("style","\ndiv {\n    position: absolute;\n    display: block;\n    font-size: 8pt;\n    font-weight: bold;\n    padding: 0px 2px 0px 2px;\n    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#FFF785), color-stop(100%,#FFC542));\n    color: #000;\n    border: solid 1px #C38A22;\n    border-radius: 3px;\n    box-shadow: 0px 3px 7px 0px rgba(0, 0, 0, 0.3);\n    width: auto;\n}\ndiv:empty {\n    display: none;\n}\n[mode=text] div {\n    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#aaa), color-stop(100%,#fff));\n}\ndiv.hint-scrollable {\n    background: rgba(170, 170, 255, 0.85);\n}\n[mode=text] div.begin {\n    color: #00f;\n}\n[mode=input] div {\n    background: rgba(255, 217, 0, 0.25);\n}\n[mode=input] div.activeInput {\n    background: rgba(0, 0, 255, 0.25);\n}");a.shadowRoot.appendChild(s);let c=!1;i.setNumeric=function(){c=!0};let l="asdfgqwertzxcvb",u=[];i.setCharacters=function(e){l=e;for(const t of e)r.isScrollKeyInHints(t)&&u.push(t)},i.addEventListener("keydown",(function(e){var t=g.querySelectorAll("div");e.sk_stopPropagation=!0;var i=g.querySelector("[mode=input]>div.activeInput");if(null===i){if(f.isSpecialKeyOf("<Esc>",e.sk_keyName))S();else if(e.keyCode===n.Z.keyCodes.space)g.style.display="none";else if(e.keyCode===n.Z.keyCodes.shiftKey)!function(){var e=g.querySelectorAll("div");e[0].style.zIndex==e[0].zIndex?e.forEach((function(t,n){var o=parseInt(t.style.zIndex);t.style.zIndex=e.length-n+2147483e3-o})):e.forEach((function(e,t){e.style.zIndex=e.zIndex}))}();else if(t.length>0)if(e.keyCode===n.Z.keyCodes.backspace)d.length>0?(d=d.substr(0,d.length-1),_(e)):p.length>0&&(p=p.substr(0,p.length-1),E());else{var a=e.sk_keyName;(function(e){return e===e.toUpperCase()&&e!==e.toLowerCase()})(a)&&(y=!0),""!==a&&(c?(a>="0"&&a<="9"?d+=a:(p+=a,E()),_(e)):-1!==l.toLowerCase().indexOf(a.toLowerCase())?(d+=a.toUpperCase(),_(e)):r.isScrollKeyInHints(a)&&-1===u.indexOf(a)?e.sk_stopPropagation=!1:S())}}else{var s=i.link;f.isSpecialKeyOf("<Esc>",e.sk_keyName)?(s.blur(),S()):e.keyCode===n.Z.keyCodes.tab?(i.classList.remove("activeInput"),w.activeInput=(w.activeInput+(e.shiftKey?-1:1))%t.length,(i=t[w.activeInput]).classList.add("activeInput"),(s=i.link).focus()):e.keyCode!==n.Z.keyCodes.shiftKey&&(e.sk_stopPropagation=!1,S(),o.enter(s))}})),i.addEventListener("keyup",(function(e){e.keyCode===n.Z.keyCodes.space&&(g.style.display="")}));var d="",p="",m=null,h={mouseEvents:["mouseover","mousedown","mouseup","click"]},g=(0,e.hm)("section","",{style:"display: block; opacity: 1;"}),y=!1,w={},v=i.dispatchMouseClick,b="";function k(e){var t=0;do{var n=parseInt(getComputedStyle(e).getPropertyValue("z-index"));t+=isNaN(n)||n<0?0:n,e=e.parentNode}while(e&&e!==document.body&&e!==document&&e.nodeType!==e.DOCUMENT_FRAGMENT_NODE);return t}function _(e){var t=x();if(1===t.length){r.appendKeysForRepeat("Hints",d);var n=t[0].link;v(n),h.multipleHits?(d="",x()):S()}else 0===t.length&&S();e&&(f.suppressKeyUp(e.keyCode),e.stopImmediatePropagation(),e.preventDefault())}function E(){var t=g.querySelectorAll("div");t=Array.from(t),p.length>0&&(t=t.filter((function(t){t.label="",(0,e.gV)(t,"");var n=t.link,o=n.innerText;return void 0===o&&(o=n[0]?n[0].textContent:""),-1!==o.indexOf(p)})));var n=i.genLabels(t.length);t.forEach((function(t,o){t.label=n[o],(0,e.gV)(t,n[o])}))}function x(){var t=[];return g.querySelectorAll("div:not(:empty)").forEach((function(n){var o=n.label;0===d.length?(n.style.opacity=1,(0,e.gV)(n,o),t.push(n)):0===o.indexOf(d)?(n.style.opacity=1,(0,e.gV)(n,`<span style="opacity: 0.2;">${d}</span>`+o.substr(d.length)),t.push(n)):n.style.opacity=0})),t}function S(){h={active:!0,tabbed:!1,mouseEvents:["mouseover","mousedown","mouseup","click"],multipleHits:!1},(0,e.gV)(g,""),g.remove(),a.remove(),d="",p="",y=!1,i.exit()}function C(t){(0,e.gV)(g,""),g.remove(),d=""}function T(){if(document.documentElement.contains(a)){var e=(new Date).getTime(),t=P(b,w);t>0&&(i.statusLine+=" - "+((new Date).getTime()-e)+"ms / "+t,f.showStatus())}}function O(e){for(var t=e.href;!t&&e;)t=(e=e.parentElement).href;return t}function N(e){for(var n=0;n<t.GZ.conf.pageUrlRegex.length;n++){var o=window.location.href.match(t.GZ.conf.pageUrlRegex[n]);if(o&&4===o.length){var r=parseInt(o[2]);if(r<4294967295)return window.location.href=o[1]+(r+e)+o[3],!0}}return!1}function L(e){let t={};return e.forEach((function(e){let n=e.getAttribute("href");t[n]||(t[n]=e)})),Object.values(t)}function A(t){(0,e.gV)(g,""),g.setAttribute("mode",t),g.style.display=""}function R(n){A("click");var o=i.genLabels(n.length),r=i.coordinate(),s=(0,e.hm)("style",I);g.prepend(s);var c=n.map((function(n,i){var a,s=(0,e.sS)(n),c=k(n),l=Math.min(s.width,window.innerWidth);(a="right"===t.GZ.conf.hintAlign?window.pageXOffset+s.left-r.left+l:"left"===t.GZ.conf.hintAlign?window.pageXOffset+s.left-r.left:window.pageXOffset+s.left-r.left+l/2)<window.pageXOffset?a=window.pageXOffset:a+32>window.pageXOffset+window.innerWidth&&(a=window.pageXOffset+window.innerWidth-32);var u=(0,e.hm)("div",o[i]);return n.dataset.hint_scrollable&&u.classList.add("hint-scrollable"),u.style.top=Math.max(s.top+window.pageYOffset-r.top,0)+"px",u.style.left=a+"px",u.style.zIndex=c+9999,u.zIndex=u.style.zIndex,u.label=o[i],u.link=n,u}));c.forEach((function(e){g.appendChild(e)}));for(var l=g.querySelectorAll("div"),u=(0,e.sS)(l[0]),d=1;d<l.length;d++){var f=l[d],p=(0,e.sS)(f);p.top===u.top&&Math.abs(p.left-u.left)<u.width&&(f.style.top=f.offsetTop+f.offsetHeight+"px"),u=(0,e.sS)(f)}a.shadowRoot.appendChild(g)}function P(n,o){return document.documentElement.appendChild(a),"RegExp"===n.constructor.name?function(n,o){for(var r in o)h[r]=o[r];i.statusLine=o&&o.statusLine||"Hints to select text";var s,c=(0,e.n_)((function(e,t){for(var n=e.childNodes,o=0,r=n.length;o<r;o++)if(n[o].nodeType==Node.TEXT_NODE&&n[o].data.length>0){t.push(e);break}}));if(c=c.flatMap((function(e){for(var t=e.childNodes,n=[],o=0,r=t.length;o<r;o++)t[o].nodeType==Node.TEXT_NODE&&t[o].data.trim().length>1&&n.push(t[o]);return n})),-1===n.flags.indexOf("g"))s=c.map((function(e){return[e,0,""]}));else{s=[];for(var l=0,u=c.length;l<u;l++)for(var d,f=c[l];null!=(d=n.exec(f.data));)s.push([f,d.index,d[0]])}if(c=s.map((function(n){var o=(0,e.t_)(n[0],n[1]),r=[0,0,window.innerHeight,window.innerWidth];if(t.GZ.conf.caretViewport&&4===t.GZ.conf.caretViewport.length&&(r=t.GZ.conf.caretViewport),0===n[0].data.trim().length||o.top<r[0]||o.left<r[1]||o.top>r[2]||o.left>r[3])return null;var i=k(n[0].parentNode),a=document.createElement("div");return 0===n[1]&&(a.className="begin"),a.style.position="fixed",a.style.top=o.top+"px",a.style.left=o.left+"px",a.style.zIndex=i+9999,a.zIndex=a.style.zIndex,a.link=n,a})).filter((function(e){return null!==e})),document.getSelection().anchorNode&&document.getSelection().collapseToStart(),c.length>0){A("text");var p=i.genLabels(c.length);c.forEach((function(t,n){t.label=p[n],(0,e.gV)(t,p[n]),g.append(t)}));var m=(0,e.hm)("style",M);g.prepend(m),a.shadowRoot.appendChild(g)}return c.length}(n,o):Array.isArray(n)?function(t,n){for(var o in n=Object.assign({active:!0,tabbed:!1,mouseEvents:["mouseover","mousedown","mouseup","click"],multipleHits:!1,filterInvisible:!0},n||{}))h[o]=n[o];return i.statusLine=n&&n.statusLine||"Hints to click",n.filterInvisible&&(t=(0,e.Ns)(t)),t.length>0&&R(t),t.length}(n,o):function(t,n){for(var o in i.statusLine="Hints to click",n=Object.assign({active:!0,tabbed:!1,mouseEvents:["mouseover","mousedown","mouseup","click"],multipleHits:!1},n||{}))h[o]=n[o];var r;return""===t?(r=(0,e.n_)((function(t,n){(0,e.yT)(t)&&n.push(t)})),r=(0,e.DN)(r)):Array.isArray(t)?r=(0,e.Ns)(t):(r=(0,e.n_)((function(e,n){!e.matches(t)||e.disabled||e.readOnly||n.push(e)})),r=(0,e.Ns)(r),r=(0,e.DN)(r)),r.length>0&&R(r),r.length}(n,o)}i.click=function(t,n){"string"==typeof t&&(t=(0,e.kE)(t)),t.length>1?n?t.forEach((function(e){i.dispatchMouseClick(e)})):i.create(t,i.dispatchMouseClick):1===t.length&&i.dispatchMouseClick(t[0])},i.previousPage=function(){var n=L((0,e.kE)("[rel=prev]",t.GZ.conf.prevLinkRegex));return n.length?(i.click(n),!0):N(-1)},i.nextPage=function(){var n=L((0,e.kE)("[rel=next]",t.GZ.conf.nextLinkRegex));return n.length?(i.click(n),!0):N(1)},document.addEventListener("surfingkeys:topBoundaryHit",i.previousPage),document.addEventListener("surfingkeys:bottomBoundaryHit",i.nextPage),i.onEnter=function(){document.addEventListener("surfingkeys:scrollStarted",C),document.addEventListener("surfingkeys:scrollDone",T)},i.onExit=function(){document.removeEventListener("surfingkeys:scrollStarted",C),document.removeEventListener("surfingkeys:scrollDone",T)},i.genLabels=function(e){var t,n,o,r,i,a;for(o=[""],a=0;o.length-a<e||1===o.length;)for(n=o[a++],r=0,i=l.length;r<i;r++)t=l[r],o.push(t+n);return(o=o.slice(a,a+e)).map((function(e){return e.reverse().toUpperCase()}))},i.coordinate=function(){var t=(0,e.hm)("div","A",{style:"top: 0; left: 0;"});g.prepend(t),a.shadowRoot.appendChild(g);var n=t.getBoundingClientRect(),o={top:n.top+window.pageYOffset-document.documentElement.clientTop,left:n.left+window.pageXOffset-document.documentElement.clientLeft};return(0,e.gV)(g,""),g.remove(),o},i.createInputLayer=function(){var t="input",n=(0,e.n_)((function(e,n){!e.matches(t)||e.disabled||e.readOnly||"text"!==e.type&&"email"!==e.type&&"search"!==e.type&&"password"!==e.type||n.push(e)}));if(0===n.length&&null!==document.querySelector(t)&&(document.querySelector(t).scrollIntoView(),n=(0,e.n_)((function(e,n){!e.matches(t)||e.disabled||e.readOnly||n.push(e)}))),n.length>1){i.enter(),A("input"),n.forEach((function(e,t){var n=e.getBoundingClientRect(),o=k(e),r=document.createElement("div");r.style.position="fixed",r.style.top=n.top+"px",r.style.left=n.left+"px",r.style.width=n.width+"px",r.style.height=n.height+"px",r.style.zIndex=o+9999,r.link=e,r.innerText=" ",g.append(r)})),a.shadowRoot.appendChild(g),w.activeInput=0;var s=g.querySelector("[mode=input]>div");s.classList.add("activeInput"),r.passFocus(!0),s.link.focus()}else 1===n.length&&(r.passFocus(!0),n[0].focus(),o.enter(n[0]))},i.getSelector=function(){return b},i.create=function(e,n,o){c&&(l="1234567890"),b=e,v=n,w=o||{};var r=(new Date).getTime(),a=P(e,o);return a>(t.GZ.conf.hintExplicit?0:1)?(i.statusLine+=" - "+((new Date).getTime()-r)+"ms / "+a,i.enter()):_(),a>0},i.dispatchMouseClick=function(n,a){if((0,e.jK)(n))i.exit(),r.passFocus(!0),n.focus(),o.enter(n);else{h.multipleHits||i.exit();var s=h.tabbed,c=h.active;if(h.multipleHits){const e=n.getAttribute("href");null!==e&&"#"!==e&&(s=!0,c=!1)}y&&t.GZ.conf.hintShiftNonActive?(s=!0,c=!1):y&&"Firefox"===(0,e.g_)()&&(s=!0,c=!0),(0,e.uE)(n,(()=>{s?(0,t._P)("openLink",{tab:{tabbed:s,active:c},url:O(n)}):(i.mouseoutLastElement(),(0,e.vA)(n,h.mouseEvents,y),(0,t.VX)("turnOnDOMObserver"),m=n),h.multipleHits&&setTimeout(T,300)}))}},i.mouseoutLastElement=function(){m&&((0,e.vA)(m,["mouseout"],!1),m=null)};var M="",I="";return i.style=function(e,t){/^div\b/.test(e)||(e=`div{${e}}`),"text"===t?M=e.replace(/\bdiv\b/g,"[mode='text'] div"):I=e.replace(/\bdiv\b/g,"div")},i.feedkeys=function(e){setTimeout((function(){d=e.toUpperCase(),_()}),1)},i};const b=function(){var n={},o=document.createElement("textarea");function r(t){(0,e.Sn)((function(e){document.documentElement.appendChild(o),t(e),o.remove()}))}return o.contentEditable=!0,o.enableAutoFocus=!0,o.id="sk_clipboard",n.read=function(n){if((0,e.g_)().startsWith("Safari"))(0,t._P)("readClipboard",null,(function(e){n(e)}));else if("Firefox"!==(0,e.g_)()||"object"!=typeof navigator.clipboard||"function"!=typeof navigator.clipboard.readText){r((function(){o.value="",(0,e.gV)(o,""),o.focus(),document.execCommand("paste")}));var i=o.value;""===i&&(i=o.innerHTML.replace(/<br>/gi,"\n")),n({data:i})}else navigator.clipboard.readText().then((e=>{setTimeout((function(){n({data:e})}),0)}))},n.write=function(n){const i=()=>{(0,e.mU)("Copied: "+n)};"Chrome"===(0,e.g_)()?(0,e.Ru)((function(){window.oncopy=document.oncopy,document.oncopy=null}),(function(){r((function(){o.value=n,o.select(),document.execCommand("copy"),o.value=""})),(0,e.Ru)((function(){document.oncopy=window.oncopy,delete window.oncopy})),i()})):((0,t._P)("writeClipboard",{text:n}),i())},n};const k=function(t,n){var o=document.createElement("div");o.style.display="block",o.style.opacity=1,o.style.colorScheme="light";var r=chrome.runtime.getURL("pages/frontend.html"),i=document.createElement("iframe");function a(e){var t=e.data&&e.data.surfingkeys_data;void 0!==t&&(t.commandToFrontend||t.responseToFrontend?(i.contentWindow.postMessage({surfingkeys_data:t},r),t.commandToFrontend&&e.source&&-1!==["showStatus","showEditor","openOmnibar","openFinder"].indexOf(t.action)&&(u&&u.window===e.source||(u&&u.window.postMessage({surfingkeys_data:{action:"deactivated",direct:!0,reason:`${t.action}@${e.timeStamp}`,commandToContent:!0}},u.origin),(u={window:e.source,origin:t.origin}).window.postMessage({surfingkeys_data:{action:"activated",direct:!0,reason:`${t.action}@${e.timeStamp}`,commandToContent:!0}},u.origin)))):t.action&&l.hasOwnProperty(t.action)?l[t.action](t):(t.commandToContent||t.responseToContent)&&u&&!t.direct&&u.window!==top&&u.window.postMessage({surfingkeys_data:t},u.origin))}i.setAttribute("allowtransparency",!0),i.setAttribute("frameborder",0),i.setAttribute("scrolling","no"),i.setAttribute("class","sk_ui"),i.setAttribute("src",r),i.setAttribute("title","Surfingkeys"),i.style.position="fixed",i.style.left=0,i.style.bottom=0,i.style.width="100%",i.style.height=0,i.style.zIndex=2147483647,o.attachShadow({mode:"open"}),o.shadowRoot.appendChild(i),i.addEventListener("load",(function(){this.contentWindow.postMessage({surfingkeys_data:{action:"initFrontend",ack:!0,origin:(0,e.MB)()}},r),window.addEventListener("message",a,!0)}),{once:!0});var s,c="none",l={},u=null;return l.initFrontendAck=function(e){n(window.location.href)},l.setFrontFrame=function(e){i.style.height=e.frameHeight,e.pointerEvents&&(i.style.pointerEvents=e.pointerEvents),"none"===e.pointerEvents?(o.blur(),i.blur(),c!==e.pointerEvents&&u&&(t.getBackFocusFromFrontend?t.getBackFocusFromFrontend():u.window.postMessage({surfingkeys_data:{action:"getBackFocus",commandToContent:!0}},u.origin)),document.body&&(document.body.style.animationFillMode="",document.body.style.overflowY=s)):(t.focusFrontend&&t.focusFrontend(i),document.body&&(document.body.style.animationFillMode="none",void 0===s&&(s=document.body.style.overflowY),document.body.style.overflowY="visible")),c=e.pointerEvents},o.detach=function(){window.removeEventListener("message",a,!0),o.remove()},o};const _=function(n,o,r,i,a){var s,c,l={},u=[],d=new Promise((function(e,t){window===top?c=e:e(window.location.href)})),f={};l.command=function(n,o){n.commandToFrontend=!0,n.origin=(0,e.MB)(),n.id=(0,e.Dv)(),o&&(n.ack=!0,f[n.id]=o),d.then((function(){t.GZ.postTopMessage(n)}))},document.addEventListener("surfingkeys:setUserSettings",(function(e){u.push({action:"applyUserSettings",userSettings:e.detail})}));var p={};l.addSearchAlias=function(e,t,n,o,r,i){o&&r&&(p[o]=r),u.push({action:"addSearchAlias",alias:e,prompt:t,url:n,suggestionURL:o,options:i})},l.removeSearchAlias=function(e){u.push({action:"removeSearchAlias",alias:e})};var m={};function h(){var e=document.getSelection(),t=e.toString().trim();t&&!/[\W_]/.test(t)&&t.length&&"Range"===e.type&&l.performInlineQueryOnSelection(t)}l.performInlineQueryOnSelection=function(e){var n=document.getSelection().getRangeAt(0).getClientRects()[0];l.performInlineQuery(e,n,(function(e,n){n&&(0,t.VX)("showBubble",[{top:e.top,left:e.left,height:e.height,width:e.width},n,!1])}))},document.addEventListener("surfingkeys:querySelectedWord",h),m.updateInlineQuery=function(e){e.word?l.performInlineQueryOnSelection(e.word):h()},m.getSearchSuggestions=function(e){var t=null;return p.hasOwnProperty(e.url)&&(t=p[e.url](e.response,{url:e.requestUrl,query:e.query})),t},l.executeCommand=function(e){l.command({action:"executeCommand",cmdline:e})},document.addEventListener("surfingkeys:addMapkey",(function(e){const[t,n,o]=e.detail;u.push({action:"addMapkey",mode:t,new_keystroke:n,old_keystroke:o})})),document.addEventListener("surfingkeys:addVimMap",(function(e){const[t,n,o]=e.detail;u.push({action:"addVimMap",lhs:t,rhs:n,ctx:o})})),document.addEventListener("surfingkeys:addVimKeyMap",(function(e){u.push({action:"addVimKeyMap",vimKeyMap:e.detail})}));var g,y,w,v,b=(0,e.hm)("div","Hi, I'm here now!",{id:"sk_frame"});function _(e){document.documentElement.append(b);var t=e.rect;b.style.top=t.top+"px",b.style.left=t.left+"px",b.style.width=t.width+"px",b.style.height=t.height+"px",b.style.display="",setTimeout((function(){b.remove()}),e.duration)}function E(){return[o.mappings,i.mappings,n.mappings].map(e.fy).reduce((function(e,t){return e.concat(t)}))}function x(){l.command({action:"hidePopup"})}function S(e){if("DIV"===y.nodeName)e=e.replace(/\n+$/,""),"function"==typeof y.setEditorText?y.setEditorText(e):y.innerText=e;else if("function"==typeof y.setValueWithEventDispatched)y.setValueWithEventDispatched(e);else{y.value=e;var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),y.dispatchEvent(t)}}b.fromSurfingKeys=!0,document.addEventListener("surfingkeys:highlightElement",(function(e){_(e.detail)})),l.showUsage=function(){l.command({action:"showUsage",metas:E()})},l.getUsage=function(e){l.command({action:"getUsage",metas:E()},(function(t){e(t.data)}))},document.addEventListener("surfingkeys:showPopup",(function(e){const[t]=e.detail;l.command({action:"showPopup",content:t})})),document.addEventListener("surfingkeys:hidePopup",x),l.showEditor=function(e,n,o,r){o=o||e.localName;var i,a=0;if("string"==typeof e)i=e,y=document.body;else if("select"===o){var s=e.value;i=Array.from(e.querySelectorAll("option")).map((function(e,t){return e.value===s&&(a=t),e.innerText.trim()+" >< "+e.value})).join("\n"),y=e}else i="DIV"===(y=e).nodeName?y.innerText:y.value;g=n||S;const c={action:"showEditor",type:o||"textarea",initial_line:a,content:i};(r||t.GZ.conf.useNeovim)&&(c.file_name=`${new URL(window.location.origin).host}/${y.nodeName.toLowerCase()}`),l.command(c)},l.chooseTab=function(){""!==o.repeats?(0,t._P)("focusTabByIndex"):l.command({action:"chooseTab"})},l.openOmnibar=function(e){e.action="openOmnibar",l.command(e)},l.performInlineQuery=function(n,o,r){void 0!==document.dictEnabled?document.dictEnabled&&("dictorium:"===window.location.protocol?window===top?window.location.href=n:window.postMessage({surfingkeys_data:{type:"DictoriumReload",word:n}}):window.postMessage({dictorium_data:{type:"OpenDictoriumQuery",word:n,sentence:"",pos:o,source:window.location.href}}),x()):w?(t.GZ.conf.autoSpeakOnInlineQuery&&a.readText(n),n=n.toLocaleLowerCase(),t.GZ.updateHistory("OmniQuery",n),(0,e.c3)({url:"function"==typeof w.url?w.url(n):w.url+n,headers:w.headers},(function(e){r(o,w.parseResult(e))}))):(0,e.c)()?(v=function(e){r(o,e)},document.getElementById("proxyFrame").contentWindow.postMessage({surfingkeys_data:{action:"performInlineQuery",pos:o,query:n}},"*")):((0,e.qF)("https://github.com/brookhong/Surfingkeys/wiki/Register-inline-query"),x())},l.registerInlineQuery=function(e){w=e},l.openOmniquery=function(e){l.openOmnibar({type:"OmniQuery",extra:e.query,style:e.style})},document.addEventListener("surfingkeys:openFinder",(function(e){l.command({action:"openFinder"})})),document.addEventListener("surfingkeys:showBanner",(function(e){const[t,n]=e.detail;l.command({action:"showBanner",content:t,linger_time:n})})),document.addEventListener("surfingkeys:showBubble",(function(e){const[t,n,o]=e.detail;n.length>0&&(t.winWidth=window.innerWidth,t.winHeight=window.innerHeight,t.winX=0,t.winY=0,window.frameElement&&(t.winX=window.frameElement.offsetLeft,t.winY=window.frameElement.offsetTop),l.command({action:"showBubble",content:n,position:t,noPointerEvents:o}))})),document.addEventListener("surfingkeys:hideBubble",(function(e){l.command({action:"hideBubble"})}));var C,T={accumulated:"",candidates:{},key:""};function O(){C&&(clearTimeout(C),C=void 0)}document.addEventListener("surfingkeys:hideKeystroke",(function(e){T.accumulated="",T.candidates={},l.command({action:"hideKeystroke"})})),document.addEventListener("surfingkeys:showKeystroke",(function(e){const[t,n]=e.detail;T.accumulated+=t,T.key=t,T.candidates={};var o=n.mappings.find(T.accumulated);o&&o.getMetas((function(e){return!0})).forEach((function(e){T.candidates[e.word]={annotation:e.annotation}})),l.command({action:"showKeystroke",keyHints:T})})),document.addEventListener("surfingkeys:showStatus",(function(e){l.showStatus(...e.detail)})),l.showStatus=function(e,t,n){l.command({action:"showStatus",content:t,duration:n,position:e})},l.toggleStatus=function(e){l.command({action:"toggleStatus",visible:e})},m.ace_editor_saved=function(r){void 0!==r.data&&g(r.data),t.GZ.conf.focusOnSaved&&(0,e.jK)(y)&&(o.passFocus(!0),y.focus(),n.enter(y))},m.nextEdit=function(t){var n=r.getSelector()||"input, textarea, *[contenteditable=true], select";if((n=getElements(n)).length){var o=n.indexOf(y);o=(o+(t.backward?-1:1))%n.length,n=n[o],scrollIntoViewIfNeeded(n),(0,e.uE)(n,(()=>{l.showEditor(n)}))}},m.omnibar_query_entered=function(n){t.GZ.updateHistory("OmniQuery",n.query),l.performInlineQuery(n.query,{top:0,left:80,height:0,width:100},(function(t,o){if("Array"!==o.constructor.name&&(o=[o]),"Chrome"===(0,e.g_)()){var r=i.findSentenceOf(n.query);r.length>0&&o.push(r)}l.command({action:"updateOmnibarResult",words:o})}))},m.executeScript=function(e){(0,t._P)("executeScript",{code:e.cmdline},(function(e){l.command({action:"updateOmnibarResult",words:e.response})}))},m.getBackFocus=function(e){window.focus(),window===top&&s&&s.shadowRoot.contains(document.activeElement)&&document.activeElement.blur()},m.getPageText=function(e){return document.body.innerText},m.visualUpdate=function(e){O(),C=setTimeout((function(){i.visualUpdate(e.query),l.command({action:"visualUpdated"})}),500)},m.visualClear=function(e){O(),i.visualClear()},m.visualEnter=function(e){O(),i.visualEnter(e.query)},m.emptySelection=function(e){i.emptySelection()};var N,L=window===top;return m.deactivated=function(e){L=!1},m.activated=function(e){L=!0},t.GZ.on("focusFrame",(function(e,t,n){e.frameId===window.frameId&&(window.focus(),document.body.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),_({duration:500,rect:{top:0,left:0,width:window.innerWidth,height:window.innerHeight}}))})),window.addEventListener("message",(function(e){var n=e.data&&e.data.surfingkeys_data;if(void 0!==n)if("performInlineQuery"===n.action)l.performInlineQuery(n.query,n.pos,(function(t,n){e.source.postMessage({surfingkeys_data:{action:"performInlineQueryResult",pos:t,result:n}},e.origin)}));else if("performInlineQueryResult"===n.action)v(n.pos,n.result);else if(L){if(n.responseToContent&&f[n.id])(0,f[n.id])(n)||delete f[n.id];else if(n.commandToContent&&n.action&&m.hasOwnProperty(n.action)){var o=m[n.action](n);n.ack&&Promise.resolve(o).then((e=>t.GZ.postTopMessage({data:e,responseToFrontend:!0,origin:n.origin,id:n.id})))}}else("activated"===n.action||"DictoriumViewReady"===n.type)&&m.activated(n)}),!0),l.attach=function(){s||(s=k(a,(e=>{c(e),function(){for(var e of u)l.command(e)}()})),document.documentElement.appendChild(s)),N&&(clearTimeout(N),N=void 0)},l.detach=function(){s&&(N=setTimeout((function(){s.detach(),s=void 0}),3e3))},l};const E=function(o,r,i,a,s,c,l){function u(t,n,o){var r={code:t};return o&&(r.repeatIgnore=o),n&&(n=(0,e.Qe)(n),r.feature_group=n.feature_group,r.annotation=n.annotation),r}function d(e){return!e||e.test(document.location.href)||e.test(window.origin)}function p(t,o,r,i,a){if(d((a=a||{}).domain)){o=n.Z.encodeKeystroke(o);var c,l=t.mappings.remove(o);if(l)c=l.meta?`${l.meta.word} for [${l.meta.annotation}] is overridden by [${r}].`:l.getMetas((function(){return!0})).map((function(e){return`${e.word} for [${e.annotation}] is overridden by [${r}].`})),(0,e.sY)("warn",c);else if(o.length>1)for(var f=o.substr(0,o.length-1);f.length>0;){if((l=t.mappings.find(f))&&l.meta)return void(0,e.sY)("warn",`${l.meta.word} for [${l.meta.annotation}] precedes ${o}.`);f=f.substr(0,f.length-1)}var p=u(i,{annotation:r,feature_group:t===s?9:14},a.repeatIgnore);t.mappings.add(o,p)}}function h(e,t,n,o){p(i,e,t,n,o)}function g(e,t,n,o){p(s,e,t,n,o)}function y(e,t,n,o){p(r,e,t,n,o)}function w(e,t){if(d(t))if(i.mappings.find(n.Z.encodeKeystroke(e)))i.mappings.remove(n.Z.encodeKeystroke(e));else for(var o in f.specialKeys){var r=f.specialKeys[o].indexOf(e);-1!==r&&f.specialKeys[o].splice(r,1)}}function v(e,t){d(t)&&s.mappings.remove(n.Z.encodeKeystroke(e))}function b(t,n,r,i){o.read((function(o){var a=window.getSelection().toString()||o.data;n&&(a="site:"+window.location.hostname+" "+a),r?c.openOmnibar({type:"SearchEngine",extra:i,pref:a}):(0,e.qF)((0,e.Ge)(t,encodeURIComponent(a)))}))}function k(t){var n=(0,e.iw)();n.blur(),r.exit(),c.showEditor(n,null,null,t)}function _(){window.getSelection().toString()?b("https://translate.google.com/?hl=en#auto/en/",!1,!1,""):(0,e.qF)("https://translate.google.com/translate?js=n&sl=auto&tl=zh-CN&u="+window.location.href)}return h("[[","#1Click on the previous link on current page",a.previousPage),h("]]","#1Click on the next link on current page",a.nextPage),h("T","#3Choose a tab",(function(){c.chooseTab()})),h("?","#0Show usage",(function(){c.showUsage()})),h("Q","#8Open omnibar for word translation",(function(){c.openOmniquery({query:(0,e.lI)(),style:"opacity: 0.8;"})})),y("<Ctrl-'>","#15Toggle quotes in an input element",e.ph),y("<Ctrl-i>","#15Open vim editor for current input",(function(){k(!1)})),"Chrome"===(0,e.g_)()&&(y("<Ctrl-Alt-i>","#15Open neovim for current input",(function(){k(!0)})),h(";s","Toggle PDF viewer from SurfingKeys",(function(){var t=window.location.href;0===t.indexOf(chrome.extension.getURL("/pages/pdf_viewer.html"))?(t=window.location.search.substr(3),chrome.storage.local.set({noPdfViewer:1},(function(){window.location.replace(t)}))):document.querySelector("EMBED")&&"application/pdf"===document.querySelector("EMBED").getAttribute("type")?chrome.storage.local.remove("noPdfViewer",(function(){window.location.replace(t)})):chrome.storage.local.get("noPdfViewer",(function(t){t.noPdfViewer?chrome.storage.local.remove("noPdfViewer",(function(){(0,e.mU)("PDF viewer enabled.")})):chrome.storage.local.set({noPdfViewer:1},(function(){(0,e.mU)("PDF viewer disabled.")}))}))}))),h(";ql","#0Show last action",(function(){(0,e.U)((0,e.Ak)(t.GZ.conf.lastKeys.map((function(e){return n.Z.decodeKeystroke(e)})).join(" → ")))}),{repeatIgnore:!0}),h("gi","#1Go to the first edit box",(function(){a.createInputLayer()})),h("zv","#9Enter visual mode, and select whole element",(function(){s.toggle("z")})),h("yv","#7Yank text of an element",(function(){a.create(t.GZ.conf.textAnchorPat,(function(e){o.write(0===e[1]?e[0].data.trim():e[2].trim())}))})),h("ymv","#7Yank text of multiple elements",(function(){var e=[];a.create(t.GZ.conf.textAnchorPat,(function(t){e.push(0===t[1]?t[0].data.trim():t[2].trim()),o.write(e.join("\n"))}),{multipleHits:!0})})),h("V","#9Restore visual mode",(function(){s.restore()})),h("*","#9Find selected text in current page",(function(){s.star(),s.toggle()})),g("<Ctrl-u>","#9Backward 20 lines",(function(){s.feedkeys("20k")})),g("<Ctrl-d>","#9Forward 20 lines",(function(){s.feedkeys("20j")})),h("m","#10Add current URL to vim-like marks",i.addVIMark),h("'","#10Jump to vim-like mark",i.jumpVIMark),h("<Ctrl-'>","#10Jump to vim-like mark in new tab.",(function(e){i.jumpVIMark(e)})),h("w","#2Switch frames",(function(){window===top&&a.create("iframe",(function(e){e.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),i.highlightElement(e),e.contentWindow.focus()}))||i.rotateFrame()})),h("yg","#7Capture current page",(function(){c.toggleStatus(!1),setTimeout((function(){(0,t._P)("captureVisibleTab",null,(function(t){c.toggleStatus(!0),(0,e.U)("<img src='{0}' />".format(t.dataUrl))}))}),500)})),h("gu","#4Go up one path in the URL",(function(){var e=location.pathname;if(e.length>1){var n=(e=e.endsWith("/")?e.substr(0,e.length-1):e).lastIndexOf("/"),o=t._P.repeats;for(t._P.repeats=1;o-- >1;){var r=e.lastIndexOf("/",n-1);if(-1===r)break;n=r}e=e.substr(0,n)}window.location.href=location.origin+e})),h(";m","#1mouse out last element",(function(){a.mouseoutLastElement()})),h(";pp","#7Paste html on current page",(function(){o.read((function(t){document.documentElement.removeAttributes(),document.body.removeAttributes(),(0,e.gV)(document.head,"<title>"+new Date+" updated by Surfingkeys</title>"),(0,e.gV)(document.body,t.data)}))})),h(";t","Translate selected text with google",_),g("t","#9Translate selected text with google",_),h("O","#1Open detected links from text",(function(){a.create(t.GZ.conf.clickablePat,(function(e){window.location.assign(e[2])}),{statusLine:"Open detected links from text"})})),h(".","#0Repeat last action",(function(){const e=t.GZ.conf.lastKeys;i.feedkeys(e[0]);for(var n=e.slice(1),o=0;o<n.length;o++){var r=n[o].split("\t");if("Hints"===r[0]){function e(){var e=r[1];return function(){a.feedkeys(e)}}setTimeout(e(),120+100*o)}}}),{repeatIgnore:!0}),h("f","#1Open a link, press SHIFT to flip overlapped hints, hold SPACE to hide hints",(function(){a.create("",a.dispatchMouseClick)}),{repeatIgnore:!0}),h("v","#9Toggle visual mode",(function(){s.toggle()}),{repeatIgnore:!0}),h("n","#9Next found text",(function(){s.next(!1)}),{repeatIgnore:!0}),h("N","#9Previous found text",(function(){s.next(!0)}),{repeatIgnore:!0}),h(";fs","#1Display hints to focus scrollable elements",(function(){a.create(i.refreshScrollableElements(),a.dispatchMouseClick)})),g("q","#9Translate word under cursor",(function(){var n=(0,e.lI)();l.readText(n);var o=s.getCursorPixelPos();c.performInlineQuery(n,{top:o.top,left:o.left,height:o.height,width:o.width},(function(e,n){(0,t.VX)("showBubble",[e,n,!0])}))})),h("cq","#7Query word with Hints",(function(){a.create(t.GZ.conf.textAnchorPat,(function(n){var o,r,i,a=n[2].trim().replace(/[^A-z].*$/,""),s=(0,e.t_)(n[0],n[1],n[2].length);void 0!==document.dictEnabled?document.dictEnabled&&window.postMessage({dictorium_data:{type:"OpenDictoriumQuery",word:a,sentence:(o=n[0],r=n[1],i="",(0,e.Sn)((function(e){e.setPosition(o,r),e.modify("extend","backward","sentence"),e.collapseToStart(),e.modify("extend","forward","sentence"),i=e.toString()})),i.replace(/\n/g,"")),pos:s,source:window.location.href}}):c.performInlineQuery(a,{top:s.top,left:s.left,height:s.height,width:s.width},(function(e,n){(0,t.VX)("showBubble",[e,n,!1])}))}))})),{RUNTIME:t._P,aceVimMap:function(e,n,o){(0,t.VX)("addVimMap",[e,n,o])},addVimMapKey:function(){(0,t.VX)("addVimKeyMap",Array.from(arguments))},addSearchAlias:function(e,t,n,o,r,i,a,s){if(function(e,t,n,o,r,i){c.addSearchAlias(e,t,n,o,r,i)}(e,t,n,r,i,s),!(s?.skipMaps??!1)){h((o||"s")+e,"#6Search selected with "+t,u),h("o"+e,"#8Open Search with alias "+e,(()=>{c.openOmnibar({type:"SearchEngine",extra:e})})),g((o||"s")+e,"",u),h((o||"s")+(a||"o")+e,"",d),g((o||"s")+(a||"o")+e,"",d);var l=e.toUpperCase();if(l!==e){function t(){b(n,!1,!0,e)}function r(){b(n,!0,!0,e)}h((o||"s")+l,"",t),g((o||"s")+l,"",t),h((o||"s")+(a||"o")+l,"",r),g((o||"s")+(a||"o")+l,"",r)}}function u(){b(n)}function d(){b(n,!0)}},cmap:function(e,n,o,r){d(o)&&(0,t.VX)("addMapkey",["Omnibar",e,n])},imap:function(t,n,o,i){d(o)&&(0,e.t6)(r,t,n)},imapkey:y,insertJS:e.Ru,isElementPartiallyInViewport:e.w1,getBrowserName:e.g_,getClickableElements:e.kE,getFormData:function(e,t){var n=new FormData(e);if("json"===t){var o={};return n.forEach((function(e,t){if(o.hasOwnProperty(t)){if(e.length){var n=o[t];"Array"===n.constructor.name?n.push(e):(o[t]=[],n.length&&o[t].push(n),o[t].push(e))}}else o[t]=e})),o}return new URLSearchParams(n).toString()},map:function(o,r,a,s){if(d(a))if(":"===r[0]){var l=r.substr(1),p=u((function(){c.executeCommand(l)}),s?(0,e.Qe)({annotation:s}):null,!1);i.mappings.add(n.Z.encodeKeystroke(o),p)}else!(0,e.t6)(i,o,r)&&r in f.specialKeys?(f.specialKeys[r].push(o),(0,t.VX)("addMapkey",["Mode",o,r])):(0,e.sY)("warn",`${r} not found in normal mode.`)},unmap:w,unmapAllExcept:function(e,t){d(t)&&[i,r].forEach((function(t){for(var o=new m,r=0,i=(e=e||[]).length;r<i;r++){var a=n.Z.encodeKeystroke(e[r]),s=t.mappings.find(a);s&&o.add(a,s.meta)}delete t.mappings,t.mappings=o,t.map_node=o}))},iunmap:function(e,t){d(t)&&r.mappings.remove(n.Z.encodeKeystroke(e))},vunmap:v,mapkey:h,readText:l.readText,removeSearchAlias:function(e,t,n){!function(e){c.removeSearchAlias(e)}(e),w((t||"s")+e),w("o"+e),v((t||"s")+e),w((t||"s")+(n||"o")+e),v((t||"s")+(n||"o")+e);var o=e.toUpperCase();o!==e&&(w((t||"s")+o),v((t||"s")+o),w((t||"s")+(n||"o")+o),v((t||"s")+(n||"o")+o))},searchSelectedWith:b,tabOpenLink:e.qF,vmap:function(t,n,o,r){d(o)&&(0,e.t6)(s,t,n)},vmapkey:g,Clipboard:o,Normal:{feedkeys:i.feedkeys,jumpVIMark:i.jumpVIMark,passThrough:i.passThrough,scroll:i.scroll},Hints:{click:a.click,create:a.create,dispatchMouseClick:a.dispatchMouseClick,style:a.style,setNumeric:a.setNumeric,setCharacters:a.setCharacters},Visual:{style:s.style},Front:{openOmnibar:c.openOmnibar,registerInlineQuery:c.registerInlineQuery,showEditor:c.showEditor,getUsage:c.getUsage,showBanner:e.mU,showPopup:e.U}}};var x=__webpack_require__(34),S=__webpack_require__.n(x);function C(n,o,r){for(var i in r)t.GZ.conf.hasOwnProperty(i)&&(t.GZ.conf[i]=r[i]);if("findHistory"in r&&(t.GZ.conf.lastQuery=r.findHistory.length?r.findHistory[0]:""),!r.showAdvanced&&(r.basicMappings&&function(e,t,n){const o=new Set(Object.keys(n)),r={};for(const i in n){const a=n[i];if(o.has(a)){const e=t.mappings.find(a);e&&(r[a]=e.meta)}""===a?t.mappings.remove(i):r.hasOwnProperty(i)?t.mappings.add(a,r[i]):e.map(a,i)}}(n,o,r.basicMappings),r.disabledSearchAliases))for(const e in r.disabledSearchAliases)n.removeSearchAlias(e);if(r.showAdvanced&&"snippets"in r&&r.snippets&&!(0,e.c)()){var a=function(e,t){var n={settings:{},error:""};try{new Function("settings","api",t)(n.settings,e)}catch(e){n.error=e.toString()}return n}(n,r.snippets);if(""!==a.error&&(window===top?(0,e.U)("[SurfingKeys] Error found in settings: "+a.error):console.log("[SurfingKeys] Error found in settings({0}): {1}".format(window.location.href,a.error))),!function(e){for(var t in e)return!1;return!0}(a.settings)){for(var i in(0,t.VX)("setUserSettings",JSON.parse(JSON.stringify(a.settings))),a.settings)t.GZ.conf.hasOwnProperty(i)&&(t.GZ.conf[i]=a.settings[i],delete a.settings[i]);Object.keys(a.settings).length>0&&window===top&&(0,t._P)("updateSettings",{scope:"snippets",settings:a.settings})}}if(t.GZ.conf.showProxyInStatusBar&&"proxyMode"in r){var s=r.proxyMode;-1!==["byhost","always"].indexOf(r.proxyMode)&&(s="{0}: {1}".format(r.proxyMode,r.proxy)),(0,t.VX)("showStatus",[3,s])}(0,t._P)("getDisabled",{blocklistPattern:t.GZ.conf.blocklistPattern?t.GZ.conf.blocklistPattern.toJSON():""},(function(e){e.disabled?o.disable():"application/pdf"!==document.contentType||e.noPdfViewer?o.enable():N.usePdfViewer(),window===top&&(0,t._P)("setSurfingkeysIcon",{status:e.disabled})}))}function T(){const e=b(),n=y(),o=h(n);o.enter(),g(o);const r=v(n,o),i=w(e,r),a=_(n,o,r,i,N),s=E(e,n,o,r,i,a,N);return S()(s),"function"==typeof N.plugin&&N.plugin({front:a}),(0,t.VX)("defaultSettingsLoaded",{normal:o,api:s}),(0,t._P)("getSettings",null,(function(e){var n=e.settings;C(s,o,n),(0,t.VX)("userSettingsLoaded",{settings:n,api:s,front:a})})),{normal:o,front:a,api:s}}function O(n){if(window.frameId=(0,e.Dv)(),t.GZ.on("settingsUpdated",(e=>{var t=e.settings;C(n.api,n.normal,t)})),t.GZ.conf.stealFocusOnLoad&&!(0,e.c)()&&document.body&&document.body.childElementCount>1){var o=(0,e.iw)();o&&o.blur()}}let N;window.getFrameId=function(){return!window.frameId&&window.innerWidth>16&&window.innerHeight>16&&document.body&&document.body.childElementCount>0&&-1===t.GZ.conf.ignoredFrameHosts.indexOf(window.origin)&&(!window.frameElement||parseInt("0"+getComputedStyle(window.frameElement).zIndex)>=0&&window.frameElement.offsetWidth>16&&window.frameElement.offsetWidth>16)&&O(T()),window.frameId},f.init(window===top?void 0:()=>{window.addEventListener("focus",(()=>{getFrameId()}),{once:!0})}),N={usePdfViewer:function(){window.location.replace(chrome.extension.getURL("/pages/pdf_viewer.html")+"?r="+document.URL)},readText:function(n,o){var r=(o=o||{enqueue:!0,voiceName:t.GZ.conf.defaultVoice}).verbose,i=/[\s\u00a0]/g,a=(r=o.verbose,o.onEnd);delete o.verbose,delete o.onEnd,(0,t._P)("read",{content:n,options:o},(function(o){if(r)if("start"===o.ttsEvent.type)(0,e.U)(n);else if("word"===o.ttsEvent.type){i.lastIndex=o.ttsEvent.charIndex;var s,c=i.exec(n);s=c?n.substr(0,o.ttsEvent.charIndex)+"<font style='font-weight: bold; text-decoration: underline'>"+n.substr(o.ttsEvent.charIndex,c.index-o.ttsEvent.charIndex+1)+"</font>"+n.substr(c.index):n.substr(0,o.ttsEvent.charIndex)+"<font style='font-weight: bold; text-decoration: underline'>"+n.substr(o.ttsEvent.charIndex)+"</font>",(0,e.U)(s)}else"end"===o.ttsEvent.type&&(0,t.VX)("hidePopup");return!a||"end"!==o.ttsEvent.type&&"interrupted"!==o.ttsEvent.type||a(),"end"!==o.ttsEvent.type}))}}||{usePdfViewer:()=>{},readText:()=>{}},window===top?new Promise(((o,r)=>{window.location.href===chrome.extension.getURL("/pages/options.html")?import("./pages/options.js").then((r=>{r.default(t._P,n.Z,f,e.hm,e.g_,e.Ak,e.n8,e.x0,e.gV,e.mU),o(T())})):o(T())})).then((e=>{O(e),t.GZ.on("titleChanged",(function(){f.checkEventListener((()=>{e.front.detach(),O(e=T()),e.front.attach()}))})),t.GZ.on("tabActivated",(function(){e.front.attach()})),t.GZ.on("tabDeactivated",(function(){e.front.detach()})),window._setScrollPos=function(e,t){document.scrollingElement.scrollLeft=e,document.scrollingElement.scrollTop=t},(0,t._P)("tabURLAccessed",{title:document.title,url:window.location.href},(function(n){if(n.active&&e.front.attach(),n.index>0){var o=function(){i=!0,document.title=r+" "+a},r=n.index,i=!1,a=document.title;new MutationObserver((function(e){i?i=!1:(a=document.title,o())})).observe(document.querySelector("title"),{childList:!0}),o(),t.GZ.on("tabIndexChange",(function(e,t,n){e.index!==r&&(r=e.index,o())}))}}))})):t.GZ.getTopURL((function(e){0!==e.indexOf(chrome.extension.getURL("/"))&&"dictorium:"!==window.location.protocol||O(T())}))})()})();