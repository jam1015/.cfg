(()=>{var __webpack_modules__={234:function(e){
/*! @license DOMPurify 2.3.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.4/LICENSE */
e.exports=function(){"use strict";function e(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var t=Object.hasOwnProperty,n=Object.setPrototypeOf,o=Object.isFrozen,r=Object.getPrototypeOf,i=Object.getOwnPropertyDescriptor,a=Object.freeze,s=Object.seal,c=Object.create,u="undefined"!=typeof Reflect&&Reflect,l=u.apply,d=u.construct;l||(l=function(e,t,n){return e.apply(t,n)}),a||(a=function(e){return e}),s||(s=function(e){return e}),d||(d=function(t,n){return new(Function.prototype.bind.apply(t,[null].concat(e(n))))});var f=x(Array.prototype.forEach),m=x(Array.prototype.pop),p=x(Array.prototype.push),h=x(String.prototype.toLowerCase),g=x(String.prototype.match),b=x(String.prototype.replace),y=x(String.prototype.indexOf),v=x(String.prototype.trim),_=x(RegExp.prototype.test),w=E(TypeError);function x(e){return function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return l(e,t,o)}}function E(e){return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return d(e,n)}}function k(e,t){n&&n(e,null);for(var r=t.length;r--;){var i=t[r];if("string"==typeof i){var a=h(i);a!==i&&(o(t)||(t[r]=a),i=a)}e[i]=!0}return e}function T(e){var n=c(null),o=void 0;for(o in e)l(t,e,[o])&&(n[o]=e[o]);return n}function C(e,t){for(;null!==e;){var n=i(e,t);if(n){if(n.get)return x(n.get);if("function"==typeof n.value)return x(n.value)}e=r(e)}function o(e){return console.warn("fallback value for",e),null}return o}var A=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),S=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=a(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),L=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),I=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),M=a(["#text"]),U=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),N=a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),P=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),D=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F=s(/\{\{[\s\S]*|[\s\S]*\}\}/gm),B=s(/<%[\s\S]*|[\s\S]*%>/gm),q=s(/^data-[\-\w.\u00B7-\uFFFF]/),H=s(/^aria-[\-\w]+$/),W=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),j=s(/^(?:\w+script|data):/i),K=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function z(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var V=function(){return"undefined"==typeof window?null:window},$=function(e,t){if("object"!==(void 0===e?"undefined":G(e))||"function"!=typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(o)&&(n=t.currentScript.getAttribute(o));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V(),t=function(e){return Z(e)};if(t.version="2.3.4",t.removed=[],!e||!e.document||9!==e.document.nodeType)return t.isSupported=!1,t;var n=e.document,o=e.document,r=e.DocumentFragment,i=e.HTMLTemplateElement,s=e.Node,c=e.Element,u=e.NodeFilter,l=e.NamedNodeMap,d=void 0===l?e.NamedNodeMap||e.MozNamedAttrMap:l,x=e.HTMLFormElement,E=e.DOMParser,Q=e.trustedTypes,J=c.prototype,Y=C(J,"cloneNode"),X=C(J,"nextSibling"),ee=C(J,"childNodes"),te=C(J,"parentNode");if("function"==typeof i){var ne=o.createElement("template");ne.content&&ne.content.ownerDocument&&(o=ne.content.ownerDocument)}var oe=$(Q,n),re=oe&&Pe?oe.createHTML(""):"",ie=o,ae=ie.implementation,se=ie.createNodeIterator,ce=ie.createDocumentFragment,ue=ie.getElementsByTagName,le=n.importNode,de={};try{de=T(o).documentMode?o.documentMode:{}}catch(e){}var fe={};t.isSupported="function"==typeof te&&ae&&void 0!==ae.createHTMLDocument&&9!==de;var me=F,pe=B,he=q,ge=H,be=j,ye=K,ve=W,_e=null,we=k({},[].concat(z(A),z(S),z(R),z(L),z(M))),xe=null,Ee=k({},[].concat(z(U),z(N),z(P),z(D))),ke=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Te=null,Ce=null,Ae=!0,Se=!0,Re=!1,Oe=!1,Le=!1,Ie=!1,Me=!1,Ue=!1,Ne=!1,Pe=!1,De=!0,Fe=!0,Be=!1,qe={},He=null,We=k({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),je=null,Ke=k({},["audio","video","img","source","image","track"]),Ge=null,ze=k({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ve="http://www.w3.org/1998/Math/MathML",$e="http://www.w3.org/2000/svg",Ze="http://www.w3.org/1999/xhtml",Qe=Ze,Je=!1,Ye=void 0,Xe=["application/xhtml+xml","text/html"],et="text/html",tt=void 0,nt=null,ot=o.createElement("form"),rt=function(e){return e instanceof RegExp||e instanceof Function},it=function(e){nt&&nt===e||(e&&"object"===(void 0===e?"undefined":G(e))||(e={}),e=T(e),_e="ALLOWED_TAGS"in e?k({},e.ALLOWED_TAGS):we,xe="ALLOWED_ATTR"in e?k({},e.ALLOWED_ATTR):Ee,Ge="ADD_URI_SAFE_ATTR"in e?k(T(ze),e.ADD_URI_SAFE_ATTR):ze,je="ADD_DATA_URI_TAGS"in e?k(T(Ke),e.ADD_DATA_URI_TAGS):Ke,He="FORBID_CONTENTS"in e?k({},e.FORBID_CONTENTS):We,Te="FORBID_TAGS"in e?k({},e.FORBID_TAGS):{},Ce="FORBID_ATTR"in e?k({},e.FORBID_ATTR):{},qe="USE_PROFILES"in e&&e.USE_PROFILES,Ae=!1!==e.ALLOW_ARIA_ATTR,Se=!1!==e.ALLOW_DATA_ATTR,Re=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Oe=e.SAFE_FOR_TEMPLATES||!1,Le=e.WHOLE_DOCUMENT||!1,Ue=e.RETURN_DOM||!1,Ne=e.RETURN_DOM_FRAGMENT||!1,Pe=e.RETURN_TRUSTED_TYPE||!1,Me=e.FORCE_BODY||!1,De=!1!==e.SANITIZE_DOM,Fe=!1!==e.KEEP_CONTENT,Be=e.IN_PLACE||!1,ve=e.ALLOWED_URI_REGEXP||ve,Qe=e.NAMESPACE||Ze,e.CUSTOM_ELEMENT_HANDLING&&rt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&rt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ye=Ye=-1===Xe.indexOf(e.PARSER_MEDIA_TYPE)?et:e.PARSER_MEDIA_TYPE,tt="application/xhtml+xml"===Ye?function(e){return e}:h,Oe&&(Se=!1),Ne&&(Ue=!0),qe&&(_e=k({},[].concat(z(M))),xe=[],!0===qe.html&&(k(_e,A),k(xe,U)),!0===qe.svg&&(k(_e,S),k(xe,N),k(xe,D)),!0===qe.svgFilters&&(k(_e,R),k(xe,N),k(xe,D)),!0===qe.mathMl&&(k(_e,L),k(xe,P),k(xe,D))),e.ADD_TAGS&&(_e===we&&(_e=T(_e)),k(_e,e.ADD_TAGS)),e.ADD_ATTR&&(xe===Ee&&(xe=T(xe)),k(xe,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&k(Ge,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(He===We&&(He=T(He)),k(He,e.FORBID_CONTENTS)),Fe&&(_e["#text"]=!0),Le&&k(_e,["html","head","body"]),_e.table&&(k(_e,["tbody"]),delete Te.tbody),a&&a(e),nt=e)},at=k({},["mi","mo","mn","ms","mtext"]),st=k({},["foreignobject","desc","title","annotation-xml"]),ct=k({},S);k(ct,R),k(ct,O);var ut=k({},L);k(ut,I);var lt=function(e){var t=te(e);t&&t.tagName||(t={namespaceURI:Ze,tagName:"template"});var n=h(e.tagName),o=h(t.tagName);if(e.namespaceURI===$e)return t.namespaceURI===Ze?"svg"===n:t.namespaceURI===Ve?"svg"===n&&("annotation-xml"===o||at[o]):Boolean(ct[n]);if(e.namespaceURI===Ve)return t.namespaceURI===Ze?"math"===n:t.namespaceURI===$e?"math"===n&&st[o]:Boolean(ut[n]);if(e.namespaceURI===Ze){if(t.namespaceURI===$e&&!st[o])return!1;if(t.namespaceURI===Ve&&!at[o])return!1;var r=k({},["title","style","font","a","script"]);return!ut[n]&&(r[n]||!ct[n])}return!1},dt=function(e){p(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=re}catch(t){e.remove()}}},ft=function(e,n){try{p(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch(e){p(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),"is"===e&&!xe[e])if(Ue||Ne)try{dt(n)}catch(e){}else try{n.setAttribute(e,"")}catch(e){}},mt=function(e){var t=void 0,n=void 0;if(Me)e="<remove></remove>"+e;else{var r=g(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===Ye&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var i=oe?oe.createHTML(e):e;if(Qe===Ze)try{t=(new E).parseFromString(i,Ye)}catch(e){}if(!t||!t.documentElement){t=ae.createDocument(Qe,"template",null);try{t.documentElement.innerHTML=Je?"":i}catch(e){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(o.createTextNode(n),a.childNodes[0]||null),Qe===Ze?ue.call(t,Le?"html":"body")[0]:Le?t.documentElement:a},pt=function(e){return se.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},ht=function(e){return e instanceof x&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},gt=function(e){return"object"===(void 0===s?"undefined":G(s))?e instanceof s:e&&"object"===(void 0===e?"undefined":G(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},bt=function(e,n,o){fe[e]&&f(fe[e],(function(e){e.call(t,n,o,nt)}))},yt=function(e){var n=void 0;if(bt("beforeSanitizeElements",e,null),ht(e))return dt(e),!0;if(g(e.nodeName,/[\u0080-\uFFFF]/))return dt(e),!0;var o=tt(e.nodeName);if(bt("uponSanitizeElement",e,{tagName:o,allowedTags:_e}),!gt(e.firstElementChild)&&(!gt(e.content)||!gt(e.content.firstElementChild))&&_(/<[/\w]/g,e.innerHTML)&&_(/<[/\w]/g,e.textContent))return dt(e),!0;if("select"===o&&_(/<template/i,e.innerHTML))return dt(e),!0;if(!_e[o]||Te[o]){if(Fe&&!He[o]){var r=te(e)||e.parentNode,i=ee(e)||e.childNodes;if(i&&r)for(var a=i.length-1;a>=0;--a)r.insertBefore(Y(i[a],!0),X(e))}if(!Te[o]&&_t(o)){if(ke.tagNameCheck instanceof RegExp&&_(ke.tagNameCheck,o))return!1;if(ke.tagNameCheck instanceof Function&&ke.tagNameCheck(o))return!1}return dt(e),!0}return e instanceof c&&!lt(e)?(dt(e),!0):"noscript"!==o&&"noembed"!==o||!_(/<\/no(script|embed)/i,e.innerHTML)?(Oe&&3===e.nodeType&&(n=e.textContent,n=b(n,me," "),n=b(n,pe," "),e.textContent!==n&&(p(t.removed,{element:e.cloneNode()}),e.textContent=n)),bt("afterSanitizeElements",e,null),!1):(dt(e),!0)},vt=function(e,t,n){if(De&&("id"===t||"name"===t)&&(n in o||n in ot))return!1;if(Se&&!Ce[t]&&_(he,t));else if(Ae&&_(ge,t));else if(!xe[t]||Ce[t]){if(!(_t(e)&&(ke.tagNameCheck instanceof RegExp&&_(ke.tagNameCheck,e)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(e))&&(ke.attributeNameCheck instanceof RegExp&&_(ke.attributeNameCheck,t)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(t))||"is"===t&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&_(ke.tagNameCheck,n)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))))return!1}else if(Ge[t]);else if(_(ve,b(n,ye,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==y(n,"data:")||!je[e])if(Re&&!_(be,b(n,ye,"")));else if(n)return!1;return!0},_t=function(e){return e.indexOf("-")>0},wt=function(e){var n=void 0,o=void 0,r=void 0,i=void 0;bt("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xe};for(i=a.length;i--;){var c=n=a[i],u=c.name,l=c.namespaceURI;if(o=v(n.value),r=tt(u),s.attrName=r,s.attrValue=o,s.keepAttr=!0,s.forceKeepAttr=void 0,bt("uponSanitizeAttribute",e,s),o=s.attrValue,!s.forceKeepAttr&&(ft(u,e),s.keepAttr))if(_(/\/>/i,o))ft(u,e);else{Oe&&(o=b(o,me," "),o=b(o,pe," "));var d=tt(e.nodeName);if(vt(d,r,o))try{l?e.setAttributeNS(l,u,o):e.setAttribute(u,o),m(t.removed)}catch(e){}}}bt("afterSanitizeAttributes",e,null)}},xt=function e(t){var n=void 0,o=pt(t);for(bt("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)bt("uponSanitizeShadowNode",n,null),yt(n)||(n.content instanceof r&&e(n.content),wt(n));bt("afterSanitizeShadowDOM",t,null)};return t.sanitize=function(o,i){var a=void 0,c=void 0,u=void 0,l=void 0,d=void 0;if((Je=!o)&&(o="\x3c!--\x3e"),"string"!=typeof o&&!gt(o)){if("function"!=typeof o.toString)throw w("toString is not a function");if("string"!=typeof(o=o.toString()))throw w("dirty is not a string, aborting")}if(!t.isSupported){if("object"===G(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof o)return e.toStaticHTML(o);if(gt(o))return e.toStaticHTML(o.outerHTML)}return o}if(Ie||it(i),t.removed=[],"string"==typeof o&&(Be=!1),Be);else if(o instanceof s)1===(c=(a=mt("\x3c!----\x3e")).ownerDocument.importNode(o,!0)).nodeType&&"BODY"===c.nodeName||"HTML"===c.nodeName?a=c:a.appendChild(c);else{if(!Ue&&!Oe&&!Le&&-1===o.indexOf("<"))return oe&&Pe?oe.createHTML(o):o;if(!(a=mt(o)))return Ue?null:re}a&&Me&&dt(a.firstChild);for(var f=pt(Be?o:a);u=f.nextNode();)3===u.nodeType&&u===l||yt(u)||(u.content instanceof r&&xt(u.content),wt(u),l=u);if(l=null,Be)return o;if(Ue){if(Ne)for(d=ce.call(a.ownerDocument);a.firstChild;)d.appendChild(a.firstChild);else d=a;return xe.shadowroot&&(d=le.call(n,d,!0)),d}var m=Le?a.outerHTML:a.innerHTML;return Oe&&(m=b(m,me," "),m=b(m,pe," ")),oe&&Pe?oe.createHTML(m):m},t.setConfig=function(e){it(e),Ie=!0},t.clearConfig=function(){nt=null,Ie=!1},t.isValidAttribute=function(e,t,n){nt||it({});var o=tt(e),r=tt(t);return vt(o,r,n)},t.addHook=function(e,t){"function"==typeof t&&(fe[e]=fe[e]||[],p(fe[e],t))},t.removeHook=function(e){fe[e]&&m(fe[e])},t.removeHooks=function(e){fe[e]&&(fe[e]=[])},t.removeAllHooks=function(){fe={}},t}return Z()}()},495:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const o={keyCodesMac:{Minus:["-","_"],Equal:["=","+"],BracketLeft:["[","{"],BracketRight:["]","}"],Backslash:["\\","|"],Semicolon:[";",":"],Quote:["'",'"'],Comma:[",","<"],Period:[".",">"],Slash:["/","?"]},keyCodes:{ESC:27,backspace:8,deleteKey:46,enter:13,ctrlEnter:10,space:32,shiftKey:16,ctrlKey:17,f1:112,f12:123,comma:188,tab:9,downArrow:40,upArrow:38},modifierKeys:{16:"Shift",17:"Ctrl",18:"Alt",91:"Meta",92:"Meta",93:"ContextMenu",229:"Process"},keyNames:{8:"Backspace",9:"Tab",12:"NumLock",27:"Esc",32:"Space",46:"Delete"},keyIdentifierCorrectionMap:{"U+00C0":["U+0060","U+007E"],"U+0030":["U+0030","U+0029"],"U+0031":["U+0031","U+0021"],"U+0032":["U+0032","U+0040"],"U+0033":["U+0033","U+0023"],"U+0034":["U+0034","U+0024"],"U+0035":["U+0035","U+0025"],"U+0036":["U+0036","U+005E"],"U+0037":["U+0037","U+0026"],"U+0038":["U+0038","U+002A"],"U+0039":["U+0039","U+0028"],"U+00BD":["U+002D","U+005F"],"U+00BB":["U+003D","U+002B"],"U+00DB":["U+005B","U+007B"],"U+00DD":["U+005D","U+007D"],"U+00DC":["U+005C","U+007C"],"U+00BA":["U+003B","U+003A"],"U+00DE":["U+0027","U+0022"],"U+00BC":["U+002C","U+003C"],"U+00BE":["U+002E","U+003E"],"U+00BF":["U+002F","U+003F"]}};var r="Windows";function i(e,t){var n,r=0;return-1!==e.indexOf("Ctrl-")&&(r|=1),-1!==e.indexOf("Alt-")&&(r|=2),-1!==e.indexOf("Meta-")&&(r|=4),-1!==e.indexOf("Shift-")&&(r|=8),n=8192+((n=t.length>1?256+o.specialKeys.indexOf(t):t.charCodeAt(0))<<4)+r,String.fromCharCode(n)}"undefined"!=typeof navigator&&(-1!==navigator.platform.indexOf("Mac")?r="Mac":-1!==navigator.userAgent.indexOf("Linux")&&(r="Linux")),o.getKeyChar=function(e){var t;if(e.keyCode in this.modifierKeys)t="";else{if(this.keyNames.hasOwnProperty(e.keyCode))t="{0}".format(this.keyNames[e.keyCode]);else if(t=e.key||"",-1!==["Shift","Meta","Alt","Ctrl"].indexOf(t)&&(t=""),t)t.charCodeAt(0)>127||"Dead"===t?e.keyCode<127?(t=String.fromCharCode(e.keyCode),t=e.shiftKey?t:t.toLowerCase()):this.keyCodesMac.hasOwnProperty(e.code)&&(t=this.keyCodesMac[e.code][e.shiftKey?1:0]):"Unidentified"===t&&(t="");else if(e.keyIdentifier)if("U+"!==e.keyIdentifier.slice(0,2))t="{0}".format(e.keyIdentifier);else{var n=e.keyIdentifier;if(("Windows"===r||"Linux"===r)&&this.keyIdentifierCorrectionMap[n]){var i=this.keyIdentifierCorrectionMap[n];n=e.shiftKey?i[1]:i[0]}var a="0x"+n.substring(2);t=String.fromCharCode(parseInt(a)),t=e.shiftKey?t:t.toLowerCase()}e.shiftKey&&t.length>1&&(t="Shift-"+t),t.length>0&&(e.metaKey&&(t="Meta-"+t),e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t)),t.length>1&&(t="<{0}>".format(t))}return o.decodeKeystroke(o.encodeKeystroke(t))===t&&(t=o.encodeKeystroke(t)),t},o.isWordChar=function(e){return e.keyCode<123&&e.keyCode>=97||e.keyCode<91&&e.keyCode>=65||e.keyCode<58&&e.keyCode>=48},o.encodeKeystroke=function(e){for(var t,n=/<(?:Ctrl-)?(?:Alt-)?(?:Meta-)?(?:Shift-)?([^>]+|.)>/g,o="",r=0;null!==(t=n.exec(e));)o+=e.substr(r,t.index-r),o+=i(t[0],t[1]),r=n.lastIndex;return o+=e.substr(r)},o.specialKeys=["Esc","Space","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Backspace","Enter","Tab","Delete","End","Home","Insert","NumLock","PageDown","PageUp","Pause","ScrollLock","CapsLock","PrintScreen","Escape","Hyper"],o.decodeKeystroke=function(e){for(var t="",n=0;n<e.length;n++){var r=e[n].charCodeAt(0);if(r>8192){var i=(r-=8192)%4096>>4,a=15&r;r=r>>12?o.specialKeys[i%256]:String.fromCharCode(i),8&a&&(r="Shift-"+r),4&a&&(r="Meta-"+r),2&a&&(r="Alt-"+r),1&a&&(r="Ctrl-"+r),t+="<"+r+">"}else t+=e[n]}return t};const a=o},580:(e,t,n)=>{"use strict";function o(e,t){document.dispatchEvent(new CustomEvent(`surfingkeys:${e}`,{detail:t}))}function r(e,t,n){(t=t||{}).action=e,-1!==["closeTab","nextTab","previousTab","moveTab","reloadTab","setZoom","closeTabLeft","closeTabRight","focusTabByIndex"].indexOf(e)&&(t.repeats=r.repeats,r.repeats=1);try{t.needResponse=void 0!==n,chrome.runtime.sendMessage(t,n),"read"===e&&c.on("onTtsEvent",n)}catch(e){o("showPopup",["[runtime exception] "+e])}}n.d(t,{_P:()=>r,VX:()=>o,GZ:()=>c});var i,a,s,c=(i={conf:{autoSpeakOnInlineQuery:!1,lastKeys:"",blocklistPattern:void 0,smartCase:!0,caseSensitive:!1,clickablePat:/(https?:\/\/|thunder:\/\/|magnet:)\S+/gi,clickableSelector:"",editableSelector:"div.CodeMirror-scroll,div.ace_content",cursorAtEndOfInput:!0,defaultSearchEngine:"g",defaultVoice:"Daniel",editableBodyCare:!0,enableAutoFocus:!0,enableEmojiInsertion:!1,experiment:!1,focusFirstCandidate:!1,focusOnSaved:!0,hintAlign:"center",hintExplicit:!1,hintShiftNonActive:!1,historyMUOrder:!0,language:void 0,lastQuery:"",modeAfterYank:"",nextLinkRegex:/(\b(next)\b)|下页|下一页|后页|下頁|下一頁|後頁|>>|»/i,digitForRepeat:!0,omnibarMaxResults:10,omnibarHistoryCacheSize:100,omnibarPosition:"middle",omnibarSuggestion:!0,omnibarSuggestionTimeout:200,omnibarTabsQuery:{},pageUrlRegex:[],prevLinkRegex:/(\b(prev|previous)\b)|上页|上一页|前页|上頁|上一頁|前頁|<<|«/i,richHintsForKeystroke:1e3,scrollStepSize:70,showModeStatus:!1,showProxyInStatusBar:!1,smartPageBoundary:!1,smoothScroll:!0,startToShowEmoji:2,stealFocusOnLoad:!0,tabsThreshold:9,textAnchorPat:/(^[\n\r\s]*\S{3,}|\b\S{4,})/g,ignoredFrameHosts:["https://tpc.googlesyndication.com"],scrollFriction:0,aceKeybindings:"vim",caretViewport:null,mouseSelectToQuery:[],useNeovim:!1,useLocalMarkdownAPI:!0}},a={},s=new Promise((function(e,t){window===top?e(window.location.href):r("getTopURL",null,(function(t){e(t.url)}))})),i.on=function(e,t){a[e]=t},i.updateHistory=function(e,t){var n=e+"History";r("getSettings",{key:n},(function(e){var o=e.settings[n]||[],i={};"Array"===t.constructor.name?(i[n]=t,r("updateSettings",{settings:i})):t.trim().length&&"."!==t&&((o=o.filter((function(e){return e.trim().length&&e!==t&&"."!==e}))).unshift(t),o.length>50&&o.pop(),i[n]=o,r("updateSettings",{settings:i}))}))},chrome.runtime.onMessage.addListener((function(e,t,n){a[e.subject]&&a[e.subject](e,t,n)})),i.getTopURL=function(e){s.then((function(t){e(t)}))},i.postTopMessage=function(e){s.then((function(t){window===top&&(t=window.location.origin),"null"!==t&&"file://"!==new URL(t).origin||(t="*"),top.postMessage({surfingkeys_data:e},t)}))},i.getCaseSensitive=function(e){return i.conf.caseSensitive||i.conf.smartCase&&/[A-Z]/.test(e)},i)},654:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{sY:()=>LOG,w0:()=>filterByTitleOrUrl});var dompurify__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(234),dompurify__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(dompurify__WEBPACK_IMPORTED_MODULE_0__),_keyboardUtils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(495),_runtime_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(580);function getBrowserName(){if(-1!==window.navigator.userAgent.indexOf("Chrome"))return"Chrome";if(0===window.navigator.vendor.indexOf("Apple Computer, Inc.")){return/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1?"Safari-iOS":"Safari"}return-1!==window.navigator.userAgent.indexOf("Firefox")?"Firefox":"Chrome"}function isInUIFrame(){return 0===document.location.href.indexOf(chrome.extension.getURL("/"))}function timeStampString(e){var t=new Date;return t.setTime(e),t.toLocaleString()}function getDocumentOrigin(){var e=window.location.origin?window.location.origin:"*";return"file://"!==e&&"null"!==e||(e="*"),e}function generateQuickGuid(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function listElements(e,t,n){const o=[];let r;const i=document.createNodeIterator(e,t,null);for(;r=i.nextNode();)n(r)&&o.push(r),r.shadowRoot&&o.push(...listElements(r.shadowRoot,t,n));return o}function isElementVisible(e){return e.offsetHeight>0&&e.offsetWidth>0}function isElementClickable(e){var t="a, button, select, input, textarea, summary, *[onclick], *[contenteditable=true], *.jfk-button, *.goog-flat-menu-button, *[role=button], *[role=link], *[role=menuitem], *[role=option], *[role=switch], *[role=tab], *[role=checkbox], *[role=combobox], *[role=menuitemcheckbox], *[role=menuitemradio]";return _runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.clickableSelector.length&&(t+=", "+_runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.clickableSelector),e.matches(t)||"pointer"===getComputedStyle(e).cursor||"url("===getComputedStyle(e).cursor.substr(0,4)||null!==e.closest("a, *[onclick], *[contenteditable=true], *.jfk-button, *.goog-flat-menu-button")}function showBanner(e,t){(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__.VX)("showBanner",[e,t])}function showPopup(e){(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__.VX)("showPopup",[e])}function dispatchMouseEvent(e,t,n){t.forEach((function(t){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,button:n?1:0});e.dispatchEvent(o)}))}function getRealEdit(e){for(var t=e?e.target:document.activeElement;t&&t.shadowRoot;){if(!t.shadowRoot.activeElement){if(t.shadowRoot.querySelector("input, textarea, select")){t=t.shadowRoot.querySelector("input, textarea, select");break}break}t=t.shadowRoot.activeElement}return t===window&&(t=document.body),t}function toggleQuote(){var e=getRealEdit(),t=e.value;t.match(/^"|"$/)?e.value=t.replace(/^"?(.*?)"?$/,"$1"):e.value='"'+t+'"'}function LOG(e,t){chrome.storage.local.get(["logLevels"],(n=>{const o=n&&n.logLevels||["error"];-1!==["log","warn","error"].indexOf(e)&&-1!==o.indexOf(e)&&console[e](t)}))}function isEditable(e){return e&&!e.disabled&&("textarea"===e.localName||"select"===e.localName||e.isContentEditable||e.matches(_runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.editableSelector)||"input"===e.localName&&/^(?!button|checkbox|file|hidden|image|radio|reset|submit)/i.test(e.type))}function parseQueryString(e){var t={};if(e.length)for(var n=e.split("&"),o=0,r=n.length;o<r;++o){var i=n[o].split("="),a=i[0].toLowerCase(),s=i.length>1?i[1]:null;t[decodeURIComponent(a)]=decodeURIComponent(s)}return t}function reportIssue(e,t){e=encodeURIComponent(e),t="%23%23+Error+details%0A%0A{0}%0A%0ASurfingKeys%3A+{1}%0A%0AChrome%3A+{2}%0A%0AURL%3A+{3}%0A%0A%23%23+Context%0A%0A%2A%2APlease+replace+this+with+a+description+of+how+you+were+using+SurfingKeys.%2A%2A".format(encodeURIComponent(t),chrome.runtime.getManifest().version,encodeURIComponent(navigator.userAgent),encodeURIComponent(window.location.href)),showPopup('<h2>Uh-oh! The SurfingKeys extension encountered a bug.</h2> <p>Please click <a href="https://github.com/brookhong/Surfingkeys/issues/new?title={0}&body={1}" target=_blank>here</a> to start filing a new issue, append a description of how you were using SurfingKeys before this message appeared, then submit it.  Thanks for your help!</p>'.format(e,t))}function scrollIntoViewIfNeeded(e,t){e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():isElementPartiallyInViewport(e,t)||e.scrollIntoView()}function isElementDrawn(e,t){var n=isEditable(e)?1:4;return(t=t||e.getBoundingClientRect()).width>n&&t.height>n}function isElementPartiallyInViewport(e,t){var n=e.getBoundingClientRect(),o=window.innerHeight||document.documentElement.clientHeight,r=window.innerWidth||document.documentElement.clientWidth;return(t||isElementDrawn(e,n))&&n.top<o&&n.bottom>0&&n.left<r&&n.right>0}function getVisibleElements(e){for(var t=Array.from(document.documentElement.getElementsByTagName("*")),n=[],o=0;o<t.length;o++){var r=t[o];if(r.shadowRoot)for(var i=r.shadowRoot.querySelectorAll("*"),a=0;a<i.length;a++)t.push(i[a]);var s=r.getBoundingClientRect();s.top<=window.innerHeight&&s.bottom>=0&&s.left<=window.innerWidth&&s.right>=0&&s.height>0&&"hidden"!==getComputedStyle(r).visibility&&e(r,n)}return n}function actionWithSelectionPreserved(e){var t=document.getSelection(),n=[t.type,t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset],o=document.scrollingElement.scrollTop;e(t),document.scrollingElement.scrollTop=o,"None"===n[0]?t.empty():"Caret"===n[0]?t.setPosition(n[3],n[4]):"Range"===n[0]&&(t.setPosition(n[1],n[2]),t.extend(n[3],n[4]))}function last(e){return e[e.length-1]}function filterAncestors(e){if(0===e.length)return e;var t=[];return e.forEach((function(e,n){if(isExplicitlyRequested(e))t.push(e);else{for(var o=0;o<t.length;o++){if(t[o].contains(e))return void("A"===t[o].tagName&&t[o].href||(t[o]=e));if(t[o].shadowRoot&&t[o].shadowRoot.contains(e))return;if(e.contains(t[o]))return void console.log("skip: ",e,t[o])}t.push(e)}})),t}function getRealRect(e){var t;return 0===e.childElementCount?3===(t=e.getClientRects()).length?t[1]:2===t.length?t[0]:e.getBoundingClientRect():1===e.childElementCount&&e.firstElementChild.textContent?(((t=e.firstElementChild.getBoundingClientRect()).width<4||t.height<4)&&(t=e.getBoundingClientRect()),t):e.getBoundingClientRect()}function isExplicitlyRequested(e){return _runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.clickableSelector&&e.matches(_runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.clickableSelector)}function filterOverlapElements(e){return filterAncestors(e=e.filter((function(e){var t=getRealRect(e);if(e.disabled||e.readOnly||!isElementDrawn(e,t))return!1;if(e.matches("input, textarea, select, form")||"true"===e.contentEditable||isExplicitlyRequested(e))return!0;var n=e.getRootNode().elementFromPoint(t.left+t.width/2,t.top+t.height/2);return!n||n.shadowRoot&&(0===n.childElementCount||n.shadowRoot.contains(e))||n.contains(e)||e.contains(n)})))}function getClickableElements(e,t){return filterOverlapElements(listElements(document.body,NodeFilter.SHOW_ELEMENT,(function(n){return n.offsetHeight&&n.offsetWidth&&"pointer"===getComputedStyle(n).cursor&&(n.matches(e)||t&&(t.test(n.textContent)||t.test(n.getAttribute("aria-label"))))})))}function getTextNodes(e,t,n){var o=["script","style","noscript","surfingkeys_mark"],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){if(!e.data.trim()||!e.parentNode.offsetParent||-1!==o.indexOf(e.parentNode.localName.toLowerCase())||!t.test(e.data))return t.lastIndex=0,NodeFilter.FILTER_REJECT;var n=e.parentNode.getBoundingClientRect();return n.width<4||n.height<4?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1),i=[];if(1===n)i.push(r.firstChild());else if(-1===n)i.push(r.lastChild());else{if(0===n)return r;if(2===n)for(;r.nextNode();)i.push(r.currentNode.parentNode);else for(;r.nextNode();)i.push(r.currentNode)}return i}function getTextNodePos(e,t,n){var o=document.getSelection();o.setBaseAndExtent(e,t,e,n?t+n:e.data.length);var r=o.getRangeAt(0).getClientRects()[0],i={left:-1,top:-1};return r&&r.height>0&&r.width>0&&(i.left=r.left,i.top=r.top,i.width=r.width,i.height=r.height),i}var _focusedRange=document.createRange();function getTextRect(){let e=[];try{let t=arguments[1];for(;0===e.length&&t>=0;)_focusedRange.setStart(arguments[0],t),arguments.length>3?_focusedRange.setEnd(arguments[2],arguments[3]):arguments.length>2?_focusedRange.setEnd(arguments[0],arguments[2]):_focusedRange.setEnd(arguments[0],arguments[1]),e=_focusedRange.getClientRects(),t--}catch(e){return[]}return e}function getNearestWord(e,t){var n=[0,e.length],o=/\W/;t<0?t=0:t>=e.length&&(t=e.length-1);var r=!0;if(o.test(e[t])){var i=0;for(r=!1;!r&&(t>i||t+i<e.length);)r=t-++i>=0&&!o.test(e[t-i])||t+i<e.length&&!o.test(e[t+i]);t=t-i>=0&&!o.test(e[t-i])?t-i:t+i}if(r){for(var a=t,s=t;a>=0&&!o.test(e[a]);)a--;for(;s<e.length&&!o.test(e[s]);)s++;n=[a+1,s-a-1]}return n}var _clickPos=null;function getWordUnderCursor(e){var t=document.getSelection();if(t.focusNode&&t.focusNode.textContent){var n=getNearestWord(t.focusNode.textContent,t.focusOffset),o=getTextRect(t.focusNode,n[0],n[0]+n[1])[0],r=t.focusNode.textContent.substr(n[0],n[1]);if(o&&r&&(!e||_clickPos&&o.has(_clickPos[0],_clickPos[1],0,0)))return r.trim()}return null}function initL10n(e){var t=_runtime_js__WEBPACK_IMPORTED_MODULE_2__.GZ.conf.language||window.navigator.language;"en-US"===t?e((function(e){return e})):fetch(chrome.extension.getURL("pages/l10n.json")).then((function(e){return e.json()})).then((function(n){"object"==typeof n[t]?(n=n[t],e((function(e){return n[e]?n[e]:e}))):e((function(e){return e}))}))}function parseAnnotation(e){var t=e.annotation.match(/#(\d+)(.*)/);return null!==t&&(e.feature_group=parseInt(t[1]),e.annotation=t[2]),e}function mapInMode(e,t,n){n=_keyboardUtils__WEBPACK_IMPORTED_MODULE_1__.Z.encodeKeystroke(n);var o=e.mappings.find(n);if(o){t=_keyboardUtils__WEBPACK_IMPORTED_MODULE_1__.Z.encodeKeystroke(t),e.mappings.remove(t);var r=Object.assign({},o.meta);e.mappings.add(t,r),isInUIFrame()||(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__.VX)("addMapkey",[e.name,t,n])}return o}function getAnnotations(e){return e.getWords().map((function(t){var n=e.find(t).meta;return{word:t,feature_group:n.feature_group,annotation:n.annotation}})).filter((function(e){return e.annotation&&e.annotation.length>0}))}function constructSearchURL(e,t){return e.indexOf("{0}")>0?e.format(t):e+t}function tabOpenLink(e,t){var n;t=t||5,(n=(n="Array"===e.constructor.name?e:e instanceof NodeList?Array.from(e).map((function(e){return e.href})):e.trim().split("\n")).map((function(e){return e.trim()})).filter((function(e){return e.length>0}))).slice(0,t).forEach((function(e){(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__._P)("openLink",{tab:{tabbed:!0},url:e})})),n.length>t&&(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__._P)("queueURLs",{urls:n.slice(t)})}function getElements(e){return listElements(document.body,NodeFilter.SHOW_ELEMENT,(function(t){return t.offsetHeight&&t.offsetWidth&&t.matches(e)}))}function filterInvisibleElements(e){return e.filter((function(e){return e.offsetHeight&&e.offsetWidth&&!e.getAttribute("disabled")&&isElementPartiallyInViewport(e)&&"hidden"!==getComputedStyle(e).visibility}))}function setSanitizedContent(e,t){e.innerHTML=dompurify__WEBPACK_IMPORTED_MODULE_0__.sanitize(t)}function createElementWithContent(e,t,n){var o=document.createElement(e);if(t&&setSanitizedContent(o,t),n)for(var r in n)o.setAttribute(r,n[r]);return o}document.addEventListener("mousedown",(e=>{_clickPos=[e.clientX,e.clientY]})),DOMRect.prototype.has=function(e,t,n,o){return t>this.top-o&&t<this.bottom+o&&e>this.left-n&&e<this.right+n},String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var n=new RegExp("\\{"+t+"\\}","gi");e=e.replace(n,arguments[t])}return e},String.prototype.reverse=function(){return this.split("").reverse().join("")},RegExp.prototype.toJSON=function(){return{source:this.source,flags:this.flags}},Array.prototype.flatMap||(Array.prototype.flatMap=function(e){return Array.prototype.concat.apply([],this.map(e))});var _divForHtmlEncoder=document.createElement("div");function htmlEncode(e){return _divForHtmlEncoder.innerText=e,_divForHtmlEncoder.innerHTML}function httpRequest(e,t){e.method="get",(0,_runtime_js__WEBPACK_IMPORTED_MODULE_2__._P)("request",e,t)}function insertJS(e,t){var n=document.createElement("script");n.type="text/javascript","function"==typeof e?(setSanitizedContent(n,"("+e.toString()+")(window);"),setTimeout((function(){t&&t(),n.remove()}),1)):(n.src=e,n.onload=function(){t&&t(),n.remove()}),document.lastElementChild.appendChild(n)}HTMLElement.prototype.one=function(e,t){this.addEventListener(e,(function n(){t.call(this),this.removeEventListener(e,n)}))},HTMLElement.prototype.show=function(){this.style.display=""},HTMLElement.prototype.hide=function(){this.style.display="none"},HTMLElement.prototype.removeAttributes=function(){for(;this.attributes.length>0;)this.removeAttribute(this.attributes[0].name)},HTMLElement.prototype.containsWithShadow=function(e){const t=[this];for(;t.length;){const n=t.shift();if(n.contains(e))return!0;if(t.push(...n.children),n.shadowRoot){if(n.shadowRoot.contains(e))return!0;t.push(...n.shadowRoot.children)}}return!1},NodeList.prototype.remove=function(){this.forEach((function(e){e.remove()}))},NodeList.prototype.show=function(){this.forEach((function(e){e.show()}))},NodeList.prototype.hide=function(){this.forEach((function(e){e.hide()}))};const flashElem=createElementWithContent("div","",{style:"position: fixed; box-shadow: 0px 0px 4px 2px #63b2ff; background: transparent; z-index: 2140000000"});function flashPressedLink(e,t){var n=getRealRect(e);flashElem.style.left=n.left+"px",flashElem.style.top=n.top+"px",flashElem.style.width=n.width+"px",flashElem.style.height=n.height+"px",document.body.appendChild(flashElem),setTimeout((()=>{flashElem.remove(),t()}),100)}function regexFromString(str,highlight){var rxp=null;if(/^\/.+\/([gimuy]*)$/.test(str))try{rxp=eval(str)}catch(e){rxp=null}if(!rxp&&(/^\/.+$/.test(str)&&(rxp=eval(str+"/i")),!rxp))if(str=str.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),highlight)rxp=new RegExp(str.replace(/\s+/,"|"),"gi");else{var words=str.split(/\s+/).map((function(e){return`(?=.*${e})`})).join("");rxp=new RegExp(`^${words}.*$`,"gi")}return rxp}function filterByTitleOrUrl(e,t){if(t&&t.length){var n=regexFromString(t,!1);e=e.filter((function(e){return n.test(e.title)||n.test(e.url)}))}return e}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(654);function t(e,t,n,o,r){return n=n||{},new Promise((function(t,r){var i=new XMLHttpRequest,a=void 0!==o?"POST":"GET";for(var s in i.open(a,e),n)i.setRequestHeader(s,n[s]);i.onload=function(){200===i.status||0===i.status?t(i.responseText):r(i.status)},i.onerror=r.bind(null,i),i.send(o)})).then(t).catch((function(e){r&&r(e)}))}function n(e,t){var n={};return e.forEach((function(e){n[e]=t})),n}function o(e,t){for(var n in t)e[n]=t[n]}function r(e,t){var n;return t?(t instanceof Array||(t=[t]),n={},t.forEach((function(t){n[t]=e[t]}))):n=e,n}function i(e,n,o){e===chrome.storage.sync?(n.localPath&&delete n.snippets,e.set(n,o)):n.localPath?(delete n.snippets,t(n.localPath,(function(t){n.snippets=t,e.set(n,o)}))):e.set(n,o)}var a=function(){var e={};var n,o="",r=[];function i(e,r){t(`https://api.github.com/gists/${o}/comments`,(function(e){r&&r(e)}),{Authorization:"token "+n},`{"body": "${encodeURIComponent(e)}"}`)}function a(e,r){t(`https://api.github.com/gists/${o}/comments/${e}`,(function(e){var t=JSON.parse(e);r({status:0,content:decodeURIComponent(t.body)})}),{Authorization:"token "+n})}function s(e){t(`https://api.github.com/gists/${o}/comments`,(function(t){r=JSON.parse(t).map((function(e){return e.id})),e(r)}),{Authorization:"token "+n})}function c(e,r,i){t(`https://api.github.com/gists/${o}/comments/${e}`,(function(e){i&&i(e)}),{Authorization:"token "+n},`{"body": "${encodeURIComponent(r)}"}`)}return e.initGist=function(e,r){if(n===e&&""!==o)return o;!function(e,n,o){t("https://api.github.com/gists",(function(r){var i=JSON.parse(r),a="";i.forEach((function(e){e.hasOwnProperty("description")&&e.description===n&&e.files.hasOwnProperty(n)&&(a=e.id)})),""===a?t("https://api.github.com/gists",(function(e){var t=JSON.parse(e);o(t.id)}),{Authorization:"token "+e},`{ "description": "${n}", "public": false, "files": { "${n}": { "content": "${n}" } } }`):o(a)}),{Authorization:"token "+e})}(n=e,"cloudboard",(function(e){o=e,r&&r(o)}))},e.readComment=function(e,t){""===o?t({status:1,content:"Please call initGist first!"}):e>=r.length?s((function(n){e<n.length?a(n[e],t):t({status:1,content:"Register not exists!"})})):a(r[e],t)},e.editComment=function(e,t,n){""===o?n({status:1,content:"Please call initGist first!"}):e>=r.length?s((function(o){if(e<o.length)c(o[e],t,n);else{var r=e-o.length+1;function a(){--r>0?i(".",a):0===r&&i(t,n)}a()}})):c(r[e],t,n)},e}();let s=!1;const c={};c.instance=function t(){return new Promise(((n,o)=>{const r=chrome.runtime.connectNative("surfingkeys"),i=function(){const e=new Uint32Array(8);return window.crypto.getRandomValues(e),Array.from(e).join("")}();r.onDisconnect.addListener((n=>{if(chrome.runtime.lastError)chrome.runtime.lastError.message;s?c.instance=t():(0,e.sY)("error","Failed to connect neovim, please make sure your neovim version 0.5 or above.")})),r.onMessage.addListener((async t=>{if(!0===t.status){if(s=!0,"serverStarted"===t.res.event){const e=`127.0.0.1:${t.res.port}/${i}`;n({url:e,nm:r})}}else t.err&&(0,e.sY)("error",t.err)})),r.postMessage({startServer:!0,password:i})}))}(),function(r){var s={},c=[],u=0,l=0,d=!1,f={},m={},p={},h=r._setNewTabUrl(),g={focusAfterClosed:"right",repeatThreshold:99,tabsMRUOrder:!0,newTabPosition:"default",showTabIndices:!1,interceptedErrors:[]},b=[];function y(e,t){var n=t;if(""===e.title||e.hasOwnProperty("url")&&void 0!==e.url||(n+="/"+e.title,b.push({id:e.id,title:n+"/"})),e.hasOwnProperty("children"))for(var o=0;o<e.children.length;++o)y(e.children[o],n)}function v(e,t){e.path.length?chrome.bookmarks.create({parentId:e.folder,title:e.path.shift()},(function(n){e.folder=n.id,v(e,t)})):chrome.bookmarks.create({parentId:e.folder,title:e.title,url:e.url},(function(e){t(e)}))}function _(e,n){r.loadRawSettings(e,(function(e){"string"==typeof e.proxy&&(e.proxy=[e.proxy],e.autoproxy_hosts=[e.autoproxy_hosts]),e.localPath?t(e.localPath,(function(t){e.snippets=t,n(e)}),void 0,void 0,(function(t){e.error="Failed to read snippets from "+e.localPath,n(e)})):n(e)}),{blocklist:{},marks:{},findHistory:[],cmdHistory:[],sessions:{},proxyMode:"clear",autoproxy_hosts:[],proxy:[]})}function w(e){if(m.hasOwnProperty(e)){var t=m[e];chrome.tabs.executeScript(e,{code:"_setScrollPos("+t.scrollLeft+", "+t.scrollTop+")"}),delete m[e]}}function x(e,t,n,o){-1===t?chrome.tabs.sendMessage(e,n):chrome.tabs.sendMessage(e,n,{frameId:t})}_(null,r._applyProxySettings),chrome.tabs.onRemoved.addListener((function(e){delete f[e],delete m[e],delete p[e],c=c.filter((function(t){return t!==e})),z.length&&chrome.tabs.create({active:!1,url:z.shift()}),R()}));var E=null;function k(e){E!==e&&(null!==E&&x(E,0,{subject:"tabDeactivated"}),x(e,0,{subject:"tabActivated"}),E=e)}function T(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){t.length>0&&e(t[0])}))}function C(e,t,n){var o=s.pendingPorts.indexOf(e);-1!==o&&s.pendingPorts.splice(o,1),t(n)}function A(e){chrome.tabs.query({},(function(t){t.forEach((function(t){x(t.id,-1,{subject:"settingsUpdated",settings:e})}))}))}function S(e,t){A(e),function(e,t){e.savedAt=(new Date).getTime(),i(chrome.storage.local,e,(function(){t&&t()})),i(chrome.storage.sync,e,(function(){chrome.runtime.lastError&&chrome.runtime.lastError.message}))}(e,t)}function R(){g.showTabIndices&&chrome.tabs.query({currentWindow:!0},(function(e){e.forEach((function(e){x(e.id,0,{subject:"tabIndexChange",index:e.index+1})}))}))}function O(e){return 0!==e.frameId&&"about:blank"===e.url?e.tab.url:e.url}function L(e,t,n){if(e.blocklist[".*"])return!0;if(t){if(e.blocklist[t.origin])return!0;if(n)return(n=new RegExp(n.source,n.flags)).test(t.href)}return!1}function I(t,n){return t=t.filter((function(e){return e.url})),(0,e.w0)(t,n)}function M(e,t,n,o){r.getLatestHistoryItem(e,t,(e=>{o&&(e=e.sort((function(e,t){return t.visitCount-e.visitCount}))),n(e)}))}function U(e,t){chrome.windows.update(e,{focused:!0},(function(){chrome.tabs.update(t,{active:!0})}))}function N(e,t){return e<0?e=0:e>=t&&(e=t),e}function P(e,t){e?chrome.tabs.query({windowId:e.windowId},(function(n){0==e.index&&-1==t?t=n.length-1:e.index==n.length-1&&1==t&&(t=1-n.length);var o=N(e.index+t,n.length-1);chrome.tabs.update(n[o].id,{active:!0})})):T((function(e){P(e,t)}))}function D(e,t,n){e?chrome.tabs.query({windowId:e.windowId},(function(o){var r=o.map((function(e){return e.id}));t=N(t,o.length);var i=function(e,t,n){return t>n-e&&(e-=t-(n-e)),e}(e.index,t,o.length);n(r.slice(i,i+t))})):T((function(e){D(e,t,n)}))}function F(e,t){chrome.tabs.query({currentWindow:!0},(function(n){n=n.map((function(e){return e.id})),chrome.tabs.remove(n.slice(e.tab.index+(t<0?t:1),e.tab.index+(t<0?0:1+t)))}))}chrome.tabs.onUpdated.addListener((function(e,t,n){"complete"===t.status&&n.active&&k(e),r.detectTabTitleChange&&t.title&&x(e,0,{subject:"titleChanged",changeInfo:t}),w(e)})),chrome.windows.onFocusChanged.addListener((function(e){T((function(e){k(e.id)}))})),chrome.tabs.onCreated.addListener((function(e){w(e.id),R()})),chrome.tabs.onMoved.addListener((function(){R()})),chrome.tabs.onActivated.addListener((function(e){d||e.tabId==c[c.length-1]||(c.length>10&&c.shift(),u!=c.length-1&&c.splice(u+1,c.length-1),c.push(e.tabId),u=c.length-1),f[e.tabId]=(new Date).getTime(),k(e.tabId),d=!1,l=0,w(e.tabId),R()})),chrome.tabs.onDetached.addListener((function(){R()})),chrome.tabs.onAttached.addListener((function(){R()})),chrome.commands.onCommand.addListener((function(e){switch(e){case"restartext":chrome.tabs.query({},(function(e){e.forEach((function(e){chrome.tabs.reload(e.id)})),chrome.runtime.reload()}));break;case"previousTab":case"nextTab":T((function(t){var n="previousTab"===e?t.index-1:t.index+1;chrome.tabs.query({windowId:t.windowId},(function(e){n=(n%e.length+e.length)%e.length,chrome.tabs.update(e[n].id,{active:!0})}))}));break;case"closeTab":T((function(e){chrome.tabs.remove(e.id)}));break;case"proxyThis":T((function(e){j({host:new URL(e.url||e.pendingUrl).host,operation:"toggle"},(function(){chrome.tabs.reload(e.id,{bypassCache:!0})}))}))}})),s.pendingPorts=[],chrome.runtime.onMessage.addListener((function(e,t,n){if(s.hasOwnProperty(e.action)){e.repeats>g.repeatThreshold&&(e.repeats=g.repeatThreshold);var o=s[e.action](e,t,n);if(e.needResponse)return o?(n(o),e.needResponse=!1):s.pendingPorts.push(e),e.needResponse}else console.log("[unexpected runtime message] "+JSON.stringify(e))})),s.toggleBlocklist=function(e,t,n){_("blocklist",(function(o){var r=".*",i=t.origin||new URL(O(t)).origin;0!==chrome.extension.getURL("/").indexOf(i)&&"null"!==i&&(r=i),o.blocklist.hasOwnProperty(r)?delete o.blocklist[r]:o.blocklist[r]=1,S({blocklist:o.blocklist},(function(){n({disabled:L(o,t.tab?new URL(O(t)):null,e.blocklistPattern),blocklist:o.blocklist,url:r})}))}))},s.toggleMouseQuery=function(e,t,n){_("mouseSelectToQuery",(function(n){if(t.tab&&0!==t.tab.url.indexOf(chrome.extension.getURL("/"))){var o=n.mouseSelectToQuery||[],r=o.indexOf(e.origin);-1===r?o.push(e.origin):o.splice(r,1),S({mouseSelectToQuery:o})}}))},s.getDisabled=function(e,t,n){_(["blocklist","noPdfViewer"],(function(o){t.tab&&C(e,n,{noPdfViewer:o.noPdfViewer,disabled:L(o,new URL(O(t)),e.blocklistPattern)})}))},s.addVIMark=function(e,t,n){_("marks",(function(t){o(t.marks,e.mark),S({marks:t.marks})}))},s.jumpVIMark=function(e,t,n){_("marks",(function(o){var r=o.marks;if(r.hasOwnProperty(e.mark)){var i=r[e.mark];chrome.tabs.query({},(function(e){0===(e=e.filter((function(e){return e.url===i.url}))).length?(i.tab={tabbed:!0,active:!0},s.openLink(i,t,n)):((i.scrollLeft||i.scrollTop)&&(m[e[0].id]={scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}),e[0].id===t.tab.id?w(e[0].id):chrome.tabs.update(e[0].id,{active:!0}))}))}}))},s.resetSettings=function(e,t,n){chrome.storage.local.clear(),chrome.storage.sync.clear(),_(null,(function(t){r._applyProxySettings(t),C(e,n,{settings:t}),A(t)}))},s.loadSettingsFromUrl=function(e,n,o){var r,i;r=e.url,i=function(t){C(e,o,t)},t(r,(function(e){S({localPath:r,snippets:e}),i({status:"Succeeded",snippets:e})}),void 0,void 0,(function(e){i({status:"Failed"})}))},s.getRecentlyClosed=function(e,t,n){chrome.sessions.getRecentlyClosed({},(function(t){for(var o=[],r=0;r<t.length;r++){var i=t[r];i.hasOwnProperty("window")?o=o.concat(i.window.tabs):i.hasOwnProperty("tab")&&o.push(i.tab)}o=I(o,e.query),C(e,n,{urls:o})}))},s.getTopSites=function(e,t,n){chrome.topSites?chrome.topSites.get((function(t){t=I(t,e.query),C(e,n,{urls:t})})):C(e,n,{urls:[]})},s.getAllURLs=function(e,t,n){chrome.bookmarks.search(e.query||{},(function(t){var o=t,r=e.maxResults||100,i=r-o.length;i>0?M(e.query||"",i,(function(t){o=o.concat(t),C(e,n,{urls:o})}),!0):C(e,n,{urls:o.slice(0,r)})}))},s.getTabs=function(e,t,n){var o=t.tab,r=e.queryInfo||{};chrome.tabs.query(r,(function(t){t=I(t,e.query),e.query&&e.query.length&&(t=t.filter((function(t){return-1!==t.title.indexOf(e.query)||t.url&&-1!==t.url.indexOf(e.query)}))),t=t.filter((function(e){return e.id!==o.id})),g.tabsMRUOrder&&t.sort((function(e,t){var n=f[e.id],o=f[t.id];return isFinite(n)||isFinite(o)?isFinite(n)?isFinite(o)?o-n:-1:1:0})),C(e,n,{tabs:t})}))},s.togglePinTab=function(e,t,n){T((function(e){return chrome.tabs.update(e.id,{pinned:!e.pinned})}))},s.focusTab=function(e,t,n){void 0!==e.windowId&&t.tab.windowId!==e.windowId?U(e.windowId,e.tabId):chrome.tabs.update(e.tabId,{active:!0})},s.focusTabByIndex=function(e,t,n){var o=e.queryInfo||{};chrome.tabs.query(o,(function(t){e.repeats>0&&e.repeats<=t.length&&chrome.tabs.update(t[e.repeats-1].id,{active:!0})}))},s.goToLastTab=function(e,t,n){if(c.length>1){var o=c[c.length-2];chrome.tabs.update(o,{active:!0})}},s.historyTab=function(e,t,n){if(c.length>0){d=!0,e.hasOwnProperty("index")?u=(parseInt(e.index)+c.length)%c.length:(u+=e.backward?-1:1)<0?u=0:u>=c.length&&(u=c.length-1);const t=c[u];chrome.tabs.update(t,{active:!0})}},s.nextTab=function(e,t,n){P(t.tab,e.repeats)},s.previousTab=function(e,t,n){P(t.tab,-e.repeats)},s.reloadTab=function(e,t,n){D(t.tab,e.repeats,(function(t){t.forEach((function(t){chrome.tabs.reload(t,{bypassCache:e.nocache})}))}))},s.closeTab=function(e,t,n){D(t.tab,e.repeats,(function(e){chrome.tabs.remove(e,(function(){"left"===g.focusAfterClosed?P(t.tab,-1):"last"===g.focusAfterClosed&&s.historyTab({backward:!0})}))}))},s.closeTabLeft=function(e,t,n){F(t,-e.repeats)},s.closeTabRight=function(e,t,n){F(t,e.repeats)},s.closeTabsToLeft=function(e,t,n){F(t,-t.tab.index)},s.closeTabsToRight=function(e,t,n){chrome.tabs.query({currentWindow:!0},(function(e){F(t,e.length-t.tab.index)}))},s.tabOnly=function(e,t,n){chrome.tabs.query({currentWindow:!0},(function(e){e=e.filter((function(e){return e.id!=t.tab.id&&!e.pinned})).map((function(e){return e.id})),chrome.tabs.remove(e)}))},s.closeAudibleTab=function(e,t,n){chrome.tabs.query({audible:!0},(function(e){e&&chrome.tabs.remove(e[0].id)}))},s.muteTab=function(e,t,n){var o=t.tab;chrome.tabs.update(o.id,{muted:!o.mutedInfo.muted})},s.openLast=function(e,t,n){chrome.sessions.restore()},s.duplicateTab=function(e,t,n){chrome.tabs.duplicate(t.tab.id,(function(){!1===e.active&&chrome.tabs.update(t.tab.id,{active:!0})}))};let B=-1;function q(e,t,n){return e.filter((function(e){var o=e.title,r=e.url;return n||(o=o.toLowerCase(),r=r&&r.toLowerCase(),t=t.toLowerCase()),-1!==o.indexOf(t)||r&&-1!==r.indexOf(t)}))}function H(e,t,n){var o;if(e)switch(g.newTabPosition){case"left":o=e.index;break;case"right":o=e.index+1;break;case"first":o=0;break;case"last":break;default:o=e.index+1+l,l++}chrome.tabs.create({url:t,active:n.tab.active,index:o,pinned:n.tab.pinned,openerTabId:e.id},(function(e){(n.scrollLeft||n.scrollTop)&&(m[e.id]={scrollLeft:n.scrollLeft,scrollTop:n.scrollTop})}))}function W(){chrome.windows.getAll({populate:!1},(function(e){e.forEach((function(e){chrome.windows.remove(e.id)}))}))}function j(e,t){_(["proxyMode","proxy","autoproxy_hosts"],(function(o){if("deleteProxyPair"===e.operation)o.proxy.splice(e.number,1),o.autoproxy_hosts.splice(e.number,1);else if("set"===e.operation)o.proxyMode=e.mode,o.proxy=e.proxy,o.autoproxy_hosts=e.host;else if(e.mode&&(o.proxyMode=e.mode),e.number||(e.number=0),e.proxy&&(o.proxy[e.number]=e.proxy,o.autoproxy_hosts.length<=e.number&&(o.autoproxy_hosts[e.number]=[])),e.host){var i=n(o.autoproxy_hosts[e.number],1),a=e.host.split(/\s*[ ,\n]\s*/);"toggle"===e.operation?a.forEach((function(e){i.hasOwnProperty(e)?delete i[e]:i[e]=1})):"add"===e.operation?a.forEach((function(e){i[e]=1})):a.forEach((function(e){delete i[e]})),o.autoproxy_hosts[e.number]=Object.keys(i)}var s={autoproxy_hosts:o.autoproxy_hosts,proxyMode:o.proxyMode,proxy:o.proxy};S(s),r._applyProxySettings(o),t&&t(s)}))}function K(e,t){chrome.bookmarks.search({url:e},(function(e){e.forEach((function(e){chrome.bookmarks.remove(e.id)})),t&&t()}))}s.getWindows=function(e,t,n){chrome.tabs.query({currentWindow:!1},(function(t){const o={};t.forEach((e=>{const t=o[e.windowId]||[];t.push({title:e.title,url:e.url}),o[e.windowId]=t})),C(e,n,{windows:Object.keys(o).map((e=>({id:e,tabs:o[e],isPreviousChoice:parseInt(e)===B})))})}))},s.moveToWindow=function(e,t,n){-1===e.windowId?chrome.windows.create({tabId:t.tab.id}):chrome.tabs.move(t.tab.id,{windowId:e.windowId,index:-1},(()=>{U(e.windowId,t.tab.id)})),B=e.windowId},s.gatherWindows=function(e,t,n){const o=t.tab.windowId;chrome.tabs.query({currentWindow:!1},(function(e){e.forEach((function(e){chrome.tabs.move(e.id,{windowId:o,index:-1})}))}))},s.gatherTabs=function(e,t,n){const o=t.tab.windowId;e.tabs.forEach((function(e){chrome.tabs.move(e.id,{windowId:o,index:-1})}))},s.getBookmarkFolders=function(e,t,n){chrome.bookmarks.getTree((function(t){b=[],y(t[0],""),C(e,n,{folders:b})}))},s.createBookmark=function(e,t,n){K(e.page.url,(function(){v(e.page,(function(t){C(e,n,{bookmark:t})}))}))},s.getBookmarks=function(e,t,n){e.parentId?chrome.bookmarks.getSubTree(e.parentId,(function(t){var o=t[0].children;e.query&&e.query.length&&(o=q(o,e.query,e.caseSensitive)),C(e,n,{bookmarks:o})})):e.query&&e.query.length?chrome.bookmarks.search(e.query,(function(t){C(e,n,{bookmarks:q(t,e.query,e.caseSensitive)})})):chrome.bookmarks.getTree((function(t){C(e,n,{bookmarks:t[0].children})}))},s.getHistory=function(e,t,n){M(e.query||"",e.maxResults||100,(function(t){C(e,n,{history:t})}),e.sortByMostUsed)},s.addHistories=function(e,t,n){e.history.forEach((e=>{chrome.history.addUrl({url:e})}))},s.openLink=function(e,t,n){var o=function(e){return!/^view-source:|^javascript:/.test(e)&&/^(?:https?:\/\/)?(?:[^@\/\n]+@)?(?:www\.)?([^:\/\n]+)/im.test(e)&&(e=/^[\w-]+?:/i.test(e)?e:"http://"+e),e}(e.url);o.startsWith("javascript:")?chrome.tabs.executeScript(t.tab.id,{code:o.substr(11)}):e.tab.tabbed?0!==t.frameId&&chrome.extension.getURL("pages/frontend.html")===t.url||!t.tab?T((function(t){H(t,o,e)})):H(t.tab,o,e):chrome.tabs.update({url:o,pinned:e.tab.pinned||t.tab.pinned},(function(t){(e.scrollLeft||e.scrollTop)&&(m[t.id]={scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})}))},s.viewSource=function(e,t,n){e.url="view-source:"+t.tab.url,s.openLink(e,t,n)},s.getSettings=function(e,t,n){var o=_;"RAW"===e.key&&(o=r.loadRawSettings,e.key=""),o(e.key,(function(t){C(e,n,{settings:t})}))},s.updateSettings=function(e,t,n){if("snippets"===e.scope)for(var o in e.settings)g.hasOwnProperty(o)&&(g[o]=e.settings[o]);else S(e.settings)},s.setSurfingkeysIcon=function(e,t,n){chrome.browserAction.setIcon({path:e.status?"icons/48-x.png":"icons/48.png",tabId:t.tab?t.tab.id:void 0})},s.request=function(e,n,o){t(e.url,(function(t){C(e,o,{text:t})}),e.headers,e.data)},s.requestImage=function(e,t,n){const o=document.createElement("img");o.crossOrigin="Anonymous",o.src=e.url,o.onload=()=>{const t=document.createElement("canvas");t.height=o.naturalHeight,t.width=o.naturalWidth;t.getContext("2d").drawImage(o,0,0,t.width,t.height),C(e,n,{text:t.toDataURL()})}},s.nextFrame=function(e,t,n){var o=t.tab.id;chrome.tabs.executeScript(o,{allFrames:!0,matchAboutBlank:!0,runAt:"document_start",code:"typeof(getFrameId) === 'function' && getFrameId()"},(function(t){if((t=t.filter((function(e){return e}))).length>0){let n=0;for(n=0;n<t.length&&t[n]!==e.frameId;n++);n=n===t.length-1?0:n+1,x(o,-1,{subject:"focusFrame",frameId:t[n]})}}))},s.moveTab=function(e,t,n){chrome.tabs.query({windowId:t.tab.windowId},(function(n){var o=N(t.tab.index+e.step*e.repeats,n.length);chrome.tabs.move(t.tab.id,{index:o})}))},s.quit=function(e,t,n){W()},s.createSession=function(e,t,n){_("sessions",(function(t){chrome.tabs.query({},(function(n){var o={};n.forEach((function(e){e&&void 0!==e.index&&(o.hasOwnProperty(e.windowId)||(o[e.windowId]=[]),e.url!==h&&o[e.windowId].push(e.url))}));var r=[];for(var i in o)o[i].length&&r.push(o[i]);t.sessions[e.name]={},t.sessions[e.name].tabs=r,S({sessions:t.sessions},e.quitAfterSaved?W:void 0)}))}))},s.openSession=function(e,t,n){_("sessions",(function(t){if(t.sessions.hasOwnProperty(e.name)){var n=t.sessions[e.name].tabs;n[0].forEach((function(e){chrome.tabs.create({url:e,active:!1,pinned:!1})}));for(var o=1;o<n.length;o++){var r=n[o];chrome.windows.create({},(function(e){r.forEach((function(t){chrome.tabs.create({windowId:e.id,url:t,active:!1,pinned:!1})}))}))}chrome.tabs.query({url:h},(function(e){chrome.tabs.remove(e.map((function(e){return e.id})))}))}}))},s.deleteSession=function(e,t,n){_("sessions",(function(t){delete t.sessions[e.name],S({sessions:t.sessions})}))},s.closeDownloadsShelf=function(e,t,n){e.clearHistory?chrome.downloads.erase({urlRegex:".*"}):(chrome.downloads.setShelfEnabled(!1),chrome.downloads.setShelfEnabled(!0))},s.getDownloads=function(e,t,n){chrome.downloads.search(e.query,(function(t){C(e,n,{downloads:t})}))},s.download=function(e,t,n){chrome.downloads.download({url:e.url,saveAs:e.saveAs})},s.executeScript=function(e,t,n){chrome.tabs.executeScript(t.tab.id,{frameId:t.frameId,code:e.code,matchAboutBlank:!0,file:e.file},(function(t){C(e,n,{response:t})}))},s.tabURLAccessed=function(e,t,n){if(t.tab){var o=t.tab.id;return p.hasOwnProperty(o)||(p[o]={}),p[o][e.url]=e.title,{active:t.tab.active,index:g.showTabIndices?t.tab.index+1:0}}return{}},s.getTabURLs=function(e,t,n){var o=p[t.tab.id]||{};return{urls:o=Object.keys(o).map((function(e){return{url:e,title:o[e]}}))}},s.getTopURL=function(e,t,n){return{url:t.tab?t.tab.url:""}},s.updateProxy=function(e,t,n){j(e,(function(t){C(e,n,t)}))},s.setZoom=function(e,t,n){var o=t.tab.id,r=e.zoomFactor*e.repeats;0==r?chrome.tabs.setZoom(o,1):chrome.tabs.getZoom(o,(function(e){chrome.tabs.setZoom(o,e+r)}))},s.removeURL=function(e,t,n){var o=0,r=e.uid.length,i=e.uid;function a(){++o===r&&C(e,n,{response:"Done"})}"string"==typeof e.uid&&(r=1,i=[e.uid]),i.forEach((function(e){!function(e,t){var n=e[0];e=e.substr(1),"B"===n?chrome.bookmarks.remove(e,t):"H"===n?chrome.history.deleteUrl({url:e},t):"T"===n?(e=e.split(":").map((function(e){return parseInt(e)})),chrome.windows.update(e[0],{focused:!0},(function(){chrome.tabs.remove(e[1],t)}))):"M"===n&&_("marks",(function(n){delete n.marks[e],S({marks:n.marks},t)}))}(e,a)}))},s.localData=function(e,t,n){e.data.constructor===Object?(chrome.storage.local.set(e.data,(function(){})),A(e.data)):chrome.storage.local.get(e.data,(function(t){C(e,n,{data:t})}))},s.captureVisibleTab=function(e,t,n){chrome.tabs.captureVisibleTab(null,{format:"png"},(function(t){C(e,n,{dataUrl:t})}))},s.getCaptureSize=function(e,t,n){var o=document.createElement("img");o.onload=function(){C(e,n,{width:o.width,height:o.height})},chrome.tabs.captureVisibleTab(null,{format:"png"},(function(e){o.src=e}))},s.deleteHistoryOlderThan=function(e,t,n){var o=e.days||0,r=e.hours||0;chrome.history.deleteRange({startTime:0,endTime:(new Date).getTime()-1e3*(86400*o+3600*r)},(function(){}))},s.removeBookmark=function(e,t,n){K(t.tab.url)},s.getBookmark=function(e,t,n){chrome.bookmarks.search({url:t.tab.url},(function(t){C(e,n,{bookmarks:t})}))},s.initGist=function(e,t,n){return a.initGist(e.token,(function(t){C(e,n,{gist:t})}))},s.readComment=function(e,t,n){a.readComment(e.index,(function(t){C(e,n,t)}))},s.editComment=function(e,t,n){a.editComment(e.index,e.content,(function(t){C(e,n,{gistResp:t})}))};var G,z=[];function V(e){for(var t=0;t<e.requestHeaders.length;++t)if("User-Agent"===e.requestHeaders[t].name){e.requestHeaders[t].value=G;break}return{requestHeaders:e.requestHeaders}}s.queueURLs=function(e,t,n){z=z.concat(e.urls)},s.getQueueURLs=function(e,t,n){return{queueURLs:z}},s.getVoices=function(e,t,n){chrome.tts.getVoices((function(t){C(e,n,{voices:t})}))},s.read=function(e,t,n){var o=e.options||{};o.onEvent=function(o){"start"===o.type?C(e,n,{ttsEvent:o}):x(t.tab.id,-1,{subject:"onTtsEvent",ttsEvent:o})},chrome.tts.speak(e.content,o)},s.stopReading=function(e,t,n){chrome.tts.stop()},s.openIncognito=function(e,t,n){chrome.windows.create({url:e.url,incognito:!0})},s.setUserAgent=function(e,t,n){e.userAgent?(G=e.userAgent,chrome.webRequest.onBeforeSendHeaders.addListener(V,{urls:["<all_urls>"]},["blocking","requestHeaders"])):chrome.webRequest.onBeforeSendHeaders.removeListener(V),chrome.tabs.reload(t.tab.id)},s.writeClipboard=function(e,t,n){navigator.clipboard.writeText(e.text)},s.readClipboard=function(e,t,n){chrome.runtime.sendNativeMessage("application.id",{message:"Clipboard.read"},(function(t){C(e,n,t)}))},s.getContainerName=r._getContainerName(s,C),chrome.runtime.setUninstallURL("http://brookhong.github.io/2018/01/30/why-did-you-uninstall-surfingkeys.html"),s.connectNative=function(e,t,n){r.nvimServer&&r.nvimServer.instance.then((({url:t,nm:o})=>{o.postMessage({mode:e.mode}),C(e,n,{url:t})})).catch((t=>{C(e,n,{error:t})}))}}({detectTabTitleChange:!0,getLatestHistoryItem:function(t,n,o){t.toLowerCase();let r=(new Date).getTime(),i=[];const a=(n,o,r)=>{const s=o*Math.pow(10,Math.min(2,t.length));chrome.history.search({startTime:0,endTime:n,text:"",maxResults:s},(function(s){const c=(0,e.w0)(s,t);i=[...i,...c],s.length<o||i.length>=o?r(i.slice(0,o)):(n=s[s.length-1].lastVisitTime-.01,a(n,o,r))}))};a(r,n,o)},loadRawSettings:function(e,t,n){var a=n||{};chrome.storage.local.get(null,(function(n){var s=n.savedAt||0;chrome.storage.sync.get(null,(function(c){var u=c.savedAt||0;s>u?(o(a,n),i(chrome.storage.sync,n,(function(){var n=r(a,e);chrome.runtime.lastError&&(n.error="Settings sync may not work thoroughly because of: "+chrome.runtime.lastError.message),t(n)}))):s<u?(o(a,c),t(r(a,e)),i(chrome.storage.local,c)):(o(a,n),t(r(a,e)))}))}))},nvimServer:c,_applyProxySettings:function(e){if(e.proxyMode&&"clear"!==e.proxyMode){var t=e.autoproxy_hosts.map((function(e){return e.filter((function(e){return-1!==e.indexOf("*")})).join("|")})),o=e.autoproxy_hosts.map((function(e){return n(e.filter((function(e){return-1===e.indexOf("*")})),1)})),r={mode:-1!==["always","byhost","bypass"].indexOf(e.proxyMode)?"pac_script":e.proxyMode,pacScript:{data:`var pacGlobal = {\n                        hosts: ${JSON.stringify(o)},\n                        autoproxy_pattern: ${JSON.stringify(t)},\n                        proxyMode: '${e.proxyMode}',\n                        proxy: ${JSON.stringify(e.proxy)}\n                    };\n                    function FindProxyForURL(url, host) {\n                        var lastPos;\n                        if (pacGlobal.proxyMode === "always") {\n                            return pacGlobal.proxy[0];\n                        } else if (pacGlobal.proxyMode === "bypass") {\n                            var pp = new RegExp(pacGlobal.autoproxy_pattern[0]);\n                            do {\n                                if (pacGlobal.hosts[0].hasOwnProperty(host)\n                                    || (pacGlobal.autoproxy_pattern[0].length && pp.test(host))) {\n                                    return "DIRECT";\n                                }\n                                lastPos = host.indexOf('.') + 1;\n                                host = host.slice(lastPos);\n                            } while (lastPos >= 1);\n                            return pacGlobal.proxy[0];\n                        } else {\n                            for (var i = 0; i < pacGlobal.proxy.length; i++) {\n                                var pp = new RegExp(pacGlobal.autoproxy_pattern[i]);\n                                var ahost = host;\n                                do {\n                                    if (pacGlobal.hosts[i].hasOwnProperty(ahost)\n                                        || (pacGlobal.autoproxy_pattern[i].length && pp.test(ahost))) {\n                                        return pacGlobal.proxy[i];\n                                    }\n                                    lastPos = ahost.indexOf('.') + 1;\n                                    ahost = ahost.slice(lastPos);\n                                } while (lastPos >= 1);\n                            }\n                            return "DIRECT";\n                        }\n                    }`}};chrome.proxy.settings.set({value:r,scope:"regular"},(function(){}))}else chrome.proxy.settings.clear({scope:"regular"})},_setNewTabUrl:function(){return"chrome://newtab/"},_getContainerName:function(e,t){}})})()})();